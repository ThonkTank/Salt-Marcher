# Development Roadmap

> **Wird ben√∂tigt von:** Aktueller Task

Implementierungsstrategie und aktueller Status f√ºr Salt Marcher.

---

## Status-Legende

| Status | Bedeutung |
|--------|-----------|
| ‚¨ú | Offen - Noch nicht implementiert |
| ‚úÖ | Implementiert und funktionsf√§hig |
| ‚ö†Ô∏è | Implementiert aber nicht funktionsf√§hig |
| üî∂ | Funktionsf√§hig aber nicht spezifikations-konform |

---

## üìã Tasks

| # | Status | Domain | Layer | Beschreibung | Prio | MVP? | Deps | Spec | Imp. |
|--:|:------:|--------|-------|--------------|:----:|:----:|------|------|------|
| 1 | ‚úÖ | Travel | features | State-Machine: idle ‚Üí planning ‚Üí traveling ‚Üî paused ‚Üí idle | hoch | Ja | - | Travel-System.md#state-machine, Events-Catalog.md#travel | travel-store.ts:setPlanning/setTraveling/setPaused/setResumed/setIdle |
| 2 | ‚úÖ | Travel | features | planRouteInternal(): Greedy-Pathfinding mit Waypoint-Support + Route-Validierung | hoch | Ja | #1 | Travel-System.md#event-flow, Map.md#hex-coordinate-system | travel-service.ts:planRouteInternal/planRouteWithWaypointsInternal/findPathGreedy/buildRoute |
| 3 | ‚úÖ | Travel | features | Speed-Berechnung: Basis-Speed √ó Terrain-Faktor √ó Weather-Faktor | hoch | Ja | - | Travel-System.md#speed-berechnung, Character-System.md#travel-system | types.ts:calculateHexTraversalTime, travel-service.ts:getBaseSpeed |
| 4 | ‚úÖ | Travel | features | Transport-Modi: foot, mounted, carriage, boat mit Terrain-Restriktionen | hoch | Ja | #3 | Travel-System.md#transport-modi | schemas/party.ts:TRANSPORT_BASE_SPEEDS, travel-service.ts:validateTraversable |
| 5 | ‚úÖ | Travel | features | Terrain-Faktoren aus TerrainDefinition.movementCost lesen | hoch | Ja | #3, #1700 | Travel-System.md#terrain-faktoren, Terrain.md#verwendung-in-anderen-features, Map-Feature.md#overworld-rendering | travel-service.ts:calculateSegmentTime (via mapFeature.getMovementCost) |
| 6 | ‚úÖ | Travel | features | Weather-Faktoren anwenden (clear, rain, storm, etc.) | hoch | Ja | #3, #110 | Travel-System.md#weather-faktoren, Weather-System.md#travel-integration | travel-service.ts:getWeatherSpeedFactor |
| 7 | ‚úÖ | Travel | features | Zeit-Integration via time:advance-requested | hoch | Ja | #1, #908 | Travel-System.md#tagesreise-berechnung, Time-System.md#zeit-operationen, Events-Catalog.md#time | travel-service.ts:publishTimeAdvance |
| 8 | ‚úÖ | Travel | features | processNextTravelTick(): Animierte Position-Updates + travel:position-changed Events | hoch | Ja | #2 | Travel-System.md#event-flow, SessionRunner.md#travel-integration | travel-service.ts:processNextTravelTick, travel-store.ts:advanceMinutesElapsed |
| 9 | ‚úÖ | Travel | features | Encounter-Checks pro Stunde (12.5% Basis-Chance) | hoch | Ja | #1, #7 | Travel-System.md#encounter-checks-waehrend-reisen, Encounter-System.md#aktivierungs-flow, Map-Feature.md#overworld-tiles | travel-service.ts:checkForEncounter, encounter-chance.ts:calculateEncounterChance/rollEncounter |
| 10 | ‚úÖ | Travel | features | Population-Modifikator f√ºr Encounter-Chance | hoch | Ja | #9 | Travel-System.md#population-modifikator | encounter-chance.ts:getPopulationFactor, travel-service.ts:getPopulationAt |
| 11 | ‚úÖ | Travel | features | Pause/Resume Funktionalit√§t | hoch | Ja | #1 | Travel-System.md#state-machine, Events-Catalog.md#travel | travel-service.ts:pauseTravelInternal/resumeTravelInternal, travel-store.ts:setPaused/setResumed |
| 12 | ‚úÖ | Travel | features | Event-Flow: travel:plan-requested ‚Üí route-planned ‚Üí start-requested ‚Üí started ‚Üí position-changed ‚Üí completed | hoch | Ja | #1, #2 | Travel-System.md#event-flow, Events-Catalog.md#travel, SessionRunner.md#travel-integration | travel-service.ts:publishRoutePlanned/publishTravelStarted/publishPositionChanged/publishTravelCompleted/publishStateChanged |
| 13 | ‚úÖ | Travel | features | Position-Ownership: Party als Single Source of Truth | hoch | Ja | - | Travel-System.md#position-ownership | party-service.ts:setPosition (aufgerufen von travel-service.ts) |
| 14 | ‚¨ú | Travel | features | validateTransportAvailable(): Pr√ºfe activeTransport in party.availableTransports bei plan-requested + Fehler-Event | hoch | Ja | #4 | Travel-System.md#transport-mode-invarianten, Character-System.md#character-schema | travel-service.ts:validateTransportAvailable [neu], party-service.ts:setActiveTransport [√§ndern] |
| 15 | ‚õî | Travel | features | planRouteInternal(): Validierung f√ºr Terrain-Restriktionen + Transport-Invariante (#14) mit travel:failed Event | hoch | Ja | #14 | Travel-System.md#validation-zeitpunkte | travel-service.ts:validateTraversable, planRouteInternal [√§ndern] |
| 16 | üìã | Travel | features | travel:failed Event bei Transport-Invarianten-Verletzung publizieren | hoch | Ja | #15 | Travel-System.md#transport-mode-invarianten, Error-Handling.md, Events-Catalog.md#travel | travel-service.ts:publishTravelFailed [neu], setupEventHandlers [√§ndern] |
| 17 | ‚¨ú | Travel | features | Travel: PathDefinition-Integration in Speed-Berechnung (calculateSegmentTime mit Path-Multiplikatoren erweitern) | mittel | Nein | #3, #5, #1811 | Travel-System.md#pfad-modifikation-post-mvp, Path.md#pathmovement | travel-service.ts:getPathMultiplier [neu], calculateSegmentTime [√§ndern] |
| 18 | ‚õî | Travel | features | Travel: Pfad-Barrieren-Validierung implementieren (blocksMovement pr√ºfen, requiresTransport gegen Party-Transport validieren) | mittel | Nein | #17, #1811, #1812 | Travel-System.md#pfad-modifikation-post-mvp, Path.md#pathmovement, Path.md#travel-system | travel-service.ts:getPathMultiplier [√§ndern], validateTraversable [√§ndern] |
| 19 | ‚õî | Travel | features | Travel: PathDirectionality-Support f√ºr Fluss-Str√∂mung (forwardSpeedModifier/backwardSpeedModifier in Speed-Berechnung) | niedrig | Nein | #17, #18, #1806 | Travel-System.md#pfad-modifikation-post-mvp | travel-service.ts:getPathMultiplier [√§ndern] |
| 20 | ‚õî | Travel | features | consumeRations(): Automatischer Rationen-Abzug bei Long Rest w√§hrend Reise (1 pro Character) | mittel | Nein | #7, #605, #608 | Travel-System.md#tagesreise-berechnung, Inventory-System.md#rationen, Character-System.md#character-schema | party-service.ts:consumeRations [neu], travel-service.ts:processNextTravelTick [√§ndern] |
| 21 | ‚õî | Travel | features | checkForcedMarch(): 10h/Tag + CON-Save DC 10+1 pro extra Stunde ‚Üí Ersch√∂pfung | niedrig | Nein | #7, #20 | Travel-System.md#standard-reisestunden | party-service.ts:addExhaustion [neu], travel-service.ts:checkForcedMarch [neu] |
| 101 | üìã | Weather | core | WeatherState: Vollst√§ndiges Interface mit precipChance, precipIntensity, fogLevel, windDirection, moonPhase, cloudCover, visibilityModifier | hoch | Ja | - | Weather-System.md#parameter | src/core/schemas/weather.ts:weatherParamsSchema, src/features/weather/types.ts:WeatherFeaturePort |
| 102 | ‚úÖ | Weather | features | Temperatur-Kategorisierung (freezing, cold, cool, mild, warm, hot) mit mechanischen Effekten | hoch | Ja | #101 | Weather-System.md#temperatur | src/core/schemas/weather.ts:temperatureCategorySchema+TEMPERATURE_THRESHOLDS, src/features/weather/weather-utils.ts:classifyTemperature() |
| 103 | ‚úÖ | Weather | features | Wind-Kategorisierung (calm, light, moderate, strong, gale) mit Effekten | hoch | Ja | #101 | Weather-System.md#wind | src/core/schemas/weather.ts:windCategorySchema+WIND_THRESHOLDS, src/features/weather/weather-utils.ts:classifyWind() |
| 104 | ‚õî | Weather | core | PrecipitationType Schema: none, drizzle, rain, heavy_rain, snow, blizzard, hail (ohne fog) | hoch | Ja | #101 | Weather-System.md#niederschlag | src/core/schemas/weather.ts:precipitationTypeSchema+PRECIPITATION_THRESHOLDS, src/features/weather/weather-utils.ts:classifyPrecipitation() |
| 105 | ‚õî | Weather | core | TerrainWeatherRanges Schema: temperature, wind, precipChance, precipIntensity, fogChance (min/avg/max Kurven) | hoch | Ja | #101, #1702 | Weather-System.md#range-schema, Terrain.md#schema | src/core/schemas/weather.ts:terrainWeatherRangesSchema+DEFAULT_WEATHER_RANGES, src/core/schemas/terrain.ts:TerrainDefinition.weatherRanges, presets/terrains/base-terrains.json |
| 106 | ‚õî | Weather | features | generateWeatherFromRanges(): Gaussian-√§hnliche Verteilung (deviation -1 bis +1, lerp zwischen avg und min/max) | hoch | Ja | #105 | Weather-System.md#generierungs-mechanik | src/features/weather/weather-utils.ts:generateWeatherFromRanges()+generateFromRange() |
| 107 | ‚úÖ | Weather | features | Area-Averaging: Gewichteter Wetter-Durchschnitt √ºber Hex-Nachbarn | hoch | Ja | #106, #802 | Weather-System.md#area-averaging | src/features/weather/weather-utils.ts:calculateAreaWeather(), src/features/weather/weather-service.ts:getTileWeatherRanges() |
| 108 | ‚úÖ | Weather | features | Time-Segment-Modifikatoren (6 Segmente mit Temperatur-Offset) | hoch | Ja | #101, #906, #912 | Weather-System.md#time-segment-berechnung, Time-System.md#time-segment-berechnung | src/core/schemas/weather.ts:SEGMENT_TEMPERATURE_MODIFIERS, src/features/weather/weather-utils.ts:generateWeatherFromRanges() |
| 109 | ‚úÖ | Weather | features | √úbergangs-Logik: Gradueller Wetter-Wechsel (TRANSITION_SPEED=0.3) | hoch | Ja | #101, #108 | Weather-System.md#uebergangs-logik | src/features/weather/weather-utils.ts:transitionWeather(), src/features/weather/weather-service.ts:calculateNewWeather() |
| 110 | ‚úÖ | Weather | features | Event-Flow: time:segment-changed ‚Üí environment:weather-changed | hoch | Ja | #109, #910 | Weather-System.md#event-flow, Events-Catalog.md#environment | src/features/weather/weather-service.ts:setupEventHandlers()+publishWeatherChanged() |
| 111 | ‚úÖ | Weather | features | Weather-Persistierung: currentWeather als Map Property | hoch | Ja | #101, #110, #800, #801 | Weather-System.md#current-weather-als-map-property, Map-Feature.md#overworldmap | src/core/schemas/map.ts:MapState.currentWeather, src/features/weather/weather-service.ts:initializeWeather() |
| 112 | ‚úÖ | Weather | features | Multi-Map Weather: Indoor-Maps haben kein Wetter | hoch | Ja | #111, #806 | Weather-System.md#map-typ-regeln, Map-Feature.md#wetter-auf-sub-maps | src/features/weather/weather-service.ts:initializeWeather() (map.type check) |
| 113 | ‚õî | Weather | features | Multi-Map Weather: Stadt-Maps erben Wetter vom Overworld-Tile | hoch | Ja | #111, #112, #827 | Weather-System.md#map-typ-regeln, Map-Feature.md#wetter-auf-sub-maps | src/features/weather/weather-service.ts:getWeatherForMap() [neu] |
| 114 | ‚¨ú | Weather | features | Background Weather Tick: Overworld-Weather l√§uft im Hintergrund | hoch | Ja | #111, #910 | Weather-System.md#background-weather | src/features/weather/weather-service.ts:setupEventHandlers() [√§ndern] |
| 115 | ‚õî | Weather | features | Weather-Events: Blizzard, Thunderstorm, Heatwave, Dense Fog, Dust Storm | mittel | Nein | #102, #103, #104, #110 | Weather-System.md#weather-events | src/features/weather/weather-utils.ts:checkWeatherEvents() [neu], src/core/events/types.ts [√§ndern] |
| 116 | ‚õî | Weather | features | Audio-Integration: Ambiance-Sounds bei weather-changed anpassen | mittel | Nein | #110, #1107, #1115 | Weather-System.md#consumer-features, Audio-System.md#context-updates | src/features/audio/orchestrator.ts [neu] |
| 117a | üìã | Weather | features | Visibility-Integration: Sichtweiten-Modifier aus Niederschlag + fogLevel berechnen | mittel | Nein | #3, #104, #110 | Weather-System.md#sichtweiten-einfluss-post-mvp, Map-Feature.md#visibility-system | src/features/map/visibility.ts:getVisibilityModifier() [neu] |
| 117b | ‚õî | Weather | features | Travel-Integration: Speed-Faktor bei weather-changed Event neu berechnen (Wind, Niederschlag) | mittel | Nein | #3, #104, #110 | Weather-System.md#consumer-features, Travel-System.md#weather-faktoren | src/features/travel/orchestrator.ts:handleWeatherChanged() [neu] |
| 118 | ‚õî | Weather | features | Terrain-Einfluss auf Nachbar-Tiles (mountains blockiert Wind, etc.) | niedrig | Nein | #107, #1700, #2953 | Weather-System.md#terrain-einfluss-nice-to-have, Terrain.md | src/features/weather/weather-utils.ts:calculateAreaWeather() [√§ndern] |
| 119 | ‚¨ú | Weather | features | GM Weather Override: Manuelles √úberschreiben des generierten Wetters | mittel | Nein | #111 | Weather-System.md#gm-weather-override | src/core/schemas/map.ts:MapState.weatherOverride [neu], src/features/weather/weather-service.ts:setWeatherOverride() [neu] |
| 120 | ‚õî | Weather | features | Weather-Historie: Signifikante √Ñnderungen in Almanac EventJournal speichern | niedrig | Nein | #111, #2208 | Weather-System.md#weather-historie-in-almanac | src/features/almanac/event-journal.ts [neu] |
| 121 | ‚õî | Weather | features | Zeit-R√ºcksprung (Recall): Historisches Wetter wiederherstellen | niedrig | Nein | #104, #120, #843, #847, #2208 | Weather-System.md#sichtweiten-einfluss-post-mvp, Map-Feature.md#umwelt-modifier | src/features/weather/weather-service.ts:recallWeather() [neu] |
| 200 | ‚úÖ | Encounter | features | Terrain-Filter: Kreatur.terrainAffinities vs aktuelles Terrain | hoch | Ja | #801, #1202 | Population.md#tile-eligibility | encounter-utils.ts:filterEligibleCreatures() |
| 201 | ‚úÖ | Encounter | features | Tageszeit-Filter: Kreatur.activeTime vs aktuelles TimeSegment | hoch | Ja | #910 | Population.md#tile-eligibility | encounter-utils.ts:filterEligibleCreatures() |
| 202 | ‚úÖ | Encounter | features | Fraktionspr√§senz-Gewichtung: Fraktion kontrolliert Tile ‚Üí √ó2.0-5.0 | hoch | Ja | #200, #201, #1410 | Population.md#tile-eligibility | encounter-utils.ts:calculateCreatureWeight() |
| 203 | ‚úÖ | Encounter | features | Rarit√§ts-Gewichtung: common √ó1.0, uncommon √ó0.3, rare √ó0.05 | hoch | Ja | #200, #201 | Population.md#tile-eligibility | encounter-utils.ts:calculateCreatureWeight() |
| 204 | ‚úÖ | Encounter | features | Wetter-Gewichtung: Kreatur.preferredWeather matched ‚Üí √ó1.5 | hoch | Ja | #110, #200, #201, #1207 | Population.md#tile-eligibility | encounter-utils.ts:calculateCreatureWeight() |
| 206 | ‚úÖ | Encounter | features | Gewichtete Zufallsauswahl aus eligible Creatures | hoch | Ja | #200, #202, #204 | Population.md#tile-eligibility | encounter-utils.ts:selectWeightedCreature() |
| 207 | üî∂ | Encounter | features | Typ-Ableitung: Disposition + Faction-Relation + CR-Balancing ‚Üí Encounter-Typ | hoch | Ja | #206, #235, #1400 | Encounter-System.md#typ-ableitung, Encounter-Balancing.md#cr-vergleich, Faction.md#schema | encounter-utils.ts:deriveEncounterType() |
| 208 | ‚úÖ | Encounter | features | Wahrscheinlichkeits-Matrix implementieren (hostile/neutral/friendly √ó winnable) | hoch | Ja | #207 | Encounter-System.md#wahrscheinlichkeits-matrix | encounter-utils.ts:getTypeProbabilities() |
| 209 | ‚úÖ | Encounter | features | EncounterHistory-Tracking (letzte 3-5 Encounters, typeDistribution) | hoch | Ja | - | Balance.md#variety-validation | encounter-store.ts:addToHistory(), types.ts:InternalEncounterState |
| 210 | ‚úÖ | Encounter | features | Variety-Algorithmus: Bei √úberrepr√§sentation ‚Üí Typ-Anpassung | hoch | Ja | #209 | Balance.md#variety-validation | encounter-utils.ts:deriveEncounterTypeWithVariety(), encounter-service.ts:executeGenerationPipeline() |
| 230 | ‚õî | Encounter | features | Location-Typ: POI-Discovery | mittel | Nein | #214, #1901 | Encounter-System.md#environmental--location-post-mvp, Encounter-System.md#encounter-typen | schemas/encounter.ts:encounterTypeSchema [√§ndern], encounter-utils.ts:deriveEncounterType() [√§ndern] |
| 231 | ‚úÖ | Encounter | features | NPC-Instanziierung: Bei Encounter suchen/erstellen mit Faction-Kultur | hoch | Ja | #1307, #1314, #1318, #1405, #2101 | Encounter-System.md#integration, NPC-System.md#lead-npc-auswahl, Faction.md#kultur-vererbung | npc-generator.ts:selectOrGenerateNpc(), resolveFactionCulture(), calculateNpcMatchScore() |
| 232 | ‚úÖ | Encounter | features | Lead-NPC Persistierung bei Encounter-Generierung | hoch | Ja | #231 | Encounter-System.md#npc-instanziierung | npc-generator.ts:generateNewNpc(), createEncounterLeadNpc(), encounter-service.ts:executeGenerationPipeline() |
| 235 | ‚úÖ | Encounter | core | CRComparison Type: trivial, manageable, deadly, impossible | hoch | Ja | - | Encounter-Balancing.md#encounter-difficulty, Encounter-System.md#typ-ableitung | encounter-utils.ts:CRComparison type definition |
| 240 | ‚úÖ | Encounter | core | Gruppen-Multiplikatoren: Anzahl Gegner ‚Üí effektives XP | hoch | Ja | - | Encounter-Balancing.md#gruppen-multiplikatoren | encounter-utils.ts:getGroupMultiplier(), calculateEffectiveXP() |
| 251 | ‚¨ú | Encounter | features | Multi-Gruppen-Trigger: Variety-Adjustment, Location-based, Random Chance | niedrig | Nein | #210 | Encounter-Balancing.md#multi-gruppen-encounters, Encounter-System.md#variety-validation, NPC-System.md#multi-gruppen-encounters | encounter-utils.ts:shouldGenerateMultiGroup() [neu] |
| 252 | ‚úÖ | Encounter | features | Multi-Gruppen-Generierung: 2+ NPC-Gruppen mit Relationen. Deliverables: EncounterInstance.groups[], shouldGenerateMultiGroup(), distributeBudget(), createEncounterGroup(), deriveGroupRelation() | hoch | Ja | - | Encounter-Balancing.md#multi-gruppen-encounters-post-mvp | schemas/encounter.ts (groups[], isMultiGroup), encounter-utils.ts (shouldGenerateMultiGroup, distributeBudget, deriveGroupRelation, createEncounterGroup), index.ts (exports) |
| 300 | ‚úÖ | Combat | core | CombatState Interface implementieren | hoch | Ja | - | Combat-System.md#combatstate | src/core/schemas/combat.ts:combatStateSchema |
| 301 | ‚úÖ | Combat | core | CombatParticipant Interface implementieren | hoch | Ja | #300 | Combat-System.md#combatstate | src/core/schemas/combat.ts:combatParticipantSchema |
| 302 | ‚úÖ | Combat | core | ConditionType + CONDITION_REMINDERS implementieren | hoch | Ja | - | Combat-System.md#conditions | src/core/schemas/combat.ts:conditionTypeSchema, src/core/schemas/combat.ts:CONDITION_REMINDERS |
| 303 | ‚úÖ | Combat | core | CombatEffect Interface implementieren | hoch | Ja | #301 | Combat-System.md#combateffect | src/core/schemas/combat.ts:combatEffectSchema |
| 304 | ‚úÖ | Combat | core | AbilityKey Type definieren | hoch | Ja | - | Combat-System.md#combateffect, Character-System.md#character-schema | src/core/schemas/combat.ts:abilityKeySchema |
| 305 | ‚úÖ | Combat | features | Combat State Machine: idle ‚Üí active ‚Üí idle | hoch | Ja | #300 | Combat-System.md#combat-flow | src/features/combat/combat-service.ts:startCombat(), src/features/combat/combat-service.ts:endCombat() |
| 306 | ‚úÖ | Combat | features | Initiative-Eingabe: GM tr√§gt Werte ein | hoch | Ja | #301 | Combat-System.md#eingabe | src/features/combat/combat-service.ts:updateInitiative(), src/features/combat/combat-store.ts:updateInitiative() |
| 307 | ‚úÖ | Combat | features | sortByInitiative(): H√∂herer Wert zuerst, Tie-breaker | hoch | Ja | #301 | Combat-System.md#sortierung, Character-System.md#combat-tracker | src/features/combat/combat-store.ts:startCombat() (Zeile 106) |
| 308 | ‚úÖ | Combat | features | applyDamage(): HP reduzieren, Events publizieren | hoch | Ja | #301 | Combat-System.md#damageheal | src/features/combat/combat-service.ts:applyDamage() |
| 309 | ‚úÖ | Combat | features | applyHealing(): HP erh√∂hen (max: maxHp) | hoch | Ja | #301 | Combat-System.md#damage-heal, Character-System.md#hp-tracking | src/features/combat/combat-service.ts:applyHealing() |
| 310 | ‚úÖ | Combat | features | Konzentrations-Check bei Damage: DC = max(10, damage/2) | hoch | Ja | #308 | Combat-System.md#damageheal | src/features/combat/combat-utils.ts:calculateConcentrationDc(), src/features/combat/combat-utils.ts:needsConcentrationCheck() |
| 311 | ‚úÖ | Combat | features | Character-Downed Event bei HP = 0 | hoch | Ja | #308 | Combat-System.md#death-saves, Character-System.md#hp-tracking | src/features/combat/combat-service.ts:publishCharacterDowned() (in applyDamage) |
| 312 | ‚úÖ | Combat | features | Condition hinzuf√ºgen (addCondition) | hoch | Ja | #302 | Combat-System.md#conditions | src/features/combat/combat-service.ts:addCondition(), src/features/combat/combat-store.ts:addCondition() |
| 313 | ‚úÖ | Combat | features | Condition entfernen (removeCondition) | hoch | Ja | #302 | Combat-System.md#conditions | src/features/combat/combat-service.ts:removeCondition(), src/features/combat/combat-store.ts:removeCondition() |
| 314 | ‚úÖ | Combat | features | Condition-Duration bei Turn-Ende reduzieren | hoch | Ja | #312 | Combat-System.md#effekt-verarbeitung | src/features/combat/combat-store.ts:decrementConditionDurations() (in nextTurn) |
| 315 | ‚úÖ | Combat | features | CombatEffect hinzuf√ºgen (addEffect) | hoch | Ja | #303 | Combat-System.md#combateffect | src/features/combat/combat-service.ts:addEffect(), src/features/combat/combat-store.ts:addEffect() |
| 316 | ‚úÖ | Combat | features | CombatEffect entfernen (removeEffect) | hoch | Ja | #303 | Combat-System.md#combateffect | src/features/combat/combat-service.ts:removeEffect(), src/features/combat/combat-store.ts:removeEffect() |
| 317 | ‚úÖ | Combat | features | processTurnStart(): Start-of-Turn Effekte sammeln | hoch | Ja | #315 | Combat-System.md#start-of-turn | src/features/combat/combat-utils.ts:getStartOfTurnEffects() |
| 318 | ‚úÖ | Combat | features | processTurnEnd(): Effect-Duration reduzieren | hoch | Ja | #315 | Combat-System.md#effekt-verarbeitung | src/features/combat/combat-store.ts:decrementEffectDurations() (in nextTurn) |
| 319 | ‚úÖ | Combat | features | nextTurn(): Zum n√§chsten Participant wechseln | hoch | Ja | #307 | Combat-System.md#combat-flow | src/features/combat/combat-service.ts:nextTurn() |
| 320 | ‚úÖ | Combat | features | Round-Tracking: roundNumber incrementieren bei Umlauf | hoch | Ja | #319 | Combat-System.md#combat-flow | src/features/combat/combat-store.ts:advanceTurn() |
| 321 | ‚úÖ | Combat | features | combat:start-requested Handler implementieren | hoch | Ja | #305 | Combat-System.md#combat-flow, Encounter-System.md#integration | src/features/combat/combat-service.ts:setupEventHandlers() (Zeile 205-217) |
| 322 | ‚úÖ | Combat | features | combat:started Event publizieren | hoch | Ja | #321 | Combat-System.md#events | src/features/combat/combat-service.ts:publishCombatStarted() |
| 323 | ‚úÖ | Combat | features | combat:end-requested Handler implementieren | hoch | Ja | #305 | Combat-System.md#events | src/features/combat/combat-service.ts:setupEventHandlers() (Zeile 220-225) |
| 324 | ‚úÖ | Combat | features | combat:completed Event publizieren mit xpAwarded, roundsTotal | hoch | Ja | #323 | Combat-System.md#events, Combat-System.md#post-combat-resolution | src/features/combat/combat-service.ts:publishCombatCompleted() |
| 325 | ‚úÖ | Combat | features | combat:turn-changed Event publizieren | hoch | Ja | #319 | Combat-System.md#events | src/features/combat/combat-service.ts:publishTurnChanged() |
| 326 | ‚úÖ | Combat | features | combat:participant-hp-changed Event publizieren | hoch | Ja | #308, #309 | Combat-System.md#events, Character-System.md#hp-tracking | src/features/combat/combat-service.ts:publishHpChanged() |
| 327 | ‚úÖ | Combat | features | combat:character-downed Event publizieren | hoch | Ja | #311 | Combat-System.md#events | src/features/combat/combat-service.ts:publishCharacterDowned() |
| 328 | ‚¨ú | Combat | features | combat:character-stabilized Event Handler: Spieler-Input verarbeiten (0 HP ‚Üí Stabilisiert) | hoch | Ja | #311 | Combat-System.md#events, Combat-System.md#death-saves | src/features/combat/combat-service.ts:publishCharacterStabilized() [neu] |
| 329 | ‚¨ú | Combat | features | combat:character-died Event Handler: Spieler-Input verarbeiten (0 HP ‚Üí Tod) | hoch | Ja | #328 | Combat-System.md#events, Combat-System.md#death-saves | src/features/combat/combat-service.ts:publishCharacterDied() [neu] |
| 330 | ‚úÖ | Combat | features | combat:concentration-check-required Event publizieren | hoch | Ja | #310 | Combat-System.md#events | src/features/combat/combat-service.ts:publishConcentrationCheckRequired() |
| 331 | ‚úÖ | Combat | features | combat:concentration-broken Event publizieren | hoch | Ja | #330 | Combat-System.md#events | src/features/combat/combat-service.ts:publishConcentrationBroken() |
| 332 | ‚úÖ | Combat | features | combat:effect-added Event publizieren | hoch | Ja | #315 | Combat-System.md#events | src/features/combat/combat-service.ts:addEffect() (Zeile 542-545) |
| 333 | ‚úÖ | Combat | features | combat:effect-removed Event publizieren | hoch | Ja | #316 | Combat-System.md#events | src/features/combat/combat-service.ts:removeEffect() (Zeile 573-576) |
| 334 | ‚úÖ | Combat | features | combat:condition-added Event publizieren | hoch | Ja | #312 | Combat-System.md#events | src/features/combat/combat-service.ts:publishConditionAdded() |
| 335 | ‚úÖ | Combat | features | combat:condition-removed Event publizieren | hoch | Ja | #313 | Combat-System.md#events | src/features/combat/combat-service.ts:publishConditionRemoved() |
| 336 | ‚úÖ | Combat | features | calculateCombatDuration(): roundNumber √ó 6 Sekunden | hoch | Ja | #324 | Combat-System.md#zeit-berechnung, Time-System.md#zeit-operationen | src/features/combat/combat-utils.ts:calculateCombatDuration() |
| 337 | ‚úÖ | Combat | features | time:advance-requested bei combat:completed publizieren | hoch | Ja | #336 | Combat-System.md#event-flow-1 | src/features/combat/combat-service.ts:publishTimeAdvance() (in endCombat) |
| 338 | ‚úÖ | Combat | features | XP-Berechnung: Basis-XP aus besiegten Kreaturen | hoch | Ja | #324 | Combat-System.md#xp-berechnung, Encounter-System.md#typ-spezifisches-verhalten | src/features/combat/combat-utils.ts:calculateCombatXp(), src/features/combat/combat-utils.ts:getXpForCr() |
| 339 | ‚úÖ | Combat | features | GM XP-Modifier: ¬±% Anpassung | hoch | Ja | #338 | Combat-System.md#xp-berechnung | src/features/combat/types.ts:CombatResult (UI integriert Modifier) |
| 340 | ‚úÖ | Combat | features | 40/60 XP-Split: 40% sofort, 60% Quest-Pool | hoch | Ja | #338 | Combat-System.md#xp-berechnung, Quest-System.md#xp-verteilung | src/features/combat/types.ts:CombatResult (UI-Integration offen) |
| 342 | ‚õî | Combat | application | loot:distributed Event bei Loot-Verteilung | hoch | Ja | #324, #2437, #2441 | Combat-System.md#event-sequenz | DetailView/Resolution-UI [neu] (UI-Verantwortung, nicht Combat-Service) |
| 343 | ‚õî | Combat | application | encounter:resolved Event nach Resolution-Flow | hoch | Ja | #338, #2431, #2441 | Combat-System.md#post-combat-resolution, Encounter-System.md#events, DetailView.md#post-combat-resolution | DetailView/Resolution-UI [neu] (UI-Verantwortung, nicht Combat-Service) |
| 344 | ‚¨ú | Combat | features | Resumable Combat State: initiativeOrder, currentTurnIndex, roundNumber, currentHp, conditions persistieren bei Plugin-Reload | mittel | Nein | #305 | Combat-System.md#resumable-combat-state-skizze | src/features/combat/combat-service.ts:restoreCombat() [neu], Plugin-Daten-Integration [neu] |
| 345 | ‚¨ú | Combat | features | Grid-Positioning: Positionierung auf Battle-Map (Post-MVP) | mittel | Nein | #301 | Combat-System.md#post-mvp-erweiterungen | src/features/combat/types.ts:CombatParticipant.position [neu], UI-Grid [neu] |
| 346 | ‚¨ú | Combat | features | Legendary Actions: Tracking f√ºr Boss-Kreaturen (Post-MVP) | niedrig | Nein | #301 | Combat-System.md#post-mvp-erweiterungen | src/features/combat/types.ts:CombatParticipant.legendaryActions [neu] |
| 347 | ‚¨ú | Combat | features | Lair Actions: Automatische Trigger (Post-MVP) | niedrig | Nein | #300 | Combat-System.md#post-mvp-erweiterungen | src/features/combat/types.ts:CombatState.lairActions [neu] |
| 348 | ‚¨ú | Combat | features | Reaction-Tracking: Wer hat Reaction verbraucht (Post-MVP) | niedrig | Nein | #301 | Combat-System.md#post-mvp-erweiterungen | src/features/combat/types.ts:CombatParticipant.reactionUsed [neu] |
| 349 | ‚¨ú | Combat | features | Spell Slot Tracking: Automatische Reduktion (Post-MVP) | niedrig | Nein | #301 | Combat-System.md#post-mvp-erweiterungen, Character-System.md#post-mvp-erweiterungen | src/features/combat/combat-service.ts:trackSpellSlot() [neu], Character-Integration [neu] |
| 400 | ‚úÖ | Quest | features | Quest State-Machine: unknown ‚Üí discovered ‚Üí active ‚Üí completed/failed | hoch | Ja | - | Quest-System.md#quest-state-machine, Quest.md#quest-status, Quest.md#state-transitions | quest-service.ts |
| 401 | ‚úÖ | Quest | core | QuestStatus Type: unknown, discovered, active, completed, failed | hoch | Ja | #400 | Quest.md#quest-status, Quest-System.md#quest-state-machine | quest.ts |
| 402 | üî∂ | Quest | core | QuestDefinition Schema im EntityRegistry | hoch | Ja | #2800, #2801 | Quest.md#questdefinition, Quest-System.md#quest-schema-entityregistry, EntityRegistry.md#entity-type-mapping, Quest.md#quest-giver | quest.ts |
| 403 | ‚õî | Quest | core | QuestObjective Schema (kill, collect, visit, escort, deliver, talk, custom) | hoch | Ja | #402, #1200, #1300, #1500, #1600 | Quest.md#questobjective, Quest-System.md#quest-schema-entityregistry | quest.ts |
| 404 | ‚õî | Quest | core | ObjectiveTarget Schema mit typ-abh√§ngigen Feldern | hoch | Ja | #403, #1200, #1300, #1500, #1600 | Quest.md#questobjective, Creature.md#schema, NPC-System.md#npc-schema, POI.md#basepoi, Item.md#schema | quest.ts |
| 405 | ‚úÖ | Quest | core | QuestEncounterSlot Schema (predefined-quantum, predefined-located, unspecified) | hoch | Ja | #402 | Quest.md#questencounterslot, Quest-System.md#encounter-modi, Encounter-System.md#schemas | quest.ts |
| 406 | üî∂ | Quest | core | QuestReward Schema (item, xp, reputation) mit Placement-Optionen | hoch | Ja | #402, #1400, #1600 | Quest.md#questreward, Quest-System.md#reward-platzierung, Faction.md#schema, Item.md#schema | quest.ts |
| 407 | ‚úÖ | Quest | features | QuestProgress Runtime-State (Resumable) | hoch | Ja | #400, #402 | Quest-System.md#quest-progress-runtime-state, Quest.md#quest-progress | quest-store.ts, types.ts |
| 408 | ‚úÖ | Quest | features | 40/60 XP Split: 40% sofort bei Encounter-Ende (NON-NEGOTIABLE) | hoch | Ja | #407, #417 | Quest-System.md#40-60-split-mechanik, Quest-System.md#xp-verteilung, Encounter-System.md#integration, Combat-System.md#xp-berechnung | quest-xp.ts |
| 409 | ‚úÖ | Quest | features | 60% XP zum Quest-Pool bei Quest-Encounter | hoch | Ja | #408 | Quest-System.md#4060-split-mechanik | quest-service.ts |
| 410 | ‚úÖ | Quest | features | Quest XP Auszahlung bei quest:completed | hoch | Ja | #409, #417 | Quest-System.md#40-60-split-mechanik, Quest.md#events | quest-service.ts |
| 411 | ‚úÖ | Quest | features | UI-Prompt nach encounter:resolved f√ºr Quest-Zuweisung | hoch | Ja | #405 | Quest-System.md#encounter-slot-matching | quest-service.ts |
| 412 | ‚úÖ | Quest | application | Quest-Assignment UI im Post-Combat Resolution Flow | hoch | Ja | #343, #411 | Quest-System.md#quest-assignment-ui-post-combat, Combat-System.md#post-combat-resolution, DetailView.md#post-combat-resolution, Quest.md#post-combat-flow | slot-assignment-dialog.ts |
| 413 | ‚úÖ | Quest | features | quest:xp-accumulated Event bei Encounter-Zuweisung | hoch | Ja | #412 | Quest-System.md#quest-feature-state-machine | quest-service.ts |
| 414 | ‚úÖ | Quest | features | quest:discovered Event | hoch | Ja | #400, #401 | Quest.md#events, Quest-System.md#quest-feature-state-machine, Events-Catalog.md#quest | quest-service.ts |
| 415 | ‚úÖ | Quest | features | quest:activated Event | hoch | Ja | #400, #401, #414 | Quest.md#events, Quest-System.md#quest-feature-state-machine, Events-Catalog.md#quest | quest-service.ts |
| 416 | ‚úÖ | Quest | features | quest:objective-completed Event | hoch | Ja | #403, #415 | Quest.md#events, Quest-System.md#quest-feature-state-machine, Events-Catalog.md#quest | quest-service.ts |
| 417 | ‚úÖ | Quest | features | quest:completed Event mit totalXP und rewards | hoch | Ja | #400, #401, #406, #415 | Quest.md#events, Quest-System.md#40-60-split-mechanik, Events-Catalog.md#quest | quest-service.ts |
| 418 | ‚úÖ | Quest | features | quest:failed Event mit reason (deadline, condition-violated, abandoned) | hoch | Ja | #400, #401 | Quest.md#events, Quest-System.md#quest-state-machine, Events-Catalog.md#quest | quest-service.ts |
| 419 | ‚úÖ | Quest | features | quest:encounter-assigned Event | hoch | Ja | #405, #408, #413, #421 | Quest.md#events, Quest-System.md#quest-assignment-ui-post-combat, Events-Catalog.md#quest, Encounter-System.md#integration | quest-service.ts |
| 420 | ‚úÖ | Quest | features | quest:state-changed Event | hoch | Ja | #400 | Quest-System.md#quest-feature-state-machine, Quest.md#events, Events-Catalog.md#quest | quest-service.ts |
| 421 | ‚úÖ | Quest | features | Subscription: encounter:resolved ‚Üí Zeige UI-Prompt f√ºr Quest-Zuweisung | hoch | Ja | #411, #412 | Quest-System.md#encounter-slot-matching, Quest-System.md#quest-encounter-beziehung, Encounter-System.md#events, Events-Catalog.md#encounter, Events-Catalog.md#quest | quest-service.ts |
| 422 | ‚úÖ | Quest | features | Subscription: time:state-changed ‚Üí Check Quest-Deadlines | hoch | Ja | #400 | Quest-System.md#quest-feature-state-machine, Time-System.md#events, Events-Catalog.md#time, Quest.md#deadline-tracking | quest-service.ts |
| 423 | ‚¨ú | Quest | features | entity:deleted Subscription: Quest-Objektive als failed markieren wenn Target-Entity gel√∂scht | hoch | Ja | #402 | Quest-System.md#quest-feature-state-machine, Events-Catalog.md#entity, EntityRegistry.md#entity-lifecycle, Quest.md#questobjective | quest-service.ts:setupEventHandlers() [neu - entity:deleted Subscription] |
| 424 | ‚úÖ | Quest | features | getQuestDefinition(questId): Option<QuestDefinition> | hoch | Ja | #402, #2804 | Quest.md#queries, EntityRegistry.md#querying | quest-service.ts, types.ts |
| 425 | ‚¨ú | Quest | features | getQuestsByStatus(status): QuestDefinition[] Query-Methode implementieren | hoch | Ja | #400, #401, #2804 | Quest.md#queries, Quest-System.md#prioritaet, EntityRegistry.md#querying | quest-service.ts [neu - getQuestsByStatus() Query-Methode], ben√∂tigt Zugriff auf questDefinitions-Array |
| 426 | ‚õî | Quest | features | getQuestsByGiver(npcId): QuestDefinition[] Query-Methode implementieren | hoch | Ja | #402, #1300, #2804 | Quest.md#queries, Quest.md#npc-als-quest-geber, Quest-System.md#prioritaet, EntityRegistry.md#querying | quest-service.ts [neu - getQuestsByGiver() Query-Methode], filtert questDefinitions nach questGiver-Feld |
| 427 | ‚úÖ | Quest | features | getQuestsWithOpenSlots(): QuestDefinition[] Query-Methode | hoch | Ja | #405, #2804 | Quest.md#queries, Quest-System.md#quest-encounter-beziehung, EntityRegistry.md#querying | quest-service.ts |
| 428 | ‚õî | Quest | features | Quest-Panel im SessionRunner | hoch | Ja | #402, #425, #427 | Quest-System.md#ui-integration, SessionRunner.md#quest-panel, Quest.md#quest-management-im-session-runner | sidebar.ts, viewmodel.ts, types.ts |
| 428b | ‚õî | Quest | application | Quest-Panel: Clickable Entity-Links zu NPC/POI/Item DetailView Tabs | mittel | Nein | #402, #425, #427, #428, #429, #430, #431, #2443, #2444, #2448 | Quest-System.md#ui-integration, SessionRunner.md#quest-panel, DetailView.md#entity-tabs, Quest.md#quest-management-im-session-runner, Quest.md#reminder-system | sidebar.ts [√§ndern - Links zu DetailView f√ºr NPCs, POIs], ben√∂tigt Location-Tab #2448 |
| 429 | ‚úÖ | Quest | features | Quest-Management: Status-Verwaltung (Discover, Activate, Complete, Fail) | hoch | Ja | #400, #401, #414, #415, #417, #418, #428 | Quest.md#quest-management-im-session-runner, Quest-System.md#ui-integration, SessionRunner.md#quest-panel | quest-service.ts (discoverQuest, activateQuest, completeQuest, failQuest) |
| 430 | ‚úÖ | Quest | features | Objective-Progress manuelles Tracking | hoch | Ja | #403, #416, #428 | Quest.md#quest-management-im-session-runner, Quest-System.md#ui-integration, SessionRunner.md#quest-panel | quest-service.ts |
| 431 | ‚úÖ | Quest | application | Encounter-Slots Zuweisung UI | hoch | Ja | #405, #412, #428 | Quest.md#quest-management-im-session-runner, Quest-System.md#quest-assignment-ui-post-combat, SessionRunner.md#quest-panel | slot-assignment-dialog.ts |
| 432 | ‚¨ú | Quest | core | QuestDefinition.lootDistribution Konfiguration (randomEncounterLootPercent, completionRewardPercent, distributedLootPercent) | hoch | Ja | #402, #405 | Quest.md#questdefinition, Quest-System.md#loot-verteilung | quest.ts:questDefinitionSchema [√§ndern - lootDistribution-Feld hinzuf√ºgen], ben√∂tigt #2801 (Loot-Feature) |
| 433 | ‚õî | Quest | features | Budget-Integration: Quest-Rewards reservieren Loot-Budget | hoch | Ja | #406, #432, #710, #2801 | Quest-System.md#budget-integration, Quest-System.md#loot-verteilung, Loot-Feature.md#quest-encounter-reduktion, Loot-Feature.md#budget-system | features/loot/loot-service.ts [neu], quest-service.ts [√§ndern - Integration mit Loot-Budget-System] |
| 434 | üî∂ | Quest | core | QuestPrerequisite Schema (informativ, nicht automatisch) | mittel | Nein | #402, #1400, #1600 | Quest.md#questprerequisite, Quest-System.md#quest-schema-entityregistry, Faction.md#schema, Item.md#schema | quest.ts |
| 435 | ‚õî | Quest | application | Quantum-Encounter/Rewards Platzierung via UI | mittel | Nein | #405, #406, #428 | Quest-System.md#quantum-encounter-rewards-platzierung, Quest.md#questencounterslot, Quest.md#questreward, SessionRunner.md#quest-panel | Quest-Panel [neu - UI-Komponente f√ºr Quantum-Platzierung], quest-store.ts:placeReward() [nutzen], Map-Integration [neu] |
| 436 | ‚¨ú | Quest | features | Konfigurierbare XP-Split Prozents√§tze (Settings) | niedrig | Nein | #408 | Quest-System.md#40-60-xp-split-konfiguration, Quest-System.md#xp-verteilung | quest-xp.ts [√§ndern - IMMEDIATE_XP_PERCENT/QUEST_POOL_XP_PERCENT von Settings lesen], Settings-Integration [neu], SettingsTab-Felder [neu] |
| 437 | ‚õî | Quest | application | Hidden Objectives (Story-Feature) | niedrig | Nein | #403, #428 | Quest.md#questobjective, Quest.md#prioritaet, Quest-System.md#prioritaet, SessionRunner.md#quest-panel | quest.ts:questObjectiveSchema [nutzt bereits hidden-Feld], Quest-UI [√§ndern - hidden=true Objectives ausblenden], quest-service.ts [√§ndern - discoverObjective() Methode f√ºr Reveal-Mechanik] |
| 438 | ‚õî | Quest | features | Quest-Completion: Reputation-Rewards anwenden (Faction.reputation += change) | mittel | Nein | #406, #1400 | Quest.md#questreward, Quest-System.md#quest-feature-state-machine, Faction.md#reputation | quest.ts:reputationRewardSchema [existiert bereits], quest-service.ts:completeQuest() [√§ndern - Reputation-Rewards verarbeiten], Party/Faction-Integration [neu - Reputation-System] |
| 439 | ‚¨ú | Quest | application | Library: Quest-Editor mit Objective-Builder, Encounter-Slot-Editor, Reward-Editor | mittel | Nein | #402 | Quest-System.md#prioritaet, Library.md#entity-crud, Quest.md#questdefinition | application/library/quest-editor.ts [neu - CRUD-UI f√ºr QuestDefinition], EntityRegistry-Integration [nutzen] |
| 441 | ‚õî | Quest | application | Reminder-System: Entity-Detail-Views zeigen verkn√ºpfte Quests (NPC-Detail, POI-Detail, Item-Detail) | mittel | Nein | #402, #424, #2443 | Quest.md#reminder-system, DetailView.md#entity-tabs | application/library/entity-detail-view.ts [√§ndern - getRelatedQuests() Helper], quest-service.ts [neu - Query-Methoden f√ºr Entity-Quest-Verkn√ºpfungen] |
| 442 | ‚õî | Quest | core | NPC.availableQuests?: EntityId<'quest'>[] Feld in Schema hinzuf√ºgen | mittel | Nein | #402, #1300 | Quest.md#npc-als-quest-giver, NPC-System.md#npc-schema | npc.ts:npcSchema [√§ndern - availableQuests-Feld hinzuf√ºgen], NPC-Detail-View [√§ndern - Quest-Links anzeigen] |
| 3173 | ‚õî | Quest | application | NPC-DetailView: Quest-Links aus availableQuests-Feld rendern | mittel | Nein | #442 | Quest.md#npc-als-quest-giver, NPC-System.md#npc-schema | - |
| 500 | ‚úÖ | Character | features | Character-Interface: id, name, level, class, maxHp, currentHp, ac, speed, strength, inventory | hoch | Ja | #1603 | Character-System.md#character-schema, EntityRegistry.md | character.ts |
| 501 | ‚úÖ | Character | features | Zod-Schema f√ºr Character-Validierung | hoch | Ja | #500 | Character-System.md#character-schema | character.ts |
| 502 | ‚úÖ | Character | features | EncounterBalancingInput-Interface: partyLevel, partySize, totalPartyHp | hoch | Ja | #500 | Character-System.md#encounter-balancing, Encounter-Balancing.md#combat-befuellung | character.ts |
| 503 | ‚úÖ | Character | features | getBalancingInput(characters): Berechnet partyLevel (avg), partySize, totalPartyHp | hoch | Ja | #502 | Character-System.md#encounter-balancing | character.ts |
| 504 | ‚úÖ | Character | features | getPartySpeed(characters): Math.min(...characters.map(c => c.speed)) | hoch | Ja | #500 | Character-System.md#travel-system, Travel-System.md#speed-berechnung | character.ts (calculatePartySpeed) |
| 505 | ‚úÖ | Character | features | getEffectiveSpeed(character): character.speed mit Encumbrance-Reduktion | hoch | Ja | #500 | Character-System.md#travel-system | inventory-utils.ts (calculateEffectiveSpeed) |
| 506 | ‚úÖ | Character | core | character:hp-changed Event definieren: characterId, previousHp, currentHp, reason | hoch | Ja | #500 | Character-System.md#hp-tracking, Events-Catalog.md#character, Combat-System.md#hp-tracking | docs/architecture/Events-Catalog.md [√§ndern], src/core/events/domain-events.ts [√§ndern - Event Type + Payload Interface hinzuf√ºgen] |
| 507 | ‚úÖ | Character | features | character:hp-changed Handler: HP-Update im State, Combat-Sync Deliverables: - [x] character-service.ts mit updateCharacterHp() - [x] party-service.ts mit CHARACTER_HP_CHANGED Handler - [x] index.ts Export erg√§nzt DoD: - [x] Handler empf√§ngt character:hp-changed Events - [x] loadedMembers Array wird mit neuem currentHp aktualisiert - [x] Character wird in Storage persistiert - [x] party:state-changed wird nach Update publiziert - [x] Typecheck und Lint erfolgreich | hoch | Ja | #308, #506 | Character-System.md#hp-tracking | Umgesetzt: - character-service.ts [neu - updateCharacterHp(), setupEventHandlers(), dispose()] - party-service.ts [ge√§ndert - createCharacterService() Integration, setupEventHandlers() erweitert, dispose() erweitert] - index.ts [ge√§ndert - Export f√ºr createCharacterService, CharacterService, CharacterServiceDeps] |
| 508 | ‚¨ú | Character | core | character:downed Event definieren: characterId | hoch | Ja | #506, #507 | Character-System.md#hp-tracking, Events-Catalog.md#character, Combat-System.md#hp-tracking | docs/architecture/Events-Catalog.md [√§ndern], src/core/events/domain-events.ts [√§ndern - Event Type + Payload Interface hinzuf√ºgen] |
| 509 | ‚õî | Character | features | character:downed Handler: Bei currentHp <= 0 automatisch publizieren | hoch | Ja | #308, #508 | Character-System.md#hp-tracking, Combat-System.md#hp-tracking | src/features/party/character-service.ts [√§ndern - publishDowned() in HP-Handler], src/features/combat/combat-service.ts [√§ndern - Event abonnieren f√ºr Death Save UI] |
| 510 | ‚úÖ | Character | core | character:level-changed Event definieren: characterId, previousLevel, newLevel | hoch | Ja | #500 | Character-System.md#level-up, Events-Catalog.md#character | docs/architecture/Events-Catalog.md [√§ndern], src/core/events/domain-events.ts [√§ndern - Event Type + Payload Interface hinzuf√ºgen] |
| 511 | ‚úÖ | Character | features | character:level-changed Handler: Level-Update, Encounter-Balancing-Recalc Deliverables: - [x] character-service.ts: trackedLevels Map, syncTrackedLevels(), publishLevelChanged() - [x] character-service.ts: entity:saved Handler erkennt Level-√Ñnderungen bei Party-Members - [x] encounter-service.ts: CHARACTER_LEVEL_CHANGED Handler mit recalculateDailyBudget() - [x] party-service.ts: Ruft syncTrackedLevels() nach loadMembersFromStorage() auf DoD: - [x] trackedLevels Map trackt Level aller Party-Members - [x] entity:saved Handler erkennt Level-√Ñnderungen - [x] publishLevelChanged() publiziert CHARACTER_LEVEL_CHANGED Event - [x] encounter-service reagiert mit recalculateDailyBudget() - [x] Typecheck erfolgreich - [x] Lint ohne neue Fehler | hoch | Ja | #502, #503, #510 | Character-System.md#level-up, Events-Catalog.md#character, Encounter-Balancing.md#xp-budget | Umgesetzt: - character-service.ts [ge√§ndert - trackedLevels Map, syncTrackedLevels(), publishLevelChanged(), entity:saved Handler] - party-service.ts [ge√§ndert - syncTrackedLevels() Aufruf in loadMembersFromStorage()] - encounter-service.ts [ge√§ndert - CHARACTER_LEVEL_CHANGED Handler hinzugef√ºgt] |
| 512 | ‚úÖ | Character | features | party:member-added Event + Handler: Combat Initiative-Liste, Travel Kapazit√§t | hoch | Ja | #500, #603 | Character-System.md#session-state-synchronization | src/core/events/domain-events.ts:PartyMemberAddedPayload, src/features/party/party-service.ts:publishMemberAdded(), src/features/combat/combat-service.ts:setupEventHandlers(), src/features/travel/travel-service.ts:setupEventHandlers(), src/features/encounter/encounter-service.ts:setupEventHandlers() |
| 513 | ‚úÖ | Character | features | party:member-removed Event + Handler: Combat/Travel/Encounter Sync | hoch | Ja | #300, #500, #502, #503 | Character-System.md#session-state-synchronization, Events-Catalog.md#party, Combat-System.md, Travel-System.md | src/core/events/domain-events.ts:PartyMemberRemovedPayload, src/features/party/party-service.ts:publishMemberRemoved(), src/features/combat/combat-service.ts:setupEventHandlers(), src/features/travel/travel-service.ts:setupEventHandlers(), src/features/encounter/encounter-service.ts:setupEventHandlers() |
| 514 | ‚úÖ | Character | features | entity:saved Event Handler f√ºr Character Deliverables: - [x] Handler reagiert auf entity:saved mit type 'character' - [x] Nur Party-Members triggern Reload (Short-Circuit f√ºr Nicht-Members) - [x] Nach Character-√Ñnderung: Travel/Encounter nutzen frische Daten Umgesetzt: - Handler in setupEventHandlers() (party-service.ts:253-274) - Nutzt loadMembersFromStorage() + publishStateChanged() - Travel/Encounter brauchen keine √Ñnderungen (lesen live vom PartyFeature) | hoch | Ja | #500, #502, #503, #504 | Character-System.md#sync-garantie | src/features/party/party-service.ts:253-274 [neu - entity:saved Handler f√ºr Character-Type] |
| 519 | ‚¨ú | Character | features | CharacterSenses-Interface: darkvision, blindsight, tremorsense, trueSight | mittel | Nein | #500 | Character-System.md#sinne-post-mvp, Map-Feature.md#visibility-system | src/core/schemas/character.ts [√§ndern - CharacterSenses Interface + senses?: CharacterSenses Feld] |
| 520 | ‚õî | Character | core | getBestPartySense(characters, senseType): Max-Wert aus Party | mittel | Nein | #519 | Character-System.md#beste-sicht-der-party | src/core/schemas/character.ts [√§ndern - getBestPartySense() Funktion hinzuf√ºgen] |
| 521 | ‚¨ú | Character | core | Ability Scores: STR, DEX, CON, INT, WIS, CHA im Character-Schema | mittel | Nein | #500 | Character-System.md#post-mvp-erweiterungen | src/core/schemas/character.ts [√§ndern - abilityScores: { str, dex, con, int, wis, cha } Feld] |
| 522 | ‚õî | Character | core | Spell Slots Tracking f√ºr Caster | niedrig | Nein | #521 | Character-System.md#post-mvp-erweiterungen | src/core/schemas/character.ts [√§ndern - spellSlots Feld], src/features/combat/combat-service.ts [√§ndern - Slot-Verbrauch] |
| 523 | ‚õî | Character | features | Class Features: Automatische Reminder | niedrig | Nein | #521 | Character-System.md#post-mvp-erweiterungen, Combat-System.md | src/features/combat/combat-service.ts [√§ndern - Feature-Reminder in Initiative], src/core/schemas/character.ts [√§ndern - features Feld] |
| 524 | ‚õî | Character | features | Proficiencies: Skill-Modifikatoren | niedrig | Nein | #521 | Character-System.md#post-mvp-erweiterungen | src/core/schemas/character.ts [√§ndern - proficiencies Feld] |
| 525 | ‚õî | Character | features | D&D Beyond Sync: Import von Character-Daten | niedrig | Nein | #521 | Character-System.md#post-mvp-erweiterungen | src/infrastructure/integrations/dndbeyond-import.ts [neu - API-Client + Mapping] |
| 600 | ‚úÖ | Inventory | core | InventorySlot Interface implementieren (itemId, quantity, equipped) | hoch | Ja | #1603 | Inventory-System.md#schemas, Item.md#verwendung-in-anderen-features, Core.md#schemas | src/core/schemas/item.ts:inventorySlotSchema |
| 601 | ‚úÖ | Inventory | features | EncumbranceLevel Type implementieren (light, encumbered, heavily, over_capacity) | hoch | Ja | #500, #600, #602 | Inventory-System.md#encumbrance, Character-System.md#travel-system, Travel-System.md#speed-berechnung | src/features/inventory/types.ts:EncumbranceLevel |
| 602 | ‚úÖ | Inventory | features | sumInventoryWeight Funktion: Œ£(item.weight √ó quantity) | hoch | Ja | #600, #1600 | Inventory-System.md#berechnung | src/features/inventory/inventory-utils.ts:sumInventoryWeight() |
| 603 | ‚úÖ | Inventory | features | calculateEncumbrance Funktion: Gewicht vs Strength √ó 15 | mittel | Ja | #500, #601, #602 | Inventory-System.md#travel-integration, Travel-System.md#speed-berechnung, Character-System.md#travel-system | src/features/inventory/inventory-utils.ts:calculateEncumbrance() |
| 604 | ‚úÖ | Inventory | features | Encumbrance-Schwellenwerte: 33%/66%/100% Kapazit√§t | mittel | Ja | #601 | Inventory-System.md#schwellenwerte | src/features/inventory/types.ts:ENCUMBRANCE_THRESHOLDS, src/features/inventory/types.ts:ENCUMBRANCE_SPEED_REDUCTIONS |
| 605 | üü¢ | Inventory | features | RationCheck Interface implementieren (required, available, shortage) | mittel | Ja | #500, #606 | Inventory-System.md#rationen, Travel-System.md | src/features/inventory/types.ts:RationCheck [neu] |
| 606 | ‚úÖ | Inventory | features | countRations Funktion: Z√§hle Items mit isRation Flag | mittel | Ja | #600, #1600 | Inventory-System.md#rationen, Item.md#kategorie-details | src/features/inventory/inventory-utils.ts:countRationsInInventory(), src/features/inventory/inventory-service.ts:countRations() |
| 607 | ‚õî | Inventory | features | checkRations Funktion: Party √ó Tage = ben√∂tigte Rationen, nutzt RationCheck | mittel | Ja | #605, #606 | Inventory-System.md#rationen-berechnung | src/features/inventory/inventory-utils.ts:checkRations() [neu] |
| 608 | ‚õî | Inventory | features | consumeRations Funktion: Automatischer Abzug aus Inventaren, publisht inventory:rations-consumed | mittel | Ja | #606, #607, #612, #613 | Inventory-System.md#automatischer-abzug, Travel-System.md | src/features/inventory/inventory-service.ts:consumeRations() [neu] |
| 609 | ‚õî | Inventory | application | Rationen-Mangel Dialog UI: Anzeige bei shortage > 0 nach Reise, Optionen (weiter, abbrechen, forage) | mittel | Ja | #607, #624 | Inventory-System.md#mangel-handling, Inventory-System.md#verbrauch-beim-reisen | src/application/views/RationDialog.svelte [neu] |
| 610 | ‚úÖ | Inventory | infrastructure | Currency-Items vordefinieren: Kupfer, Silber, Gold, Platin | hoch | Ja | #1608 | Inventory-System.md#waehrungs-items, Item.md#currency-category-currency | presets/items/base-items.json |
| 611 | ‚úÖ | Inventory | core | M√ºnzgewicht-Berechnung: 50 M√ºnzen = 1 lb | hoch | Ja | #600, #610 | Inventory-System.md#waehrung | src/core/schemas/item.ts:COIN_WEIGHT |
| 612 | ‚úÖ | Inventory | features | addItemToCharacter Utility-Funktion | mittel | Ja | #600 | Inventory-System.md#gm-quick-actions, Loot-Feature.md | src/features/inventory/inventory-service.ts:addItem() |
| 613 | ‚úÖ | Inventory | features | removeItemFromCharacter Utility-Funktion | mittel | Ja | #600, #610, #611 | Inventory-System.md#gm-quick-actions, Shop.md#verwendung | src/features/inventory/inventory-service.ts:removeItem() |
| 614 | üìã | Inventory | features | addGoldToCharacter Convenience-Funktion Umgesetzt: - addGold() Methode im InventoryFeaturePort Interface - Implementierung in inventory-service.ts - Nutzt this.addItem() mit GOLD_PIECE_ID ('gold-piece') - Gibt Result<Character, InventoryError> zur√ºck (konsistent mit anderen Service-Methoden) - Validiert amount > 0 | mittel | Ja | #610, #612 | Inventory-System.md#gm-quick-actions, Shop.md#verwendung | src/features/inventory/types.ts:addGold() (Interface), src/features/inventory/inventory-service.ts:addGold() (Implementierung nutzt addItem mit gold-piece ID) |
| 615 | ‚õî | Inventory | features | removeGoldFromCharacter Convenience-Funktion: Nutzt removeItem mit gold-piece itemId | mittel | Ja | #610, #612, #613, #2111 | Inventory-System.md#shop-integration-mvp, Shop.md#preis-berechnung | src/features/inventory/inventory-service.ts:removeGold() [neu] |
| 616 | ‚úÖ | Inventory | features | transferItem zwischen Charakteren | mittel | Ja | #611, #612, #613 | Inventory-System.md#gm-quick-actions | src/features/inventory/inventory-service.ts:transferItem() |
| 617 | ‚õî | Inventory | features | quickBuy Funktion: Item zu Charakter hinzuf√ºgen, Gold abziehen, mit Preis-Override/Modifier | mittel | Ja | #600, #612, #614 | Inventory-System.md#shop-integration-mvp, Shop.md | src/features/shop/shop-service.ts:quickBuy() [neu] |
| 618 | ‚õî | Inventory | features | quickSell Funktion: Item von Charakter entfernen, Gold hinzuf√ºgen, mit Preis-Override/Modifier | mittel | Ja | #611, #613, #614, #615, #2112 | Inventory-System.md#shop-integration-mvp, Shop.md#preis-berechnung | src/features/shop/shop-service.ts:quickSell() [neu] |
| 619 | üìã | Inventory | features | calculateEffectivePartySpeed: Ber√ºcksichtigt Encumbrance (schlimmste Stufe z√§hlt) Umgesetzt: - Encumbrance-Berechnung √ºber calculateEncumbrance() pro Character - Speed-Reduktion √ºber calculateEffectiveSpeed(baseSpeed, encumbranceLevel) - Party-Speed = langsamster Member nach Encumbrance (Math.min) - Integration via PartyFeaturePort.getEffectivePartySpeed() | mittel | Ja | #603 | Inventory-System.md#travel-integration, Travel-System.md#speed-berechnung | Hauptkomponenten: ‚Ä¢ party-service.ts:getEffectivePartySpeed() - Party-Speed nach Encumbrance ‚Ä¢ inventory-utils.ts:calculateEncumbrance() - Encumbrance-State pro Character ‚Ä¢ inventory-utils.ts:calculateEffectiveSpeed() - Speed-Reduktion Integration: ‚Ä¢ main.ts:316 - itemLookup Injection ‚Ä¢ travel-service.ts:607 - Nutzt getEffectivePartySpeed() |
| 620 | ‚õî | Inventory | features | over_capacity verhindert Reise (Speed = 0) | mittel | Ja | #619 | Inventory-System.md#encumbrance, Travel-System.md#transport-modi | src/features/travel/travel-service.ts:validateTravelStart() [√§ndern] |
| 621 | ‚úÖ | Inventory | core | inventory:changed Event Handler implementieren | hoch | Ja | #600 | Inventory-System.md#events, Events-Catalog.md | src/core/events/domain-events.ts:INVENTORY_CHANGED, src/core/events/domain-events.ts:InventoryChangedPayload |
| 622 | ‚õî | Inventory | core | inventory:rations-consumed Event: Event-Definition in Events-Catalog, Payload (amount, remaining) | mittel | Ja | #608, #621 | Inventory-System.md#events, Events-Catalog.md | src/core/events/domain-events.ts:INVENTORY_RATIONS_CONSUMED [neu], src/core/events/domain-events.ts:InventoryRationsConsumedPayload [neu], src/features/inventory/inventory-service.ts [√§ndern] |
| 623 | ‚úÖ | Inventory | core | inventory:encumbrance-changed Event Handler implementieren | mittel | Ja | #601, #603, #621 | Inventory-System.md#events, Events-Catalog.md, Travel-System.md | src/core/events/domain-events.ts:INVENTORY_ENCUMBRANCE_CHANGED, src/core/events/domain-events.ts:InventoryEncumbranceChangedPayload |
| 624 | ‚úÖ | Inventory | application | Inventory-Ansicht im Party Manager: Gewicht, Encumbrance, Item-Liste, Equipped-Anzeige Umgesetzt: - InventoryDialog als Obsidian Modal implementiert - Header zeigt Character-Name, Gewicht/Kapazit√§t, Encumbrance-Badge mit Farbe - Item-Liste mit Name, Gewicht, Quantity, Equipped/Ration-Badges - Equipped Items zuerst sortiert mit ‚òÖ Prefix - Integration mit Party Manager Inventory-Button [+ Item hinzuf√ºgen] Button als Platzhalter f√ºr sp√§tere Task | mittel | Ja | #600, #601, #602 | Inventory-System.md#gm-interface, Character-System.md#party-manager | dialogs/inventory-dialog.ts:InventoryDialog - Modal mit Header (Gewicht, Encumbrance), Item-Liste, Footer dialogs/inventory-dialog.ts:showInventoryDialog() - Helper zum √ñffnen dialogs/index.ts - Export hinzugef√ºgt view.ts:onViewInventory - Callback mit showInventoryDialog verbunden |
| 625 | ‚¨ú | Inventory | application | Equipped-Status Toggle: Checkbox/Toggle f√ºr Waffen/R√ºstung in InventoryPanel | niedrig | Nein | #624 | Inventory-System.md#prioritaet | src/application/views/InventoryPanel.svelte [√§ndern] |
| 700 | ‚úÖ | Loot | features | LootBudgetState Interface (accumulated, distributed, balance, debt) | hoch | Ja | - | Loot-Feature.md#lootbudgetstate | src/features/loot/types.ts:LootBudgetState [neu] |
| 701 | ‚¨ú | Loot | features | GOLD_PER_XP_BY_LEVEL Konstante (DMG-basierte Tabelle Level 1-20) | hoch | Ja | - | Loot-Feature.md#budget-berechnung | src/features/loot/budget-utils.ts:GOLD_PER_XP_BY_LEVEL [neu] |
| 702 | ‚õî | Loot | features | getGoldPerXP(partyLevel) Funktion | hoch | Ja | #700, #701 | Loot-Feature.md#budget-berechnung | src/features/loot/budget-utils.ts:getGoldPerXP [neu] |
| 703 | ‚õî | Loot | features | updateBudget() bei XP-Gewinn aufrufen, Budget.accumulated aktualisieren | hoch | Ja | #700, #702 | Loot-Feature.md#budget-berechnung, Quest-System.md#xp-verteilung | src/features/loot/budget-service.ts:updateBudget [neu] |
| 705 | ‚¨ú | Loot | features | processDefaultLoot(): DefaultLoot w√ºrfeln mit Chance-System, Budget-Belastung, Soft-Cap bei Schulden | hoch | Ja | #700, #701, #1205, #1206 | Loot-Feature.md#schulden-system-und-soft-cap, Creature.md#defaultloot | src/features/loot/default-loot.ts:processDefaultLoot [neu] |
| 706 | ‚¨ú | Loot | features | Schulden-Tracking: Budget kann negativ werden, debt akkumulieren | hoch | Ja | #700 | Loot-Feature.md#schulden-system-und-soft-cap | src/features/loot/budget-service.ts:updateBudget [√§ndern] |
| 707 | ‚õî | Loot | features | Soft-Cap: Teures Item weglassen bei hohen Schulden (balance < -1000) | hoch | Ja | #705, #706 | Loot-Feature.md#soft-cap-verhalten | src/features/loot/default-loot.ts:processDefaultLoot [√§ndern] |
| 708 | ‚õî | Loot | features | Schulden-Abbau: N√§chste Encounters geben weniger Loot | hoch | Ja | #706 | Loot-Feature.md#schulden-abbau | src/features/loot/budget-service.ts:calculateAvailableBudget [neu] |
| 709 | ‚õî | Loot | features | GM-Warnung wenn Balance stark negativ (< -500g) | hoch | Ja | #700, #706, #707 | Loot-Feature.md#schulden-abbau | src/features/loot/budget-service.ts:checkBudgetWarning [neu] |
| 710 | ‚õî | Loot | features | calculateEncounterLoot(encounter, quest?) mit Quest-Reduktion | hoch | Ja | #500, #700, #702, #703 | Loot-Feature.md#quest-encounter-reduktion, Quest-System.md#budget-integration | src/features/loot/loot-service.ts:calculateEncounterLoot [neu] |
| 711 | ‚õî | Loot | features | Encounter-Loot 10-50% Verteilung (Durchschnitt 20%) | hoch | Ja | #710 | Loot-Feature.md#budget-verteilung | src/features/loot/loot-service.ts:calculateEncounterLoot [√§ndern] |
| 712 | ‚úÖ | Loot | features | LOOT_MULTIPLIER Konstante (0.5 Gold/XP) | hoch | Ja | - | Loot-Feature.md#loot-wert-berechnung | loot/types.ts:LOOT_MULTIPLIER |
| 713 | ‚úÖ | Loot | features | calculateLootValue(encounter) Funktion | hoch | Ja | #712 | Loot-Feature.md#loot-wert-berechnung | loot/loot-utils.ts:calculateLootValue |
| 714 | ‚úÖ | Loot | features | GeneratedLoot Interface (items, totalValue) | hoch | Ja | #1600 | Loot-Feature.md#generierung, Item.md#schema | loot/types.ts:GeneratedLoot |
| 715 | ‚úÖ | Loot | features | SelectedItem Interface (item, quantity) | hoch | Ja | - | Loot-Feature.md#generierung | loot/types.ts:SelectedItem |
| 716 | ‚úÖ | Loot | features | ScoredItem Interface (item, score) | hoch | Ja | #1600 | Loot-Feature.md#generierung, Item.md#schema | loot/types.ts:ScoredItem |
| 717 | ‚úÖ | Loot | features | calculateTagScore(itemTags, lootTags) Funktion | hoch | Ja | - | Loot-Feature.md#item-auswahl-gewichtete-wahrscheinlichkeit | loot/loot-utils.ts:calculateTagScore |
| 718 | ‚úÖ | Loot | features | selectWeightedItem(scoredItems, maxValue) Funktion | hoch | Ja | #716, #717 | Loot-Feature.md#item-auswahl-gewichtete-wahrscheinlichkeit | loot/loot-utils.ts:selectWeightedItem |
| 719 | ‚úÖ | Loot | features | generateLoot(encounter, lootTags, availableItems) Funktion | hoch | Ja | #712, #713, #714, #715, #716, #717, #718, #1600 | Loot-Feature.md#generierung, Item.md#queries | loot/loot-service.ts:generateLoot |
| 720 | ‚úÖ | Loot | features | Gold als Auff√ºller (Currency-Item f√ºr Rest-Budget) | hoch | Ja | #719 | Loot-Feature.md#generierung | loot/loot-utils.ts:createGoldFiller |
| 721 | ‚õî | Loot | infrastructure | Alle Preset-Items mit Tags validieren und vervollst√§ndigen (basis-items.json pr√ºfen auf fehlende Tags) | hoch | Ja | #1600, #3112, #3113 | Loot-Feature.md#loot-tags, Item.md#tags | Preset-Items mit Tags (presets/items/*.json) [√§ndern] |
| 722 | ‚¨ú | Loot | infrastructure | Kreatur-spezifische Tags in Preset-Creatures definieren (tribal, undead, beast, humanoid, arcane) | hoch | Ja | - | Loot-Feature.md#kreatur-spezifische-tags | Preset-Creatures mit lootTags (presets/creatures/*.json) [√§ndern] |
| 723 | ‚¨ú | Loot | application | Loot-Vorschau Panel: Zeigt GeneratedLoot nach Encounter mit Checkboxen + Gold-Anzeige | hoch | Ja | #719 | Loot-Feature.md#gm-interface | src/application/session-runner/panels/LootPreview.svelte [neu] |
| 724 | ‚õî | Loot | application | GM kann Items entfernen (Checkbox) | hoch | Ja | #723 | Loot-Feature.md#anpassen | src/application/session-runner/panels/LootPreview.svelte [√§ndern] |
| 725 | ‚õî | Loot | application | GM kann Gold-Menge √§ndern | hoch | Ja | #723 | Loot-Feature.md#anpassen | src/application/session-runner/panels/LootPreview.svelte [√§ndern] |
| 726 | ‚õî | Loot | application | GM kann zus√§tzliche Items manuell hinzuf√ºgen | hoch | Ja | #723, #1600 | Loot-Feature.md#anpassen, Item.md#schema | src/application/session-runner/panels/LootPreview.svelte [√§ndern] |
| 727 | ‚úÖ | Loot | features | loot:generated Event publizieren | hoch | Ja | #719 | Loot-Feature.md#events, Events-Catalog.md | events/domain-events.ts:LootGeneratedPayload |
| 728 | ‚úÖ | Loot | features | loot:adjusted Event publizieren | hoch | Ja | #724, #725, #726 | Loot-Feature.md#events, Events-Catalog.md | events/domain-events.ts:LootAdjustedPayload |
| 729 | ‚úÖ | Loot | features | loot:distributed Event publizieren | hoch | Ja | - | Loot-Feature.md#events, Events-Catalog.md | events/domain-events.ts:LootDistributedPayload |
| 730 | ‚¨ú | Loot | features | Hoard Interface (id, source, items, budgetValue, status) | hoch | Nein | #714 | Loot-Feature.md#hoard-schema | src/features/loot/types.ts:Hoard [neu] |
| 731 | ‚¨ú | Loot | features | HoardSource Type (encounter, location, quest) | hoch | Nein | - | Loot-Feature.md#hoard-schema | src/features/loot/types.ts:HoardSource [neu] |
| 732 | ‚õî | Loot | features | generateHoard(): Items aus Pool ausw√§hlen bis Budget erreicht, Hoard-Objekt erstellen | hoch | Nein | #719, #730, #731, #3107 | Loot-Feature.md#hoard-generierung | src/features/loot/hoard-service.ts:generateHoard [neu] |
| 733 | ‚õî | Loot | features | Hoard-Wahrscheinlichkeit in Encounter-Generierung: Boss 70%, Lager 40%, Patrouille 10%, Passing/Trace 0% | hoch | Nein | #732 | Loot-Feature.md#hoard-bei-encounter, Encounter-System.md#typ-spezifisches-verhalten | src/features/encounter/encounter-service.ts:generateEncounter [√§ndern] |
| 734 | ‚õî | Loot | features | loot:hoard-discovered Event | hoch | Nein | #732 | Loot-Feature.md#events, Events-Catalog.md | src/core/events/domain-events.ts:LOOT_HOARD_DISCOVERED [neu], LootHoardDiscoveredPayload [neu] |
| 735 | ‚õî | Loot | features | loot:hoard-looted Event | hoch | Nein | #730, #734 | Loot-Feature.md#events, Events-Catalog.md | src/core/events/domain-events.ts:LOOT_HOARD_LOOTED [neu], LootHoardLootedPayload [neu] |
| 736 | ‚¨ú | Loot | features | loot:budget-updated Event | hoch | Nein | #700 | Loot-Feature.md#events, Events-Catalog.md | src/core/events/domain-events.ts:LOOT_BUDGET_UPDATED [neu], LootBudgetUpdatedPayload [neu] |
| 737 | ‚¨ú | Loot | features | TreasureMarker Interface (id, position, mapId, fillMode, constraints, hoardId) | mittel | Nein | - | Loot-Feature.md#treasuremarker-schema | src/features/loot/types.ts:TreasureMarker [neu] |
| 738 | ‚õî | Loot | application | GM kann Treasure-Marker in Cartographer platzieren (manual/auto-fill Mode) | mittel | Nein | #737, #800, #810 | Loot-Feature.md#workflow, Map-Feature.md | src/application/cartographer/tools/TreasureMarkerTool.svelte [neu] |
| 739 | ‚õî | Loot | features | triggerMarker(): Bei Party-Entdeckung auto-fill Hoard generieren oder Manual-Fill Dialog zeigen | mittel | Nein | #737, #732 | Loot-Feature.md#auto-fill-logik | src/features/loot/marker-service.ts:triggerMarker [neu] |
| 740 | ‚õî | Loot | features | calculateAutoFillBudget(): Budget f√ºr Auto-Fill berechnen basierend auf Constraints (min/max/tags) | mittel | Nein | #737 | Loot-Feature.md#auto-fill-logik | src/features/loot/marker-service.ts:calculateAutoFillBudget [neu] |
| 741 | ‚õî | Loot | features | loot:marker-created Event | mittel | Nein | #737, #738 | Loot-Feature.md#events, Events-Catalog.md | src/core/events/domain-events.ts:LOOT_MARKER_CREATED [neu], LootMarkerCreatedPayload [neu] |
| 742 | ‚õî | Loot | features | loot:marker-triggered Event | mittel | Nein | #739 | Loot-Feature.md#events, Events-Catalog.md | src/core/events/domain-events.ts:LOOT_MARKER_TRIGGERED [neu], LootMarkerTriggeredPayload [neu] |
| 743 | ‚õî | Loot | features | MagicItemTracking Interface (characterId, level, receivedItems pro Rarity) | mittel | Nein | #1600, #1602 | Loot-Feature.md#dmg-basiertes-tracking, Item.md#schema, Character-System.md#character-schema | src/core/schemas/character.ts:MagicItemTracking [neu], Character.magicItemsReceived [neu] |
| 744 | ‚¨ú | Loot | features | EXPECTED_ITEMS_BY_LEVEL Konstante (DMG-Empfehlung) | mittel | Nein | - | Loot-Feature.md#dmg-basiertes-tracking | src/features/loot/magic-item-utils.ts:EXPECTED_ITEMS_BY_LEVEL [neu] |
| 745 | ‚õî | Loot | features | shouldOfferMagicItem(): Pr√ºft ob Charakter unter DMG-Empfehlung liegt (receivedItems vs expectedItems) | mittel | Nein | #743, #744 | Loot-Feature.md#dmg-basiertes-tracking | src/features/loot/magic-item-utils.ts:shouldOfferMagicItem [neu] |
| 746 | ‚õî | Loot | features | Magic Item Tracking: Party-Anteil bei Erhalt f√ºr alle Charaktere | mittel | Nein | #743 | Loot-Feature.md#magic-item-tracking-pro-charakter | src/features/loot/magic-item-utils.ts:trackMagicItemReceived [neu] |
| 747 | ‚õî | Loot | features | trackMagicItemReceived(): Party-Anteil (1/partySize) f√ºr ALLE Charaktere gutschreiben bei Erhalt | mittel | Nein | #743, #746, #1602 | Loot-Feature.md#magic-item-tracking-pro-charakter, Item.md#schema | src/features/loot/magic-item-utils.ts:trackMagicItemReceived [neu] |
| 748 | ‚õî | Loot | application | GM Magic Item Override Dialog | mittel | Nein | #745 | Loot-Feature.md#gm-override | src/application/session-runner/modals/MagicItemOfferModal.svelte [neu] |
| 749 | ‚õî | Loot | features | downgradeItem(): Bei Soft-Cap teures Item durch g√ºnstigere Alternative ersetzen (z.B. Platte ‚Üí Kette) | mittel | Nein | #707, #1600 | Loot-Feature.md#soft-cap-verhalten, Item.md#kategorie-details | src/features/loot/default-loot.ts:downgradeItem [neu], processDefaultLoot [√§ndern] |
| 750 | ‚õî | Loot | application | Einheitliches Loot-Modal mit Currency/Items/Magic Items Sektionen + Charakter-Auswahl | mittel | Nein | #723, #600 | Loot-Feature.md#verteilen-einheitliches-loot-modal, Character-System.md | src/application/session-runner/modals/LootDistributionModal.svelte [neu] |
| 751 | ‚õî | Loot | application | Currency-Sektion mit Inline-Eingabe, [-][+] Buttons, Prozent-Anzeige | mittel | Nein | #750 | Loot-Feature.md#currency-eingabemethoden-auto-sync | src/application/session-runner/modals/LootDistributionModal.svelte [√§ndern] |
| 752 | ‚õî | Loot | application | Inkrement-Konfiguration f√ºr [-][+] Buttons | mittel | Nein | #750, #751 | Loot-Feature.md#currency-eingabemethoden-auto-sync | src/application/session-runner/modals/LootDistributionModal.svelte [√§ndern] |
| 753 | ‚õî | Loot | application | [Gleichm√§√üig] Button f√ºr Currency-Verteilung | mittel | Nein | #751 | Loot-Feature.md#currency-eingabemethoden-auto-sync | src/application/session-runner/modals/LootDistributionModal.svelte [√§ndern] |
| 754 | ‚õî | Loot | application | Items-Sektion mit Dropdown-Zuweisung an Charaktere | mittel | Nein | #750 | Loot-Feature.md#verteilen-einheitliches-loot-modal | src/application/session-runner/modals/LootDistributionModal.svelte [√§ndern] |
| 755 | ‚õî | Loot | application | Magic Items Sektion mit Rarity-Info und DMG-Tracking | mittel | Nein | #750, #743 | Loot-Feature.md#verteilen-einheitliches-loot-modal | src/application/session-runner/modals/LootDistributionModal.svelte [√§ndern] |
| 756 | ‚õî | Loot | application | [Reroll] Button pro Sektion | mittel | Nein | #719, #732, #750 | Loot-Feature.md#weitere-interaktionen | src/application/session-runner/modals/LootDistributionModal.svelte [√§ndern] |
| 757 | ‚õî | Loot | features | distributeCurrencyEvenly(): Currency gleichm√§√üig verteilen, Rest an ersten Charakter | mittel | Nein | #750, #753 | Loot-Feature.md#utilities | src/features/loot/distribution-utils.ts:distributeCurrencyEvenly [neu] |
| 758 | ‚õî | Loot | features | distributeToCharacter(): Items Array an Charakter-Inventar zuweisen mit Tracking | mittel | Nein | #754, #600 | Loot-Feature.md#utilities | src/features/loot/distribution-utils.ts:distributeToCharacter [neu] |
| 759 | ‚õî | Loot | features | quickAssign(): Einzelnes Item direkt an Charakter zuweisen (Dropdown-Auswahl) | mittel | Nein | #754 | Loot-Feature.md#utilities, Inventory-System.md | src/features/loot/distribution-utils.ts:quickAssign [neu] |
| 760 | ‚õî | Loot | features | Faction defaultLoot (Fraktionen haben eigene Loot-Tags) | niedrig | Nein | #705 | Loot-Feature.md#prioritaet, Faction.md | src/core/schemas/faction.ts:Faction.defaultLoot [neu], src/features/loot/default-loot.ts:processDefaultLoot [√§ndern] |
| 761 | ‚õî | Loot | features | distributeLoot(): Automatische Loot-Verteilung an Party-Inventar ohne GM-Interaktion | niedrig | Nein | #600, #729, #759 | Loot-Feature.md#gm-interface, Inventory-System.md | src/features/loot/loot-service.ts:distributeLoot [neu] |
| 800 | ‚úÖ | Map | core | BaseMap Schema (id, name, type, defaultSpawnPoint, metadaten) | hoch | Ja | - | Map-Feature.md#basis-map, Map.md#basemap | src/core/schemas/map.ts:baseMapSchema |
| 801 | ‚úÖ | Map | features | OverworldMap Schema (dimensions, tiles, overlays) | hoch | Ja | #800 | Map.md#schema, Map-Feature.md#overworldmap, Travel-System.md#scope-hex-overland | src/core/schemas/map.ts:overworldMapSchema |
| 802 | ‚úÖ | Map | core | OverworldTile Schema (coordinate, terrain, elevation, pois, encounterZone, factionPresence) | hoch | Ja | #801, #1700 | Map-Feature.md#overworldmap, Travel-System.md#speed-berechnung | src/core/schemas/map.ts:overworldTileSchema |
| 803 | ‚úÖ | Map | core | EncounterZone Schema (encounterChance, creaturePool, factionId) | hoch | Ja | #802 | Map.md#schema, Map-Feature.md#overworldmap, Encounter-System.md#encounterzone | src/core/schemas/map.ts:encounterZoneSchema |
| 804 | ‚õî | Map | infrastructure | Overworld Rendering (Hex-Grid, Terrain-Farben, Elevation-Overlays) | hoch | Ja | #801, #803 | Map-Feature.md#overworld-rendering, Application.md#rendering-sharedrendering | src/application/session-runner/panels/map-canvas.ts:renderTile() (Location-Icons fehlen), src/application/shared/rendering/ [neu] |
| 805 | ‚úÖ | Map | core | Location-Integration: POIs auf Tiles referenzieren | hoch | Ja | #802 | Map-Feature.md#overworldmap | src/core/schemas/map.ts:overworldTileSchema.pois |
| 806 | ‚úÖ | Map | core | DungeonMap Schema (dimensions mit levels, tiles, rooms, partyPosition) | hoch | Ja | - | Map-Feature.md#dungeonmap, Dungeon-System.md#dungeonmap | src/core/schemas/map.ts:dungeonMapSchema [neu] |
| 807 | ‚úÖ | Map | core | GridCoordinate Schema (x, y, z f√ºr Multi-Level) | hoch | Ja | - | Map.md#schema, Map-Feature.md#dungeonmap, Dungeon-System.md#grid-coordinate | src/core/schemas/map.ts:gridCoordSchema [neu] |
| 808 | ‚õî | Map | core | DungeonTile Schema (type, roomId, traps, creatures, treasure, lighting, explored) | hoch | Ja | #806, #807 | Map-Feature.md#dungeontile, Dungeon-System.md#dungeontile | src/core/schemas/map.ts:dungeonTileSchema [neu] |
| 809 | ‚úÖ | Map | core | DungeonRoom Schema (id, name, tiles, description, gmNotes) | hoch | Ja | - | Map-Feature.md#dungeonmap | src/core/schemas/map.ts:dungeonRoomSchema [neu] |
| 810 | ‚õî | Map | core | Trap Schema (id, dc, damage, triggered, visible) | hoch | Ja | #808 | Map-Feature.md#dungeontile, Dungeon-System.md#dungeontilecontent | src/core/schemas/map.ts:trapSchema [neu] |
| 811 | ‚õî | Map | core | Token Schema (id, creatureId, position, currentHp) | hoch | Ja | #808, #807 | Map-Feature.md#dungeonmap | src/core/schemas/map.ts:tokenSchema [neu] |
| 812 | ‚õî | Map | infrastructure | Dungeon Rendering (Grid, Walls, Doors, Fog of War, Lighting-Overlays) | hoch | Ja | #806, #808, #809 | Map-Feature.md#dungeon-rendering, Dungeon-System.md#rendering | src/application/shared/rendering/dungeon-renderer.ts [neu] |
| 813 | ‚úÖ | Map | features | map:load-requested Event Handler | hoch | Ja | #800 | Map.md#events, Map-Feature.md#events, Events-Catalog.md | src/features/map/map-service.ts:setupEventHandlers(), src/core/events/domain-events.ts:MAP_LOAD_REQUESTED |
| 814 | ‚úÖ | Map | features | map:loaded Event publizieren | hoch | Ja | #800, #813 | Map-Feature.md#events, Map.md#events, Events-Catalog.md | src/features/map/map-service.ts:publishLoaded(), src/core/events/domain-events.ts:MAP_LOADED |
| 815 | ‚úÖ | Map | features | map:unloaded Event publizieren | hoch | Ja | #813 | Map-Feature.md#events | src/features/map/map-service.ts:publishUnloaded(), src/core/events/domain-events.ts:MAP_UNLOADED |
| 816 | ‚¨ú | Map | features | map:created Event publizieren nach Map-Erstellung | hoch | Ja | #800 | Map.md#events, Events-Catalog.md#map-events | src/features/map/map-service.ts:publishCreated() [neu], src/core/events/domain-events.ts:MAP_CREATED |
| 817 | ‚¨ú | Map | features | map:updated Event publizieren nach Map-√Ñnderung (Partial-Changes) | hoch | Ja | #800 | Map.md#events, Events-Catalog.md#map-events | src/features/map/map-service.ts:publishUpdated() [neu], src/core/events/domain-events.ts:MAP_UPDATED |
| 818 | ‚¨ú | Map | features | map:deleted Event publizieren nach Map-L√∂schung | hoch | Ja | #800 | Map.md#events, Events-Catalog.md#map-events | src/features/map/map-service.ts:publishDeleted() [neu], src/core/events/domain-events.ts:MAP_DELETED |
| 819 | ‚õî | Map | features | map:tile-updated Event publizieren nach Tile-√Ñnderung (Terrain/Elevation/Content) | hoch | Ja | #802, #808 | Map.md#events, Map-Feature.md#events, Events-Catalog.md#map-events | src/features/map/map-service.ts:publishTileUpdated() [neu], src/core/events/domain-events.ts:MAP_TILE_UPDATED |
| 820 | ‚úÖ | Map | features | map:navigate-requested Event Handler (mit Map-Wechsel-Logik) | hoch | Ja | - | Map-Feature.md#events, Map-Navigation.md#navigation-events | src/features/map/map-service.ts:setupEventHandlers() [√§ndern], src/core/events/domain-events.ts:MAP_NAVIGATE_REQUESTED |
| 821 | ‚¨ú | Map | features | map:navigated Event nach Navigation publizieren (Domain Event) | hoch | Ja | #800, #813, #820 | Map.md#events, Map-Feature.md#events, Events-Catalog.md#map-events | src/features/map/map-service.ts:publishNavigated() [neu], src/core/events/domain-events.ts:MAP_NAVIGATED |
| 822 | ‚úÖ | Map | infrastructure | getMap(mapId): Result<BaseMap, AppError> | hoch | Ja | #800 | Map.md#queries, Map-Feature.md#events, EntityRegistry.md#port-interface | src/infrastructure/vault/map-adapter.ts:load() |
| 823 | ‚úÖ | Map | infrastructure | getMapsByType(type): BaseMap[] | hoch | Ja | #800 | Map.md#queries, Map-Feature.md#map-schemas | src/infrastructure/vault/map-adapter.ts:listIds() |
| 824 | üìã | Map | features | getCurrentMap(): Option<BaseMap> Query-Funktion im MapService implementieren | hoch | Ja | #800, #813 | Map.md#queries, Map-Feature.md#state-management | src/features/map/map-service.ts:getCurrentMap() |
| 825 | ‚úÖ | Map | features | Single Map Active: Nur aktive Map im Speicher | hoch | Ja | #813, #824 | Map-Feature.md#memory-management | src/features/map/map-store.ts:setCurrentMap() |
| 826 | ‚úÖ | Map | features | Zeit auf Sub-Maps: TimeService global unabh√§ngig von aktueller Map-ID | hoch | Ja | #800, #802, #821, #900 | Map.md#verwendung-in-anderen-features, Time-System.md#global-time, Map-Feature.md | time-feature (globales Time-System) |
| 827 | ‚õî | Map | features | TownMap Weather-Vererbung: Wetter vom Parent-Overworld-Tile √ºbernehmen | hoch | Ja | #830, #820, #110, #801 | Map-Feature.md#wetter-auf-sub-maps, Weather-System.md#multi-map-weather | src/features/weather/weather-service.ts:getWeatherForMap() [neu] |
| 828 | ‚¨ú | Map | features | DungeonMap Weather-Logik: Kein Wetter (Indoor), au√üer offene Bereiche | hoch | Ja | #806, #110, #112 | Map-Feature.md#wetter-auf-sub-maps | src/features/weather/weather-service.ts:getWeatherForMap() [√§ndern] |
| 829 | ‚õî | Map | features | State-Persistenz bei Map-Wechsel (Party-Position pro Map, globale Zeit, Wetter-State) | hoch | Ja | #821, #826, #900, #825 | Map-Feature.md#state-persistenz-bei-map-wechsel, Map-Navigation.md | src/features/map/map-service.ts:navigateToMap() [neu] |
| 830 | ‚¨ú | Map | core | TownMap Schema (streets, intersections, buildings, npcs) in Core erg√§nzen | mittel | Nein | #800 | Map.md#schema, Map-Feature.md#townmap | src/core/schemas/map.ts:townMapSchema [neu] |
| 831 | ‚õî | Map | core | Street Schema (id, name, path, width) | mittel | Nein | #830 | Map-Feature.md#townmap | src/core/schemas/map.ts:streetSchema [neu] |
| 832 | ‚õî | Map | features | Intersection Schema (id, position, connectedStreets) | mittel | Nein | #830 | Map-Feature.md#townmap | src/core/schemas/map.ts:intersectionSchema [neu] |
| 833 | ‚õî | Map | core | Building Schema (id, name, position, type, linkedMapId, npcs) in Core erg√§nzen | mittel | Nein | #830 | Map.md#schema, Map-Feature.md#townmap | src/core/schemas/map.ts:buildingSchema [neu] |
| 834 | ‚õî | Map | core | BuildingType Type (tavern, shop, temple, etc.) | mittel | Nein | #833 | Map-Feature.md#townmap | src/core/schemas/map.ts:buildingTypeSchema [neu] |
| 835 | ‚õî | Map | infrastructure | Town Rendering: Strassen + Buildings | mittel | Nein | #830 | Map-Feature.md#town-rendering | src/application/shared/rendering/town-renderer.ts [neu] |
| 836 | ‚õî | Map | features | Town Navigation Feature (Strassen-basiertes Routing, Wegberechnung) | mittel | Nein | #830, #837, #831, #832 | Map-Feature.md#town-strassen-navigation | src/features/town/town-service.ts [neu] |
| 837 | ‚õî | Map | features | town:navigate-requested Event Handler f√ºr Strassen-Navigation implementieren | mittel | Nein | #820, #830 | Map.md#events, Map-Feature.md#town-strassen-navigation | src/features/town/town-service.ts:setupEventHandlers() [neu], src/core/events/domain-events.ts:TOWN_NAVIGATE_REQUESTED |
| 838 | ‚õî | Map | features | town:route-calculated Event | mittel | Nein | #837 | Map-Feature.md#town-strassen-navigation, Events-Catalog.md | src/features/town/town-service.ts:publishRouteCalculated() [neu], src/core/events/domain-events.ts:TOWN_ROUTE_CALCULATED |
| 839 | ‚õî | Map | features | Multi-Level Dungeons (Z-Koordinate Navigation, Treppen, Level-Wechsel) | niedrig | Nein | #807, #812, #806 | Map-Feature.md#dungeonmap, Dungeon-System.md#multi-level-navigation | src/features/dungeon/dungeon-service.ts [√§ndern] |
| 841 | ‚õî | Map | infrastructure | Path Rendering: Linien zwischen Hex-Zentren zeichnen (PathDisplayStyle mit Farbe, Breite, Muster) | mittel | Nein | #804, #1800, #1805, #1820 | Map-Feature.md#path-rendering, Path.md#pathdisplaystyle | src/application/shared/rendering/path-renderer.ts [neu] |
| 842 | ‚õî | Map | features | Map-Travel-Integration: Path-Speed-Modifiers in Travel-Feature integrieren | mittel | Nein | #841, #17 | Map-Feature.md#prioritaet | src/features/travel/speed-calculator.ts [√§ndern] |
| 843 | ‚õî | Map | features | Visibility Service (Sichtweiten-Berechnung mit Elevation, Caching) | mittel | Nein | #802, #804 | Map-Feature.md#visibility-system-post-mvp | src/features/map/visibility-service.ts [neu] |
| 844 | ‚õî | Map | features | Basis-Sichtweite: 1 Hex bei flachem Terrain (VisibilityService) | mittel | Nein | #801, #802, #843 | Map.md, Map-Feature.md#sichtweiten-berechnung, Travel-System.md | src/features/map/visibility-service.ts:calculateVisibility() [neu] |
| 845 | ‚õî | Map | features | H√∂henbonus: Wurzel-Formel f√ºr erh√∂hte Sichtweite | mittel | Nein | #843, #844 | Map-Feature.md#sichtweiten-berechnung | src/features/map/visibility-service.ts:calculateElevationBonus() [neu] |
| 846 | ‚õî | Map | features | Sicht-Blockierung: Line-of-Sight durch Zwischentiles | mittel | Nein | #844, #845 | Map-Feature.md#sicht-blockierung-line-of-sight | src/features/map/visibility-service.ts:checkLineOfSight() [neu] |
| 847 | ‚õî | Map | features | Weather-Visibility-Modifier: Wetter reduziert Sicht | mittel | Nein | #843, #110 | Map-Feature.md#umwelt-modifier, Weather-System.md#sichtweiten-einfluss-post-mvp | src/features/map/visibility-service.ts:getWeatherModifier() [neu] |
| 848 | ‚õî | Map | features | Time-Visibility-Modifier: Tageszeit reduziert Sichtweite (VisibilityService) | mittel | Nein | #843, #900 | Map.md, Map-Feature.md#umwelt-modifier, Time-System.md#sichtweiten-einfluss | src/features/map/visibility-service.ts:getTimeModifier() [neu] |
| 849 | ‚õî | Map | features | Party-F√§higkeiten Sicht: Darkvision, Blindsight, etc. | mittel | Nein | #519, #600, #843, #848 | Map-Feature.md#party-faehigkeiten-sinne, Character-System.md#sinne-post-mvp | src/features/map/visibility-service.ts:getPartySenses() [neu] |
| 850 | ‚õî | Map | features | Creature-Sichtweite f√ºr Encounter-Trigger-Check implementieren | mittel | Nein | #200, #843, #1202 | Map.md, Map-Feature.md#creature-sichtweite, Creature.md#sinne, Encounter-System.md | src/features/encounter/encounter-service.ts:checkCreatureVisibility() [neu] |
| 851 | ‚õî | Map | features | POI-Fernsicht: Height-Feld f√ºr POIs | mittel | Nein | #843, #1514 | Map-Feature.md#poi-fernsicht, POI.md#height-feld-post-mvp | src/features/map/visibility-service.ts:checkPOIVisibility() [neu] |
| 852 | ‚õî | Map | features | POI glowsAtNight: Nachtleuchtende POIs in Sichtweite ber√ºcksichtigen | mittel | Nein | #843, #851, #1515 | Map.md, Map-Feature.md#poi-fernsicht, POI.md#glowsatnight | src/features/map/visibility-service.ts:checkNightGlow() [neu] |
| 853 | ‚õî | Map | infrastructure | POI-Hervorhebung: Sichtbare POIs hervorheben | mittel | Nein | #804, #843, #1513 | Map-Feature.md#overlay-visualisierung, POI.md#map-darstellung | src/application/shared/rendering/visibility-overlay.ts [neu] |
| 854 | ‚õî | Map | features | VisibilityCache f√ºr Performance-Optimierung (Sichtweiten-Berechnungen cachen) | mittel | Nein | #843 | Map.md, Map-Feature.md#performance-optimierung | src/features/map/visibility-cache.ts [neu] |
| 855 | ‚õî | Map | application | Visibility-Toggle UI: Button im Map-Panel | mittel | Nein | #843, #2310 | Map-Feature.md#ui, SessionRunner.md#visibility-toggle-post-mvp | src/application/session-runner/panels/map-panel.ts [√§ndern] |
| 900 | ‚úÖ | Time | core | TimeState Interface (currentTime, activeCalendarId) | hoch | Ja | - | Time-System.md#schemas, EntityRegistry.md | src/core/schemas/time.ts, src/features/time/types.ts, src/features/time/time-store.ts |
| 901 | ‚úÖ | Time | core | GameDateTime Interface (year, month, day, hour, minute, computed fields) | hoch | Ja | #900 | Time-System.md#gamedatetime | src/core/schemas/time.ts |
| 902 | ‚úÖ | Time | core | Duration Interface (years, months, days, hours, minutes) | hoch | Ja | - | Time-System.md#zeit-operationen | src/core/schemas/time.ts |
| 903 | ‚úÖ | Time | core | CalendarDefinition Schema (months, weekdays, seasons, timeSegments) | hoch | Ja | - | Time-System.md#calendardefinition, EntityRegistry.md | src/core/schemas/time.ts |
| 904 | ‚úÖ | Time | core | CalendarMonth Interface (name, days, season) | hoch | Ja | #903 | Time-System.md#calendardefinition | src/core/schemas/time.ts |
| 905 | ‚úÖ | Time | core | CalendarSeason Interface (name, months) | hoch | Ja | #903 | Time-System.md#calendardefinition | src/core/schemas/time.ts |
| 906 | ‚úÖ | Time | core | TimeSegment Type ('dawn', 'morning', 'midday', 'afternoon', 'dusk', 'night') | hoch | Ja | - | Time-System.md#gamedatetime, Time-System.md#time-segment-berechnung | src/core/schemas/time.ts, src/core/schemas/common.ts |
| 907 | ‚úÖ | Time | features | time:advance-requested Handler | hoch | Ja | #900, #902 | Time-System.md#advance-zeit-voranschreiten, Events-Catalog.md#time | src/features/time/time-service.ts (setupEventHandlers L164-210) |
| 908 | ‚úÖ | Time | features | time:set-requested Handler | hoch | Ja | #900, #901 | Time-System.md#set-zeit-setzen, Events-Catalog.md#time | src/features/time/time-service.ts (setupEventHandlers L213-239) |
| 909 | ‚úÖ | Time | features | time:state-changed Event publizieren | hoch | Ja | #907, #908 | Time-System.md#events, Events-Catalog.md#time | src/features/time/time-service.ts (publishStateChanged), src/core/events/domain-events.ts |
| 910 | ‚úÖ | Time | features | time:segment-changed Event publizieren | hoch | Ja | #909 | Time-System.md#events, Events-Catalog.md#time | src/features/time/time-service.ts (publishSegmentChanged), src/core/events/domain-events.ts |
| 911 | ‚úÖ | Time | features | time:day-changed Event publizieren | hoch | Ja | #909 | Time-System.md#events, Events-Catalog.md#time | src/features/time/time-service.ts (publishDayChanged), src/core/events/domain-events.ts |
| 912 | ‚úÖ | Time | features | getTimeSegment() Funktion mit Wrap-Around-Logik | hoch | Ja | #906 | Time-System.md#time-segment-berechnung | src/features/time/time-utils.ts (getTimeSegment, isInRange) |
| 913 | ‚úÖ | Time | features | addDuration() Funktion f√ºr Zeit-Arithmetik | hoch | Ja | #901, #902 | Time-System.md#advance-zeit-voranschreiten | src/features/time/time-utils.ts (addDuration, normalizeTime) |
| 914 | ‚¨ú | Time | features | time:set-calendar-requested Handler | niedrig | Nein | #903 | Time-System.md#kalender-wechseln, Events-Catalog.md#time | src/features/time/time-service.ts:setupEventHandlers() [√§ndern], src/features/time/time-service.ts:setCalendar() [neu] |
| 915 | ‚õî | Time | features | time:calendar-changed Event publizieren | niedrig | Nein | #914 | Time-System.md#events, Events-Catalog.md#time | src/features/time/time-service.ts:publishCalendarChanged() [neu], src/core/events/domain-events.ts |
| 916 | ‚õî | Time | features | time:calendar-change-failed Event publizieren | niedrig | Nein | #914 | Time-System.md#events, Events-Catalog.md#time | src/features/time/time-service.ts:publishCalendarChangeFailed() [neu], src/core/events/domain-events.ts |
| 917 | ‚¨ú | Time | features | convertTime() zwischen Kalendern | niedrig | Nein | #903 | Time-System.md#kalender-wechseln | src/features/time/time-utils.ts:convertTime() [neu] |
| 918 | ‚õî | Time | features | Visibility-Modifier pro TimeSegment (dawn 50%, night 10%, etc.) | mittel | Nein | #906, #843, #848 | Time-System.md#sichtweiten-einfluss, Map-Feature.md#visibility-system | src/features/map/visibility-utils.ts:getTimeModifier() [neu], src/features/map/visibility.ts:calculateVisibility() [√§ndern] |
| 919 | ‚õî | Time | features | Darkvision negiert Night-Modifier | mittel | Nein | #918, #849 | Time-System.md#darkvision, Map-Feature.md#visibility-system, Character-System.md#sinne | src/features/map/visibility-utils.ts:getTimeModifier() [√§ndern], src/features/party/types.ts:CharacterSenses [neu] |
| 950 | ‚¨ú | Time | features | rest:* Events im Events-Catalog definieren | hoch | Ja | - | Events-Catalog.md#rest, EventBus.md, Time-System.md, Character-System.md, Encounter-System.md | docs/architecture/Events-Catalog.md (bereits dokumentiert) |
| 951 | ‚õî | Time | features | rest:* Event-Typen in Core definieren | hoch | Ja | #950 | Events-Catalog.md#rest, Core.md, EventBus.md | src/core/events/types.ts [√§ndern] |
| 952 | ‚õî | Time | core | RestState Interface (status, type, hoursCompleted, hoursRemaining, interruptionCount) | hoch | Ja | #951 | Time-System.md#resting | src/core/schemas/time.ts [√§ndern] |
| 953 | ‚õî | Time | features | Rest-Store (State Machine: idle ‚Üí resting ‚Üí paused) | hoch | Ja | #952 | Time-System.md#resting, Time-System.md#state-machine | src/features/time/rest-store.ts [neu] |
| 954 | ‚õî | Time | features | Rest-Service (Stunden-Loop mit Encounter-Checks) | hoch | Ja | #953 | Time-System.md#resting, Time-System.md#encounter-unterbrechung, Encounter-System.md, Events-Catalog.md#rest | src/features/time/rest-service.ts [neu] |
| 955 | ‚õî | Application | apps | Rest-Button in SessionRunner Actions-Sektion | hoch | Ja | #951, b1, b2 | SessionRunner.md#actions-sektion, Time-System.md#resting | src/application/session-runner/panels/sidebar.ts [√§ndern] |
| 956 | ‚õî | Application | apps | Rest-Start-Modal (Short/Long w√§hlen, Gritty Realism Option) | hoch | Ja | #955 | SessionRunner.md#actions-sektion, Time-System.md#rest-typen | src/application/session-runner/modals/rest-modal.ts [neu] |
| 957 | ‚õî | Application | apps | Rest-Resolution-Modal (Fortsetzen/Neustarten nach Encounter) | hoch | Ja | #954 | SessionRunner.md#actions-sektion, Time-System.md#encounter-unterbrechung | src/application/session-runner/modals/rest-resolution-modal.ts [neu] |
| 958 | ‚õî | Application | apps | Rest-Completed-Modal (Info + manuelle HP-Eingabe f√ºr GM) | hoch | Ja | #954 | SessionRunner.md#actions-sektion, Time-System.md#rest-abschluss, Character-System.md | src/application/session-runner/modals/rest-completed-modal.ts [neu] |
| 1000 | ‚õî | Dungeon | features | Automatische Trap-Detection: Passive Perception gegen Trap DC pr√ºfen, Secret-Discovered Event bei Erfolg | hoch | Ja | #3084, #810, #500, #1210 | Dungeon-System.md#automatische-trigger, Character-System.md#character-schema, Map-Feature.md#dungeonmap | src/features/dungeon/trap-detection.ts:checkTrapDetection() [neu] |
| 1001 | ‚õî | Dungeon | features | Trap-Ausl√∂sung bei Bewegung (Passive Perception < Trap DC) | hoch | Ja | #1000 | Dungeon-System.md#automatische-trigger | src/features/dungeon/trap-detection.ts:triggerTrap() [neu] |
| 1002 | ‚õî | Dungeon | features | T√ºr-Prompt bei Bewegung ("T√ºr. √ñffnen?") | hoch | Ja | #3084, #808 | Dungeon-System.md#automatische-trigger, Map-Feature.md#dungeontile | src/features/dungeon/movement-triggers.ts:checkDoorPrompt() [neu] |
| 1003 | ‚õî | Dungeon | features | Creature-Encounter-Trigger bei Token-Kontakt | hoch | Ja | #3084, #811 | Dungeon-System.md#automatische-trigger | src/features/dungeon/movement-triggers.ts:checkTokenContact() [neu], src/features/dungeon/dungeon-service.ts:publishEncounterGenerateRequested() [neu] |
| 1004 | ‚õî | Dungeon | features | Fog of War Update bei Party-Bewegung | hoch | Ja | #3084, #812, #1025 | Dungeon-System.md#simulation, Map-Feature.md#dungeontile | src/features/dungeon/fog-of-war.ts:updateFogOfWar() [neu] |
| 1005 | ‚õî | Dungeon | features | Secret-Door Detection: Passive Perception Check gegen DC, automatisch bei Party-Bewegung | hoch | Ja | #3084, #808, #500, #1210 | Dungeon-System.md#geheime-bereiche, Character-System.md#character-schema, Map-Feature.md#dungeontile | src/features/dungeon/secret-detection.ts:checkSecretDoorDetection() [neu] |
| 1006 | ‚õî | Dungeon | application | GM-Popup bei Secret-Entdeckung | hoch | Ja | #1005 | Dungeon-System.md#geheime-bereiche | src/features/dungeon/dungeon-service.ts:publishSecretDiscovered() [neu] |
| 1007 | ‚õî | Dungeon | features | GM-Override: Secret als entdeckt markieren | hoch | Ja | #1005 | Dungeon-System.md#geheime-bereiche | src/features/dungeon/dungeon-service.ts:markSecretAsDiscovered() [neu] |
| 1008 | ‚õî | Dungeon | features | Monster-Tokens auf Grid platzieren: Token-Placement-System f√ºr vorplatzierte Encounters | hoch | Ja | #811 | Dungeon-System.md#dungeon-encounters, Cartographer.md#token-placer-dungeon, Encounter-System.md#creatureslot-varianten | src/features/dungeon/tokens.ts:placeToken() [neu] |
| 1009 | ‚õî | Dungeon | features | Encounter-Start bei Token-Klick | hoch | Ja | #1008 | Dungeon-System.md#dungeon-encounters | src/features/dungeon/tokens.ts:handleTokenClick() [neu], src/features/dungeon/dungeon-service.ts:publishEncounterStartRequested() [neu] |
| 1010 | ‚õî | Dungeon | features | Token zu aktivem Encounter hinzuf√ºgen | hoch | Ja | #1009 | Dungeon-System.md#dungeon-encounters, Encounter-System.md#state-machine, Combat-System.md#combat-flow | src/features/dungeon/dungeon-service.ts:addCreaturesToEncounter() [neu] |
| 1011 | ‚õî | Dungeon | features | Lichtquellen-Konstanten definieren: LIGHT_SOURCE_RADII mit Torch/Lantern/Light/Darkvision | hoch | Ja | #808 | Dungeon-System.md#licht, Dungeon-System.md#lichtquellen-tracking, Character-System.md#sinne-post-mvp | src/features/dungeon/lighting.ts:LIGHT_SOURCE_RADII [neu] |
| 1012 | ‚õî | Dungeon | features | Lighting Calculation: calculateLighting() f√ºr Bright/Dim/Dark Bereiche | hoch | Ja | #1011, #812 | Dungeon-System.md#lichtquellen-tracking | src/features/dungeon/lighting.ts:calculateLighting() [neu] |
| 1013 | ‚õî | Dungeon | features | Character-Inventar Lichtquellen-Tracking (Reichweite, Brenndauer) | hoch | Ja | #1011, #600, #612 | Dungeon-System.md#lichtquellen-tracking, Inventory-System.md#inventoryslot, Time-System.md#zeit-operationen | src/features/inventory/types.ts:LightSource [neu], src/features/dungeon/dungeon-service.ts:getActiveLightSources() [neu] |
| 1014 | ‚õî | Dungeon | features | Time-System Integration: Lichtquellen-Brenndauer tracken | mittel | Ja | #1013, #907 | Dungeon-System.md#lichtquellen-tracking | src/features/dungeon/dungeon-service.ts:handleTimeAdvance() [neu] (Event-Handler f√ºr time:advance-requested) |
| 1015 | ‚¨ú | Dungeon | features | Bewegungs-Zeit basierend auf Character-Speed (5-foot Tiles / 6 Sekunden) | hoch | Ja | #806, #504 | Dungeon-System.md#zeit-tracking, Character-System.md#travel-system, Time-System.md#advance-zeit-voranschreiten | src/features/dungeon/movement.ts:calculateMovementTime() [neu] |
| 1016 | ‚õî | Dungeon | features | Time-System Update bei Dungeon-Bewegung | hoch | Ja | #1015, #907, #3084 | Dungeon-System.md#zeit-tracking | src/features/dungeon/movement.ts:updateTimeAfterMovement() [neu] (publiziert time:advance-requested) |
| 1017 | ‚õî | Dungeon | features | GM View Toggle (sieht alles) | hoch | Ja | #812 | Dungeon-System.md#gm-interface, Cartographer.md#layer-control | src/features/dungeon/dungeon-service.ts:setViewMode() [neu], src/features/dungeon/types.ts:ViewMode [neu] |
| 1018 | ‚õî | Dungeon | features | Player View Toggle (nur Explored sichtbar) | hoch | Ja | #812, #1017 | Dungeon-System.md#gm-interface, Dungeon-System.md#fog-of-war, Cartographer.md#layer-control | src/features/dungeon/dungeon-service.ts:setViewMode() [neu] |
| 1019 | ‚¨ú | Dungeon | features | Edit Mode Toggle | hoch | Ja | #806 | Dungeon-System.md#map-ansicht | src/features/dungeon/dungeon-service.ts:setEditMode() [neu] |
| 1020 | ‚¨ú | Dungeon | features | GM-definierte Raum-Grenzen: Room-Boundary-Tool im Cartographer f√ºr Dungeon-Mode | hoch | Ja | #809 | Dungeon-System.md#raum-definition, Map-Feature.md#dungeonroom, Cartographer.md#dungeon-tools | src/features/dungeon/rooms.ts:defineRoom() [neu] |
| 1021 | ‚õî | Dungeon | features | Raum-Pinsel f√ºr nachtr√§gliche Anpassung | hoch | Ja | #1020 | Dungeon-System.md#raum-definition | src/features/dungeon/rooms.ts:updateRoomBoundary() [neu] |
| 1022 | ‚¨ú | Dungeon | application | Raum-Klick zeigt Inhalts√ºbersicht | hoch | Ja | #809 | Dungeon-System.md#gm-interface, Map-Feature.md#dungeonroom | src/features/dungeon/rooms.ts:getRoomSummary() [neu], src/application/views/RoomSummaryView.svelte [neu] |
| 1023 | ‚õî | Dungeon | application | Tile-Klick zeigt DetailView mit Inhalt | hoch | Ja | #808 | Dungeon-System.md#tile-detail-click | src/features/dungeon/dungeon-service.ts:getTileContents() [neu], src/application/views/TileDetailView.svelte [neu] |
| 1024 | ‚õî | Dungeon | application | DetailView zeigt Fallen, Truhen, GM-Notizen | hoch | Ja | #1023 | Dungeon-System.md#gm-interface, Map-Feature.md#dungeontilecontent, DetailView.md | src/application/views/TileDetailView.svelte [neu] |
| 1025 | ‚õî | Dungeon | features | Line of Sight Berechnung | hoch | Ja | #808 | Dungeon-System.md#sicht-line-of-sight | src/features/dungeon/line-of-sight.ts:calculateLineOfSight() [neu] |
| 1026 | ‚õî | Dungeon | features | Wand-Blockierung f√ºr Sichtlinien | hoch | Ja | #1025 | Dungeon-System.md#sicht-line-of-sight, Map-Feature.md#dungeontile | src/features/dungeon/line-of-sight.ts:isBlockedByWall() [neu] |
| 1030 | ‚¨ú | Dungeon | features | Sound-Propagation Overlay (was Spieler h√∂ren k√∂nnen) | niedrig | Nein | #809 | Dungeon-System.md#sound, Dungeon-System.md#sound-propagation | src/features/dungeon/sound-propagation.ts:calculateSoundPropagation() [neu] |
| 1031 | ‚õî | Dungeon | features | T√ºr-D√§mpfung (offen: 80%, geschlossen: 30%) | niedrig | Nein | #1030 | Dungeon-System.md#sound | src/features/dungeon/sound-propagation.ts:DOOR_DAMPENING_FACTORS [neu] |
| 1032 | ‚õî | Dungeon | infrastructure | Raum-zu-Raum Sound-Visualisierung | niedrig | Nein | #1030 | Dungeon-System.md#sound, Map-Feature.md#dungeonroom | src/features/dungeon/sound-propagation.ts:visualizeSoundReach() [neu] |
| 1035 | ‚¨ú | Dungeon | features | 3D-Grid Navigation (Balkone, Tunnel-Schr√§gen) | niedrig | Nein | #807 | Dungeon-System.md#multi-level-navigation | src/features/dungeon/3d-grid.ts:calculate3DPath() [neu] |
| 1036 | ‚õî | Dungeon | core | Treppen/Leitern/Sch√§chte als spezielle DungeonTile Types: stairs, ladder, shaft | niedrig | Nein | #1035, #808 | Dungeon-System.md#multi-level-navigation, Map-Feature.md#dungeontile, Map-Feature.md#gridcoordinate | src/core/schemas/map.ts:dungeonTileSchema [√§ndern - type erweitern], src/features/dungeon/3d-grid.ts:LEVEL_TRANSITION_TILES [neu] |
| 1037 | ‚õî | Dungeon | features | Level-Wechsel bei Stair-Tile-Kontakt | niedrig | Nein | #1036 | Dungeon-System.md#multi-level-navigation | src/features/dungeon/movement-triggers.ts:handleLevelTransition() [neu] |
| 1200 | ‚õî | Creature | core | CreatureDefinition Schema: Vollst√§ndiges Interface implementieren | hoch | Ja | #2703, #2949, #2950, #1205, #1206, #1207, #1208, #1209 | Creature.md#schema, EntityRegistry.md#creature-hierarchie-definition-vs-instanz-vs-npc | src/core/schemas/creature.ts:creatureDefinitionSchema |
| 1201 | ‚úÖ | Creature | core | Basis-Statistiken: CR, HP, AC, Size | hoch | Ja | #1200 | Creature.md#creaturedefinition | src/core/schemas/creature.ts:creatureDefinitionSchema (Zeile 112-121) |
| 1202 | ‚úÖ | Creature | core | terrainAffinities: Array von Terrain-IDs | hoch | Ja | #1200, #1700 | Creature.md#creaturedefinition, Terrain.md#schema | src/core/schemas/creature.ts:creatureDefinitionSchema (Zeile 134) |
| 1203 | ‚úÖ | Creature | core | activeTime: TimeSegment-Array (dawn, day, dusk, night) | hoch | Ja | #1200 | Creature.md#creaturedefinition, Encounter-System.md#tile-eligibility | src/core/schemas/creature.ts:creatureDefinitionSchema (Zeile 137) |
| 1204 | ‚úÖ | Creature | core | lootTags: String-Array f√ºr Loot-System | hoch | Ja | #1200 | Creature.md#creaturedefinition, Loot-Feature.md#loot-tags | src/core/schemas/creature.ts:creatureDefinitionSchema (Zeile 145) |
| 1205 | ‚úÖ | Creature | core | DefaultLootEntry Interface: itemId, chance, quantity | hoch | Ja | - | Creature.md#defaultloot, Item.md#schema | [neu] src/core/schemas/creature.ts:defaultLootEntrySchema |
| 1206 | ‚úÖ | Creature | core | defaultLoot Array: Garantiertes/wahrscheinliches Loot | hoch | Ja | - | Creature.md#defaultloot, Loot-Feature.md#creature-default-loot | [neu] src/core/schemas/creature.ts:creatureDefinitionSchema |
| 1207 | ‚úÖ | Creature | core | CreaturePreferences Interface: Gewichtungs-Modifikatoren | hoch | Ja | - | Creature.md#creaturepreferences, Encounter-System.md#tile-eligibility | src/core/schemas/creature.ts:creaturePreferencesSchema (Zeile 73-92) |
| 1208 | ‚úÖ | Creature | core | AbilityScores Interface: STR, DEX, CON, INT, WIS, CHA | hoch | Ja | - | Creature.md#creaturedefinition, Combat-System.md#schemas | src/core/schemas/creature.ts:abilityScoresSchema (Zeile 45-52) |
| 1209 | ‚úÖ | Creature | core | SpeedBlock Interface: walk, fly, swim, climb, burrow | hoch | Ja | - | Creature.md#creaturedefinition | src/core/schemas/creature.ts:speedBlockSchema (Zeile 59-65) |
| 1210 | ‚õî | Creature | core | Senses Interface: passivePerception, darkvision, blindsight, etc. | mittel | Nein | #1200 | Creature.md#creaturedefinition, Creature.md#sinne-post-mvp | [neu] src/core/schemas/creature.ts:sensesSchema |
| 1211 | ‚úÖ | Creature | core | Creature Runtime Interface: instanceId, currentHp, tempHp, conditions | hoch | Ja | #1200 | Creature.md#creature-runtime, Combat-System.md#schemas | src/core/schemas/creature.ts:creatureInstanceSchema (Zeile 183-211) |
| 1212 | ‚õî | Creature | features | Auto-Sync: creature.terrainAffinities ‚Üê terrain.nativeCreatures bidirektional | hoch | Ja | #1202, #1700 | Creature.md#auto-sync-verhalten, Terrain.md#auto-sync-mechanismus | [neu] src/features/creature/auto-sync.ts:syncCreatureToTerrain() |
| 1214 | ‚úÖ | Creature | features | Encounter Integration: filterEligibleCreatures() | hoch | Ja | #200, #1202, #1203 | Creature.md#encounter-feature, Encounter-System.md#tile-eligibility | src/features/encounter/encounter-utils.ts:filterEligibleCreatures() (Zeile 45-61) |
| 1215 | ‚úÖ | Creature | features | Combat Integration: createCombatCreature() Factory | hoch | Ja | #300, #1211 | Creature.md#combat-feature, Combat-System.md#schemas | src/features/combat/combat-utils.ts:createCombatCreature() (Zeile 90-99), createParticipantFromCreature() (Zeile 108-125) |
| 1216 | ‚õî | Creature | features | Loot Integration: defaultLoot Processing bei Encounter | hoch | Ja | #705, #1206 | Creature.md#defaultloot, Loot-Feature.md#creature-default-loot, Encounter-System.md#schemas | src/features/loot/loot-utils.ts:mergeLootTags() (Zeile 130-145 nutzt nur lootTags), [neu] src/features/loot/loot-utils.ts:processDefaultLoot() |
| 1217 | ‚õî | Creature | infrastructure | Storage: creature/ und npc/ Verzeichnisse | hoch | Ja | #1200, #1300, #2802 | Creature.md#storage, EntityRegistry.md#storage, NPC-System.md#npc-schema | [neu] src/infrastructure/vault-entity-registry.adapter.ts (creature/npc-Verzeichnis-Setup) |
| 1218 | ‚õî | Creature | infrastructure | Bundled Creatures: Mitgelieferte Basis-Kreaturen (_bundled/) | mittel | Ja | #1217 | Creature.md#storage | presets/creatures/base-creatures.json (8 creatures vorhanden, aber Vault-Integration fehlt) |
| 1219 | ‚õî | Creature | core | Vollst√§ndiger D&D 5e Statblock: Skills, Saves, Resistances, etc. | mittel | Nein | #1200, #3238, #3239, #3241, #3242 | Creature.md#creaturedefinition | src/core/schemas/creature.ts:creatureDefinitionSchema (actions vorhanden Zeile 159, aber Skills/Saves/Resistances fehlen) [neu] skillProficienciesSchema, savingThrowProficienciesSchema, resistancesSchema |
| 1220 | ‚õî | Creature | core | Actions Interface: Attack, Spellcasting, Special Abilities | mittel | Nein | #1200 | Creature.md#creaturedefinition | src/core/schemas/creature.ts:creatureDefinitionSchema (actions als string[] Zeile 159), [neu] actionSchema mit strukturiertem Interface |
| 1221 | ‚õî | Creature | features | Legendary Actions Interface: Legendary Actions f√ºr Boss-Monster | niedrig | Nein | #1200, #1220 | Creature.md#creaturedefinition, Combat-System.md#post-mvp-erweiterungen | [neu] src/core/schemas/creature.ts:legendaryActionSchema, creatureDefinitionSchema erweitern |
| 1222 | ‚õî | Creature | features | Sinne-System: Encounter-Trigger basierend auf Sichtweite | mittel | Nein | #1210, #1214 | Creature.md#sinne-post-mvp, Encounter-System.md#tile-eligibility | [neu] src/features/encounter/visibility.ts:checkCreatureVisibility() |
| 1223 | ‚õî | Creature | features | Passive Perception f√ºr Stealth-Checks | mittel | Nein | #1210, #1222 | Creature.md#sinn-typen | [neu] src/features/encounter/visibility.ts:calculatePassivePerceptionDC() |
| 1100 | ‚¨ú | Audio | features | AudioLayer Interface: music + ambience mit HTMLAudioElement | hoch | Ja | - | Audio-System.md#audio-layers, Audio-System.md#playback, Audio-System.md#schemas | [neu] src/features/audio/types.ts:AudioLayer |
| 1101 | ‚õî | Audio | core | Track Entity Schema: id, title, filename, layer, tags, loop | hoch | Ja | #2801 | Audio-System.md#schemas, EntityRegistry.md, Core.md#schemas | [neu] src/core/schemas/track.ts |
| 1102 | ‚¨ú | Audio | features | MoodContext Interface: location, weather, timeOfDay, combatState | hoch | Ja | - | Audio-System.md#schemas, Audio-System.md#mood-context, Features.md#audio-hybrid-feature | [neu] src/features/audio/types.ts:MoodContext, src/features/audio/types.ts:LocationType |
| 1103 | ‚õî | Audio | features | Basic Playback implementieren: playTrack() mit HTML5 Audio API f√ºr beide Layer | hoch | Ja | #1100, #1101, #3117 | Audio-System.md#html5-audio, Audio-System.md#playback | [neu] src/features/audio/playback.ts:playTrack() |
| 1104 | ‚õî | Audio | features | Volume Control implementieren: setVolume() pro Layer (0-100) | hoch | Ja | #1100 | Audio-System.md#gm-interface, Audio-System.md#settings | [neu] src/features/audio/playback.ts:setVolume() |
| 1105 | ‚õî | Audio | features | Track-Ende Handler implementieren: N√§chsten Track ausw√§hlen bei ended-Event | hoch | Ja | #1103, #1108 | Audio-System.md#track-ende-handling | [neu] src/features/audio/playback.ts:handleTrackEnded(), [√§ndern] src/features/audio/playback.ts:playTrack() |
| 1106 | ‚õî | Audio | features | Crossfade implementieren: crossfade() mit konfigurierbarer Dauer (fade-out, track-switch, fade-in) | hoch | Ja | #1103, #1104, #3119 | Audio-System.md#crossfade | [neu] src/features/audio/playback.ts:crossfade() |
| 1107 | ‚õî | Audio | features | Mood-Matching Score-Berechnung implementieren: calculateMatchScore() f√ºr Location + Combat + Weather + Time | hoch | Ja | #1101, #1102 | Audio-System.md#automatische-track-auswahl, Audio-System.md#mood-matching | [neu] src/features/audio/mood-matching.ts:calculateMatchScore() |
| 1108 | ‚õî | Audio | features | Track-Selektion implementieren: selectTrack() mit Beste Match aus Kandidaten (80%-Threshold + LRP Tiebreaker) | hoch | Ja | #1102, #1107 | Audio-System.md#mood-matching, Audio-System.md#automatische-track-auswahl, Features.md#audio-hybrid-feature | [neu] src/features/audio/mood-matching.ts:selectTrack(), src/features/audio/mood-matching.ts:findBestMatch() |
| 1109 | ‚õî | Audio | features | Manual Override implementieren: Track direkt w√§hlen (umgeht Mood-Matching) | hoch | Ja | #1103, #1108 | Audio-System.md#gm-interface, Audio-System.md#manual-override, Events-Catalog.md#audio | [neu] src/features/audio/orchestrator.ts:overrideTrack() |
| 1110 | ‚õî | Audio | features | Audio Event Handler Setup implementieren: play/pause/skip/volume/override-requested Handler registrieren | hoch | Ja | #1100, #1102, #1103 | Audio-System.md#events, Events-Catalog.md#audio, Audio-System.md#gm-interface | [neu] src/features/audio/orchestrator.ts:setupEventHandlers(), [neu] src/features/audio/types.ts:AudioState |
| 1111 | ‚õî | Audio | features | audio:state-changed Event publizieren implementieren: Nach jeder State-√Ñnderung | hoch | Ja | #1110 | Audio-System.md#events, Events-Catalog.md#audio, Audio-System.md#gm-interface | [neu] src/features/audio/orchestrator.ts:publishStateChanged() |
| 1112 | ‚õî | Audio | features | audio:track-changed Event publizieren implementieren: Mit reason (context-change/track-ended/user-skip/user-override) | hoch | Ja | #1110 | Audio-System.md#events, Events-Catalog.md#audio, Audio-System.md#context-updates | [neu] src/features/audio/orchestrator.ts:publishTrackChanged() |
| 1113 | ‚õî | Audio | features | Auto-Switch on Context implementieren: Automatischer Track-Wechsel bei Context-√Ñnderung (wenn enabled) | mittel | Nein | #1108, #909, #110, #12, #322, #324, #3119 | Audio-System.md#context-updates, Audio-System.md#automatic-track-auswahl, Features.md#audio-hybrid-feature | [neu] src/features/audio/orchestrator.ts:handleContextChange(), [√§ndern] src/features/audio/orchestrator.ts:setupEventHandlers() |
| 1114 | ‚õî | Audio | features | Weather-Matching implementieren: Ambience-Track anpassen bei weather-changed Event | niedrig | Nein | #909, #1107, #1108, #1113 | Audio-System.md#context-updates, Weather-System.md#event-flow, Events-Catalog.md#environment, Time-System.md#consumer | [√§ndern] src/features/audio/mood-matching.ts:calculateMatchScore(), [√§ndern] src/features/audio/orchestrator.ts:handleContextChange() |
| 1115 | ‚õî | Audio | features | audio:context-changed Event Handler implementieren: MoodContext-Update verarbeiten | mittel | Nein | #110, #1102, #1108, #1113 | Audio-System.md#context-updates, Weather-System.md#event-flow, Events-Catalog.md#environment | [neu] src/features/audio/orchestrator.ts:handleAudioContextChanged(), [√§ndern] src/features/audio/orchestrator.ts:setupEventHandlers() |
| 1119 | ‚õî | Audio | features | audio:pause-requested Event Handler implementieren: Playback pausieren | hoch | Ja | #1103 | Audio-System.md#events, Events-Catalog.md#audio, Audio-System.md#gm-interface | [neu] src/features/audio/orchestrator.ts:handlePauseRequested() |
| 1120 | ‚õî | Audio | features | audio:resume-requested Event Handler implementieren: Playback fortsetzen | hoch | Ja | #1103 | Audio-System.md#events, Events-Catalog.md#audio, Audio-System.md#gm-interface | [neu] src/features/audio/orchestrator.ts:handleResumeRequested() |
| 1121 | ‚õî | Audio | features | audio:skip-requested Event Handler implementieren: Zum n√§chsten passenden Track springen | hoch | Ja | #1103, #1108 | Audio-System.md#events, Events-Catalog.md#audio, Audio-System.md#gm-interface | [neu] src/features/audio/orchestrator.ts:handleSkipRequested() |
| 1300 | ‚õî | NPC | core | NPC-Schema Interface: id, name, creature, factionId, personality, status | hoch | Ja | #1400, #2703 | NPC-System.md#npc-schema, EntityRegistry.md#creature-hierarchie-definition-vs-instanz-vs-npc, Core.md#branded-types | src/core/schemas/npc.ts:52-103 |
| 1301 | ‚õî | NPC | core | PersonalityTraits Interface: primary + secondary Traits | hoch | Ja | #1300 | NPC-System.md#npc-schema | src/core/schemas/npc.ts:22-28 |
| 1302 | ‚õî | NPC | core | CreatureRef Interface: type + id Verweis auf Creature-Template | hoch | Ja | #1200, #1300 | NPC-System.md#npc-schema, Creature.md#schema, EntityRegistry.md#creature-hierarchie-definition-vs-instanz-vs-npc | src/core/schemas/creature.ts:222-230 (creatureRefSchema) |
| 1303 | ‚õî | NPC | core | NPC Tracking-Felder: firstEncounter, lastEncounter, encounterCount | hoch | Ja | #1300 | NPC-System.md#npc-schema, NPC-System.md#npc-lifecycle | src/core/schemas/npc.ts:85-92 |
| 1304 | ‚õî | NPC | core | NPC Status-Enum: alive, dead (Vereinfacht f√ºr MVP) | hoch | Ja | #1300 | NPC-System.md#npc-schema, NPC-System.md#status-uebergaenge | src/core/schemas/npc.ts:40-42 |
| 1305 | ‚õî | NPC | core | Optional currentPOI-Feld: Explizite NPC-Platzierung | mittel | Nein | #1300, #1500 | NPC-System.md#mvp-niedrige-prio-explizite-npc-location, POI.md#schema | src/core/schemas/npc.ts:97 |
| 1306 | ‚õî | NPC | core | NPCMatchCriteria Interface: creatureType + factionId | hoch | Ja | #1300, #1400 | NPC-System.md#match-kriterien, Creature.md#schema, Faction.md#schema | src/core/schemas/npc.ts:114-120 (im Schema statt types.ts) |
| 1307 | ‚úÖ | NPC | features | findMatchingNPC(): Suche existierende NPCs nach Kriterien | hoch | Ja | #1306, #2800, #2804 | NPC-System.md#match-kriterien, NPC-System.md#npc-auswahl-algorithmus, EntityRegistry.md#querying | Integriert in selectOrGenerateNpc (src/features/encounter/npc-generator.ts:320-353) |
| 1308 | ‚õî | NPC | features | calculateMatchScore(): Scoring-System (Wiedersehen +15, k√ºrzlich -30) | hoch | Ja | #1303, #1307 | NPC-System.md#match-kriterien, NPC-System.md#npc-auswahl-algorithmus, NPC-System.md#npc-lifecycle | src/features/encounter/npc-generator.ts:277-301 (calculateNpcMatchScore) |
| 1309 | üî∂ | NPC | features | resolveFactionCulture(): Kultur aus Faction-Hierarchie aufl√∂sen | hoch | Ja | #1400, #1401, #1405 | NPC-System.md#npc-generierung, Faction.md#kultur-vererbung, Faction.md#hierarchie | src/features/encounter/npc-generator.ts:37-63 |
| 1310 | ‚úÖ | NPC | features | generateNameFromCulture(): Namen aus Kultur-Daten generieren | hoch | Ja | #1309, #1401 | NPC-System.md#npc-generierung, Faction.md#kultur-vererbung, Faction.md#naming | src/features/encounter/npc-generator.ts:127-167 (generateNpcName) |
| 1311 | ‚úÖ | NPC | features | rollPersonalityFromCulture(): Pers√∂nlichkeits-Traits w√ºrfeln | hoch | Ja | #1309, #1401 | NPC-System.md#npc-generierung, Faction.md#kultur-vererbung, Faction.md#personality | src/features/encounter/npc-generator.ts:200-224 (generatePersonality) |
| 1312 | üî∂ | NPC | features | rollQuirkFromCulture(): Quirk generieren mit Kreatur-Kompatibilit√§ts-Filter (canSpeak, socialCreature) und Einzigartigkeit-Tracking (100% Coverage) | mittel | Ja | #1309, #1401 | NPC-System.md#npc-generierung, NPC-System.md#quirk-einzigartigkeit, Faction.md#quirk-wuerfeln | src/features/encounter/npc-generator.ts:230-249 (rollQuirkFromCulture) |
| 1313 | üü¢ | NPC | features | selectPersonalGoal(): Goal mit Pool-Hierarchie (Generisch ‚Üí Creature ‚Üí Fraktion) und Pers√∂nlichkeits-Gewichtung | mittel | Ja | #1311, #1401, #3240 | NPC-System.md#goal-pool-hierarchie, Creature.md#schema, Faction.md#culture-schema | src/features/encounter/npc-generator.ts:254-267 (generatePersonalGoal) |
| 1314 | ‚õî | NPC | features | generateNewNPC(): Haupt-Generierungs-Funktion mit Persistierung | hoch | Ja | #1300, #1310, #1311, #1312, #1313, #2800, #2802, #3172 | NPC-System.md#npc-generierung, NPC-System.md#npc-schema, EntityRegistry.md#port-interface | src/features/encounter/npc-generator.ts:358-385 (generateNewNpc) |
| 1315 | ‚õî | NPC | core | EntityRegistry Integration: NPC als Entity-Typ registrieren | hoch | Ja | #1300, #2800, #2801 | NPC-System.md#npc-generierung, EntityRegistry.md#entity-type-mapping, EntityRegistry.md#storage | src/core/schemas/common.ts:45 (EntityType enum) |
| 1316 | ‚õî | NPC | features | updateNPCAfterEncounter(): Tracking-Felder aktualisieren (lastEncounter, encounterCount) und Status-Transition (dead bei npcKilled) | hoch | Ja | #214, #1303, #1304, #2800 | NPC-System.md#encounter-nachbereitung, NPC-System.md#status-uebergaenge, Encounter-System.md#encounter-outcome | [neu] src/features/npc/npc-service.ts:updateNpcAfterEncounter() |
| 1318 | ‚úÖ | NPC | features | selectOrGenerateLeadNPC(): Integration mit Encounter-System | hoch | Ja | #1200, #1307, #1314 | NPC-System.md#lead-npc-auswahl, NPC-System.md#integration-mit-encounters, Encounter-System.md#npc-instanziierung | src/features/encounter/npc-generator.ts:320-353 (selectOrGenerateNpc), verwendet in encounter-service.ts:513-521 |
| 1319 | ‚õî | NPC | features | resolveMultiGroupNPCs(): Lead + Highlight NPCs pro Gruppe (max 3 Highlights GLOBAL) | hoch | Ja | #252, #1318, #2972, #2973 | NPC-System.md#multi-gruppen-encounters, Encounter-System.md#npc-instanziierung, Encounter-System.md#multi-group-encounters | [neu] src/features/encounter/npc-generator.ts:resolveMultiGroupNPCs() |
| 1320 | ‚õî | NPC | features | findEligibleNPCs(): NPCs nach Faction-Territory filtern (Faction.controlledPOIs ‚Üí Tile-Pr√§senz) | hoch | Ja | #1400, #1409, #1410, #2804 | NPC-System.md#mvp-fraktions-basierte-location, Faction.md#territory-via-pois, Faction.md#encounter-integration | [neu] src/features/npc/npc-location.ts:findEligibleNpcs() |
| 1321 | ‚õî | NPC | features | findNPCsAtTile(): Kombination explizite Location (currentPOI) + Faction-Territory-Logik | mittel | Nein | #1305, #1320, #1500 | NPC-System.md#mvp-niedrige-prio-explizite-npc-location, NPC-System.md#mvp-fraktions-basierte-location, POI.md#schema | [neu] src/features/npc/npc-location.ts:findNpcsAtTile() |
| 1322 | ‚õî | NPC | application | NPC Library-View: CRUD-Interface f√ºr NPC-Bearbeitung | mittel | Ja | #1300, #2800, #2802 | NPC-System.md#npc-bearbeitung-library, NPC-System.md#gm-interface, Library.md#entity-views | [neu] src/application/views/library/NPCView.svelte |
| 1323 | ‚¨ú | NPC | application | Lead-NPC UI-Sektion: Pers√∂nlichkeit, Quirk, Ziel, Wiederkehr-Indikator, Encounter-History, Re-Roll-Buttons ([Anderen NPC w√§hlen] [Neu generieren]) | mittel | Ja | #1318, #2409, #2415 | NPC-System.md#encounter-preview, NPC-System.md#gm-interface, Encounter-System.md#encounter-ui | [neu] src/application/components/encounter/EncounterPreview.svelte |
| 1400 | üî∂ | Faction | features | Faction-Schema (id, name, parentId, culture, creatures, controlledPOIs, displayColor) | hoch | Ja | - | Faction.md#schema | src/core/schemas/faction.ts:160-188 |
| 1401 | üî∂ | Faction | features | CultureData-Schema (naming, personality, quirks, values, speech) | hoch | Ja | #1400 | Faction.md#culturedata | src/core/schemas/faction.ts:116-133 |
| 1402 | üî∂ | Faction | features | FactionCreatureGroup-Schema (creatureId, count) | hoch | Ja | #1200, #1400 | #schema, Creature.md#schema | src/core/schemas/faction.ts:142-150 |
| 1403 | üî∂ | Faction | features | FactionPresence-Schema (factionId, strength) f√ºr Tile-Speicherung | hoch | Ja | #802, #1400 | #praesenz-datenstruktur, Map-Feature.md#overworldmap | src/core/schemas/faction.ts:227-232 |
| 1404 | ‚úÖ | Faction | features | WeightedTrait und WeightedQuirk Schemas | mittel | Ja | #1401 | Faction.md#culturedata | src/core/schemas/faction.ts:20-36 |
| 1405 | üî∂ | Faction | features | resolveFactionCulture(): Hierarchie von Wurzel zu Blatt aufl√∂sen | hoch | Ja | #1400, #1401 | #kultur-vererbung, NPC-System.md#npc-generierung | src/features/encounter/npc-generator.ts:37-63 |
| 1406 | ‚úÖ | Faction | features | mergeCultureData(): Kultur-Eigenschaften mergen mit Vererbungsregeln | hoch | Ja | #1405 | #merge-regeln, #kultur-vererbung | src/features/encounter/npc-generator.ts:69-100 (mergeCulture) |
| 1407 | ‚úÖ | Faction | features | mergeWeightedTraits(): Helper f√ºr Trait-Merging mit Gewichtung | mittel | Ja | #1406 | Faction.md#merge-regeln | Integriert in mergeCulture (src/features/encounter/npc-generator.ts:69-100) |
| 1408 | ‚úÖ | Faction | features | mergeWeightedQuirks(): Helper f√ºr Quirk-Merging | mittel | Ja | #1406 | Faction.md#merge-regeln | Integriert in mergeCulture (src/features/encounter/npc-generator.ts:69-100) |
| 1409 | ‚õî | Faction | features | distributePresenceToTiles(): CR-Verteilungslogik mit Gewichtung (1/(d+1)) im Cartographer | hoch | Ja | #802, #1403, #1500, #3194 | Faction.md#praesenz-vorberechnung-cartographer, POI.md#basepoi, Map-Feature.md#overworldmap | [neu] src/features/faction/faction-presence.ts:calculatePresenceForTile() |
| 1410 | ‚õî | Faction | features | getFactionsAtTile(): Vorberechnete Pr√§senz vom Tile lesen mit active-Filter | hoch | Ja | #801, #802, #1409 | Faction.md#encounter-integration, Map-Feature.md#overworldmap | [neu] src/features/faction/faction-presence.ts:getFactionsAtTile() |
| 1411 | ‚õî | Faction | features | selectEncounterFaction(): Gewichtete Zufallsauswahl basierend auf FactionPresence.strength | hoch | Ja | #202, #1410, #3195 | Faction.md#encounter-integration, Encounter-System.md#tile-eligibility | [neu] src/features/faction/faction-presence.ts:selectEncounterFaction() |
| 1412 | üî∂ | Faction | features | Bundled Basis-Fraktionen: Humanoids, Goblins, Orcs, Undead, etc. | hoch | Ja | #1400, #1401 | Faction.md#bundled-basis-fraktionen | presets/factions/base-factions.json |
| 1413 | üî∂ | Faction | features | Faction Events: create/update/delete-requested und Lifecycle-Events | mittel | Ja | #1400 | Faction.md#events | src/core/events/domain-events.ts:FactionPayloads, FactionState |
| 1414 | ‚¨ú | Faction | features | Faction Territory Events Implementation: poi-claimed, poi-lost EventBus-Handler + Event-Emission bei POI-Zuweisung | niedrig | Nein | #1413, #1500 | Faction.md#events, POI.md#basepoi | docs/architecture/Events-Catalog.md:756-764 (Events definiert, Implementierung fehlt) |
| 1415 | ‚õî | Faction | application | Faction Library-View: CRUD-UI mit Kultur-Editor, Creature-Verwaltung, POI-Zuweisung | mittel | Ja | #1400, #1416, #2800 | Faction.md#schema, Library.md#tab-navigation | [neu] src/application/library/faction-view.svelte |
| 1416 | ‚õî | Faction | features | FactionOrchestrator: CRUD-Logik + Event-Handling (create/update/delete-requested) | mittel | Ja | #1400, #1413 | Faction.md#schema, Faction.md#events, Architecture/Infrastructure.md#storage-port-pattern | [neu] src/features/faction/orchestrator.ts, [neu] src/features/faction/index.ts:createFactionOrchestrator() |
| 1417 | üî∂ | Faction | features | Faction EntityRegistry Integration: 'faction' als Entity-Typ | hoch | Ja | #1400 | EntityRegistry.md#entity-type-mapping, Faction.md#schema | src/core/schemas/common.ts:46 (EntityType enum enth√§lt 'faction') |
| 1500 | ‚úÖ | Location/POI | features | BasePOI Interface mit gemeinsamen Eigenschaften (id, mapId, position, name, icon, visible) | hoch | Ja | - | POI.md#basepoi, EntityRegistry.md#entity-type-mapping | [neu] src/core/schemas/poi.ts |
| 1501 | ‚úÖ | Location/POI | features | EntrancePOI Schema (linkedMapId, spawnPosition, description) | hoch | Ja | - | POI.md#entrancepoi, Map-Navigation.md#bidirektionale-links | [neu] src/core/schemas/poi.ts |
| 1502 | ‚¨ú | Location/POI | core | LandmarkPOI Schema (description, gmNotes) | hoch | Ja | #1500 | POI.md#landmarkpoi | [neu] src/core/schemas/poi.ts |
| 1504 | ‚¨ú | Location/POI | core | TrapPOI Schema (dc, damage, triggered, detected, effect) | mittel | Nein | #1500 | POI.md#trappoi, Map-Feature.md#dungeontile | [neu] src/core/schemas/poi.ts |
| 1505 | ‚õî | Location/POI | core | TreasurePOI Schema (items, locked, lockDC, looted, trapId) | mittel | Nein | #1500, #1504, #2600 | POI.md#treasurepoi, Item.md#schema | [neu] src/core/schemas/poi.ts |
| 1506 | ‚¨ú | Location/POI | core | ObjectPOI Schema (interactable, description) | niedrig | Nein | #1500 | POI.md#objectpoi | [neu] src/core/schemas/poi.ts |
| 1507 | ‚õî | Location/POI | core | POI CRUD Events (create/update/delete-requested + created/updated/deleted) | hoch | Ja | #3168, #1516 | POI.md#events, Events-Catalog.md#poi, EventBus.md | src/core/events/domain-events.ts:230-235,848-872 (Events definiert, Payloads nutzen `poi: unknown` statt typisiert POI Union Type) |
| 1508 | ‚õî | Location/POI | core | POI Interaction Events (trap-triggered, trap-detected, treasure-looted) | mittel | Nein | #1504, #1505, #1507, #1516 | POI.md#events, Events-Catalog.md#poi, Dungeon-System.md | src/core/events/domain-events.ts:236-238,874-887 (Events definiert, Payloads nutzen `string[]` statt `EntityId<'item'>[]` bzw. `string` statt `EntityId<'character'>`) |
| 1509 | ‚õî | Location/POI | features | POI Query Functions (getPOIsOnMap, getPOIsAtTile, getEntrancesOnMap, getHiddenTraps) | hoch | Ja | #3168, #1516 | POI.md#queries, EntityRegistry.md#port-interface | [neu] src/features/poi/poi-queries.ts |
| 1510 | ‚õî | Location/POI | features | POI Feature/Orchestrator mit CRUD-Logik | hoch | Ja | #3168, #1507, #1509, #1516 | POI.md, Features.md#feature-struktur, EntityRegistry.md#port-interface | [neu] src/features/poi/orchestrator.ts, [neu] src/features/poi/index.ts:createPoiOrchestrator() |
| 1511 | ‚õî | Location/POI | features | Map-Navigation via EntrancePOI (map:navigate-requested Event) | hoch | Ja | #820, #1501, #1507 | POI.md#map-navigation, Map-Navigation.md#navigation-events, Map-Feature.md#events | src/core/events/domain-events.ts:141,515-518 (Event definiert mit sourcePOIId, aber nicht in map-service.ts implementiert) |
| 1512 | ‚õî | Location/POI | application | Tile Content Panel Integration: POIs des aktuellen Party-Tiles anzeigen | hoch | Ja | #1509, #1510, #1511, #2300 | POI.md#tile-content-panel, SessionRunner.md#tile-content-panel, Map-Navigation.md#travel-state-bei-map-wechsel | [neu] src/application/session-runner/panels/TileContentPanel.ts |
| 1513 | ‚õî | Location/POI | application | POI Icon Rendering auf Map (Icon-Mapping nach POI-Typ) | hoch | Ja | #802, #804, #1509 | POI.md#map-darstellung, Map-Feature.md#overworld-rendering | [√§ndern] src/application/session-runner/panels/map-canvas.ts:renderTile() |
| 1514 | ‚õî | Location/POI | core | Height-Feld f√ºr POI-Fernsicht (Sichtbarkeit √ºber Tile-Grenze) | mittel | Nein | #843, #1500 | POI.md#height-feld-post-mvp, Map-Feature.md#poi-fernsicht, Map-Feature.md#visibility-system-post-mvp | [neu] src/core/schemas/poi.ts |
| 1515 | ‚õî | Location/POI | core | glowsAtNight-Feld f√ºr nachtleuchtende POIs | mittel | Nein | #843, #1500 | POI.md#nachtleuchtende-pois-glowsatnight-post-mvp, Map-Feature.md#poi-fernsicht, Map-Feature.md#visibility-system-post-mvp | [neu] src/core/schemas/poi.ts |
| 1516 | ‚úÖ | Location/POI | features | POI EntityRegistry Integration: 'location'/'poi' als Entity-Typ (bereits vorhanden) | hoch | Ja | - | POI.md#schema, EntityRegistry.md#port-interface, EntityRegistry.md#entity-type-mapping | src/core/types/common.ts:20-21, src/core/schemas/common.ts:49-50 |
| 1600 | ‚úÖ | Item | core | Item Schema mit allen Feldern (id, name, weight, category, tags, value, rarity, isRation, stackable, damage, armorClass, properties, description) | hoch | Ja | - | Item.md#schema, EntityRegistry.md#entity-type-mapping | src/core/schemas/item.ts:66-126 |
| 1601 | üìã | Item | core | ItemCategory Type (weapon, armor, shield, consumable, gear, treasure, currency) | hoch | Ja | #1600 | Item.md#schema | src/core/schemas/item.ts:23-33 |
| 1602 | üìã | Item | core | Rarity Type (common, uncommon, rare, very_rare, legendary, artifact) | hoch | Ja | #1600 | Item.md#schema, Loot-Feature.md#magische-items | src/core/schemas/item.ts:42-51 |
| 1603 | ‚úÖ | Item | core | InventorySlot Schema (itemId, quantity, equipped) | hoch | Ja | #1600 | Item.md#verwendung-in-anderen-features, Inventory-System.md#schemas | src/core/schemas/item.ts:136-147 |
| 1604 | üìã | Item | core | Helper-Funktionen (isStackable, isCurrency, calculateTotalValue, calculateTotalWeight) | hoch | Ja | #1600 | Item.md#schema, Inventory-System.md#encumbrance | src/core/schemas/item.ts:188-222 |
| 1605 | ‚õî | Item | core | EntityRegistry Integration: 'item' als Entity-Typ (bereits vorhanden) | hoch | Ja | #1600, #2801 | Item.md, EntityRegistry.md#entity-type-mapping | src/core/types/common.ts:18, src/core/types/common.ts:105 |
| 1606 | ‚¨ú | Item | core | Item CRUD Events definieren und in EventPayloadMap registrieren (item:created, item:updated, item:deleted) | hoch | Ja | #1600 | Item.md#events, Events-Catalog.md#item-events | src/core/events/domain-events.ts [√§ndern - EventTypes hinzuf√ºgen], src/core/events/domain-events.ts [√§ndern - Payload-Interfaces hinzuf√ºgen], src/core/events/domain-events.ts [√§ndern - EventPayloadMap erweitern] |
| 1607 | ‚õî | Item | features | Item Query Functions implementieren: getItemsByTags (Loot-Matching), getItemsByCategory (Inventar-Filterung), getItemsUpToRarity (Magic-Item-Generierung) | hoch | Ja | #1600, #1605, #2804 | Item.md#queries, EntityRegistry.md#querying, Loot-Feature.md#item-auswahl-gewichtete-wahrscheinlichkeit | src/features/item/item-queries.ts [neu], src/features/item/index.ts [neu - exports] |
| 1608 | üìã | Item | infrastructure | Standard D&D Currency Items als Preset (copper-piece, silver-piece, gold-piece, platinum-piece) | hoch | Ja | #1600 | Item.md#currency-category-currency, Inventory-System.md#waehrungs-items | presets/items/base-items.json:1-41 |
| 1609 | ‚õî | Item | features | Item Feature/Orchestrator mit CRUD-Logik: createItem, updateItem, deleteItem mit Event-Publishing und EntityRegistry-Integration | hoch | Ja | #1600, #1606 | Item.md, Inventory-System.md#gm-quick-actions, Architecture.md#feature-layer | src/features/item/orchestrator.ts [neu], src/features/item/types.ts [neu - ItemFeaturePort], src/features/item/item-service.ts [neu - Business-Logik], src/features/item/item-store.ts [neu - State Management], src/features/item/index.ts [neu - createItemOrchestrator factory] |
| 1700 | ‚¨ú | Terrain | core | TerrainDefinition Schema (id, name, movementCost, encounterModifier, nativeCreatures, weatherRanges, displayColor, icon, description, requiresBoat, blocksMounted, blocksCarriage) | hoch | Ja | - | Terrain.md#schema, Terrain.md#terrainweatherranges, EntityRegistry.md#entity-types | src/core/schemas/terrain.ts:terrainDefinitionSchema (Zeile 21-106), presets/terrains/base-terrains.json, src/infrastructure/vault/terrain-registry.ts:DEFAULT_TERRAINS |
| 1702 | ‚õî | Terrain | core | TerrainWeatherRanges und WeatherRange Schemas (Wetter-Ranges mit temperature, wind, precipChance, precipIntensity, fogChance jeweils mit min/average/max Werten) | hoch | Ja | #1700 | Terrain.md#schema, Weather-System.md#tile-basierte-wetter-ranges | src/core/schemas/weather.ts:terrainWeatherRangesSchema (Zeile 22-47), src/core/schemas/weather.ts:weatherRangeSchema |
| 1703 | ‚õî | Terrain | infrastructure | Default-Terrain Presets (8 Basis-Terrains: road, plains, forest, hills, mountains, swamp, desert, water mit vollst√§ndigen movementCost/encounterMod/Transport/weatherRanges Werten) | hoch | Ja | #1700, #1702 | Terrain.md#default-terrains, Terrain.md#schema, Terrain.md#sichtweite-bei-encounter-generierung | presets/terrains/base-terrains.json, src/infrastructure/vault/terrain-registry.ts:DEFAULT_TERRAINS (Zeile 21-84) |
| 1704 | ‚õî | Terrain | features | onCreatureTerrainChanged Event-Handler: Synchronisiere creature.terrainAffinities ‚Üí terrain.nativeCreatures (entfernte Terrains aus nativeCreatures, neue hinzuf√ºgen) | hoch | Ja | #1700, #1202, #1709 | Terrain.md#auto-sync-mechanismus, Creature.md#auto-sync-verhalten | src/features/terrain/auto-sync.ts:onCreatureTerrainChanged() [neu], src/core/events/terrain.ts [neu - terrain:creature-sync-needed Event] |
| 1705 | ‚õî | Terrain | features | onTerrainNativeCreaturesChanged Event-Handler: Synchronisiere terrain.nativeCreatures ‚Üí creature.terrainAffinities (umgekehrte Sync-Richtung zu #1704) | hoch | Ja | #1700, #1202, #1709 | Terrain.md#auto-sync-mechanismus, Creature.md#auto-sync-verhalten | src/features/terrain/auto-sync.ts:onTerrainNativeCreaturesChanged() [neu], src/core/events/terrain.ts [neu - terrain:native-creatures-changed Event] |
| 1706 | ‚õî | Terrain | features | Bidirektionale Konsistenz: creature.terrainAffinities ‚Üî terrain.nativeCreatures (Integration von #1704 + #1705) | hoch | Ja | #1700, #1202, #1704, #1705 | Terrain.md#bidirektionale-beziehung, Creature.md#bidirektionale-beziehung | src/core/schemas/terrain.ts:terrainDefinitionSchema [√§ndern - nativeCreatures Feld hinzuf√ºgen], src/features/terrain/auto-sync.ts:syncCreatureToTerrain() [neu], src/features/terrain/auto-sync.ts:syncTerrainToCreature() [neu] |
| 1707 | ‚õî | Terrain | features | Custom Terrains: User-erstellte Terrain-Definitionen via Library CRUD (Merging mit Bundled Presets, ID-Override) | hoch | Ja | #1700, #1711 | Terrain.md#custom-terrains-mvp, Terrain.md#storage, Terrain.md#verwendung-auf-map | src/infrastructure/vault/terrain-registry.ts:createTerrainRegistry() (Zeile 94-120) [√§ndern - User-Storage implementieren], src/features/terrain/orchestrator.ts:createTerrain() [neu], src/features/terrain/orchestrator.ts:updateTerrain() [neu] |
| 1708 | üìã | Terrain | core | EntityRegistry Integration: 'terrain' als Entity-Typ | hoch | Ja | - | Terrain.md#schema, EntityRegistry.md#entity-types, Core.md#entity-id-types | src/core/types/common.ts:EntityType (Zeile 23), src/core/types/common.ts:TerrainId (Zeile 110) |
| 1709 | ‚õî | Terrain | core | Terrain CRUD Events (terrain:created, terrain:updated, terrain:deleted) | hoch | Ja | #1708 | Terrain.md, Events-Catalog.md#terrain-events, Conventions.md#event-naming | src/core/events/terrain.ts [neu - EventCatalog Definitionen], docs/architecture/Events-Catalog.md [√§ndern - terrain:* Events hinzuf√ºgen] |
| 1710 | ‚õî | Terrain | infrastructure | Terrain Storage: Bundled Presets vs User Custom Terrains | hoch | Ja | #1700, #1703 | Terrain.md#storage, Terrain.md#default-terrains, Infrastructure.md#presets | src/infrastructure/vault/terrain-registry.ts:loadBundledTerrains(), presets/terrains/base-terrains.json (Phase 1: Plugin-bundled, Phase 2: User-Storage ist Post-MVP #1707) |
| 1711 | ‚õî | Terrain | features | Terrain Feature/Orchestrator mit CRUD-Logik | hoch | Ja | #1700, #1709, #1710 | Terrain.md, Features.md | src/features/terrain/orchestrator.ts:createTerrainOrchestrator() [neu], src/features/terrain/types.ts:TerrainFeaturePort [neu], src/features/terrain/terrain-service.ts [neu], src/features/terrain/terrain-store.ts [neu], src/features/terrain/index.ts [neu - exports] |
| 1712 | ‚õî | Terrain | features | movementCost Integration in Travel-System | hoch | Ja | #1700 | Terrain.md#travel-system, Terrain.md#verwendung-in-anderen-features, Travel-System.md#speed-berechnung | src/features/travel/travel-service.ts:getMovementCost() (Zeile 613, 615, 756, 760), src/features/map/map-service.ts:getTerrainMovementCost() (Zeile 225-234) |
| 1713 | ‚õî | Terrain | features | weatherRanges Integration in Weather-System | hoch | Ja | #1702, #1700 | Terrain.md#weather-system, Terrain.md#verwendung-in-anderen-features, Weather-System.md#tile-basierte-wetter-ranges | src/features/weather/weather-service.ts:getTileWeatherRanges() (Zeile 77-82), src/features/weather/weather-utils.ts:generateFromRange() (Zeile 182, 220) |
| 1714 | ‚õî | Terrain | features | nativeCreatures Integration in Encounter-System: getEligibleCreaturesFromTerrain() nutzt terrain.nativeCreatures f√ºr schnelles Filtering | hoch | Ja | #1706 | Terrain.md#encounter-system, Terrain.md#creature-terrain-auto-sync, Encounter-System.md#tile-eligibility | src/features/encounter/encounter-utils.ts:filterEligibleCreatures() (Zeile 52-54) [√§ndern - terrain.nativeCreatures nutzen statt nur creature.terrainAffinities], src/features/encounter/encounter-utils.ts:getEligibleCreaturesFromTerrain() [neu] |
| 1715 | ‚õî | Terrain | application | Terrain Icons f√ºr visuelle Darstellung | niedrig | Nein | #1700 | Terrain.md#prioritaet, Terrain.md#schema | src/core/schemas/terrain.ts:terrainDefinitionSchema [√§ndern - icon Feld bereits vorhanden, nur UI fehlt] (Post-MVP) |
| 1800 | ‚¨ú | Path | core | PathDefinition Schema (id, mapId, pathType, name, waypoints, movement, encounterModifier, displayStyle) | hoch | Nein | - | Path.md#schema, Map.md#entity-beziehungen | src/core/schemas/path.ts:pathDefinitionSchema [neu], src/core/schemas/path.ts:PathDefinition [neu] |
| 1801 | ‚õî | Path | core | PathType Enum (road, river, ravine, cliff, trail) | hoch | Nein | #1800 | Path.md#schema | src/core/schemas/path.ts:pathTypeSchema [neu], src/core/schemas/path.ts:PathType [neu] |
| 1802 | ‚õî | Path | core | PathMovement Schema (defaultModifier, transportModifiers, blocksMovement, requiresTransport) | hoch | Nein | #1800 | Path.md#pathmovement, Travel-System.md#pfad-modifikation-post-mvp | src/core/schemas/path.ts:pathMovementSchema [neu], src/core/schemas/path.ts:PathMovement [neu] |
| 1803 | ‚õî | Path | core | PathEncounterModifier Schema (creaturePool, chanceModifier) | hoch | Nein | #1200, #1800 | Path.md#pathencountermodifier, Encounter-System.md#pfad-basierte-creature-pools-post-mvp, Creature.md#schema | src/core/schemas/path.ts:pathEncounterModifierSchema [neu], src/core/schemas/path.ts:PathEncounterModifier [neu] |
| 1804 | ‚õî | Path | core | PathDisplayStyle Schema (color, width, pattern, icon) | hoch | Nein | #1800 | Path.md#pathdisplaystyle | src/core/schemas/path.ts:pathDisplayStyleSchema [neu], src/core/schemas/path.ts:PathDisplayStyle [neu] |
| 1805 | ‚õî | Path | core | TilePathInfo Schema (pathId, connections) | hoch | Nein | #801, #1800 | Path.md#tilepathinfo, Map.md#schema, Map-Feature.md#overworldtile | src/core/schemas/path.ts:tilePathInfoSchema [neu], src/core/schemas/path.ts:TilePathInfo [neu] |
| 1806 | ‚õî | Path | core | PathDirectionality Schema (enabled, forwardSpeedModifier, backwardSpeedModifier) Post-MVP | niedrig | Nein | #1800 | Path.md#pathdirectionality-post-mvp | src/core/schemas/path.ts:pathDirectionalitySchema [neu], src/core/schemas/path.ts:PathDirectionality [neu] |
| 1807 | ‚õî | Path | core | PathEnvironmentModifier Schema (lightingOverride, weatherModifier) Post-MVP | niedrig | Nein | #110, #1800 | Path.md#pathenvironmentmodifier-post-mvp, Weather-System.md#weather-state | src/core/schemas/path.ts:pathEnvironmentModifierSchema [neu], src/core/schemas/path.ts:PathEnvironmentModifier [neu] |
| 1808 | ‚õî | Path | infrastructure | Default-Presets f√ºr 5 PathTypes (road, trail, river, ravine, cliff) | hoch | Nein | #1800, #1801, #1802, #1803, #1804 | Path.md#default-presets | presets/paths/base-paths.json [neu] |
| 1809 | ‚õî | Path | features | Bidirektionale Tile-Synchronisation: onPathWaypointsChanged Handler implementieren (aktualisiert OverworldTile.paths[] bei Waypoint-√Ñnderungen) | hoch | Nein | #801, #1800, #1805, #1810, #1820 | Path.md#bidirektionale-tile-synchronisation, Map-Feature.md#overworldtile | src/features/path/path-tile-sync.ts:onPathWaypointsChanged() [neu], src/features/path/path-tile-sync.ts:syncTilePaths() [neu] |
| 1810 | ‚õî | Path | core | OverworldTile.paths[] Integration (TilePathInfo Array im Tile Schema) | hoch | Nein | #801, #1805 | Path.md#beziehung, Map.md#schema, Map-Feature.md#overworldtile | src/core/schemas/map.ts:overworldTileSchema [√§ndern - paths Feld hinzuf√ºgen] |
| 1811 | ‚õî | Path | features | calculatePathModifier Funktion f√ºr Travel-System | hoch | Nein | #3, #5, #1802, #1810, #1817, #1820 | Path.md#travel-system, Travel-System.md#pfad-modifikation-post-mvp, Travel-System.md#speed-berechnung | src/features/travel/path-utils.ts:calculatePathModifier() [neu] |
| 1812 | ‚õî | Path | core | PATH_BLOCKED und TRANSPORT_REQUIRED Error-Codes f√ºr Pfad-Barrieren definieren | hoch | Nein | #1811 | Path.md#travel-system, Travel-System.md#pfad-modifikation-post-mvp, Error-Handling.md | src/core/types/common.ts:createError() [bereits vorhanden], Error-Codes als Konstanten dokumentieren |
| 1813 | ‚õî | Path | features | Travel Speed-Formel mit Pfad-Multiplikator erweitern | hoch | Nein | #3, #5, #1811 | Path.md#travel-system, Travel-System.md#speed-berechnung, Travel-System.md#pfad-modifikation-post-mvp | src/features/travel/travel-service.ts:calculateSegmentTime() [√§ndern - Path-Multiplikator integrieren] |
| 1814 | ‚õî | Path | features | getEligibleCreatures mit Path-Creature-Pool Integration | hoch | Nein | #200, #1803, #1810, #1817, #1820 | Path.md#encounter-system, Encounter-System.md#pfad-basierte-creature-pools-post-mvp, Encounter-System.md#tile-eligibility, Terrain.md#verwendung-in-anderen-features | src/features/encounter/encounter-utils.ts:filterEligibleCreatures() [√§ndern - Path-Creatures hinzuf√ºgen] |
| 1815 | ‚õî | Path | core | Path CRUD Events (create/update/delete-requested + created/updated/deleted) | hoch | Nein | #1800 | Path.md#events, Events-Catalog.md#path-post-mvp | src/core/events/domain-events.ts:EventTypes [√§ndern - PATH_* Events hinzuf√ºgen], src/core/events/domain-events.ts:PathEventPayloads [neu] |
| 1816 | ‚õî | Path | core | path:state-changed Event f√ºr Map-Sync | hoch | Nein | #1815 | Path.md#events, Events-Catalog.md#path-post-mvp, Map-Feature.md#events | src/core/events/domain-events.ts:EventTypes.PATH_STATE_CHANGED [neu], src/core/events/domain-events.ts:PathStateChangedPayload [neu] |
| 1817 | ‚õî | Path | features | getPathsOnMap Query-Funktion implementieren (findet alle Pfade auf einer Map via EntityRegistry) | hoch | Nein | #1800, #1820, #1821, #2804 | Path.md#queries, EntityRegistry.md#querying | src/features/path/path-queries.ts:getPathsOnMap() [neu] |
| 1818 | ‚õî | Path | features | getPathsAtTile Query-Funktion implementieren (findet alle Pfade die durch ein Tile verlaufen) | hoch | Nein | #1800, #1810, #1820, #1821, #2804 | Path.md#queries, EntityRegistry.md#querying | src/features/path/path-queries.ts:getPathsAtTile() [neu] |
| 1819 | ‚õî | Path | features | getPathBetween Query-Funktion (findet Pfad zwischen zwei Tiles) | hoch | Nein | #1818, #1820, #1821 | Path.md#queries | src/features/path/path-queries.ts:getPathBetween() [neu] |
| 1820 | ‚õî | Path | features | Path Feature/Orchestrator mit CRUD-Logik | hoch | Nein | #1800, #1815, #1821 | Path.md, Features.md#feature-communication, EventBus.md | src/features/path/orchestrator.ts:createPathOrchestrator() [neu], src/features/path/path-service.ts [neu], src/features/path/path-store.ts [neu], src/features/path/types.ts:PathFeaturePort [neu], src/features/path/index.ts [neu - exports] |
| 1821 | ‚õî | Path | core | Path EntityRegistry Integration: 'path' als Entity-Typ | hoch | Nein | #1800, #2800, #2801 | Path.md, EntityRegistry.md#entity-type-mapping, EntityRegistry.md#neue-entity-typen-mvp | src/core/schemas/common.ts:entityTypeSchema [√§ndern - 'path' hinzuf√ºgen], src/core/types/common.ts:EntityType [√§ndern - 'path' hinzuf√ºgen], src/core/types/common.ts:PathId [neu] |
| 1822 | ‚õî | Path | application | Cartographer Path-Tool: UI zum Zeichnen von Pfaden auf Map (Waypoint-Editing, Path-Type-Auswahl) | mittel | Nein | #1800, #1820, #1821, #2509 | Path.md, Cartographer.md#path-tool-overland-post-mvp, Cartographer.md#state-management | src/application/cartographer/tools/PathTool.svelte [neu] |
| 1823 | ‚õî | Path | application | Cartographer: Path-Properties Panel f√ºr Pfad-Bearbeitung (Movement-Modifiers, Encounter-Pools, Display-Style) | mittel | Nein | #1820, #1821, #1822 | Path.md, Cartographer.md#path-tool-overland-post-mvp | src/application/cartographer/panels/PathPropertiesPanel.svelte [neu] |
| 1900 | ‚õî | Map-Navigation | features | Map-Navigation: map:navigate-requested Event Handler implementieren | hoch | Ja | #1, #820, #1511 | Map-Navigation.md#navigation-events, POI.md#map-navigation, Map-Feature.md#events, Events-Catalog.md#map | src/features/map/map-navigation.ts:handleNavigateRequested() [neu], src/features/map/map-service.ts:setupEventHandlers() [√§ndern], src/core/events/domain-events.ts:141 (Event existiert) |
| 1901 | ‚õî | Map-Navigation | features | Map-Navigation: Travel-State Validierung implementieren (idle/planning erlaubt) | hoch | Ja | #1900, #1 | Map-Navigation.md#travel-state-bei-map-wechsel, Travel-System.md#state-machine | src/features/map/map-navigation.ts:validateTravelState() [neu], src/features/travel/types.ts:TravelStatus |
| 1902 | ‚õî | Map-Navigation | features | Map-Navigation: Spawn-Position Bestimmung implementieren (spawnPosition/bidirectional/default) | hoch | Ja | #800, #801, #1501, #1900 | Map-Navigation.md#spawn-position-bestimmung, POI.md#entrancepoi, Map.md#basemap, Map-Feature.md#basis-map | src/features/map/map-navigation.ts:determineSpawnPosition() [neu], src/core/schemas/poi.ts:EntrancePOI [neu], src/core/schemas/map.ts:OverworldMap.defaultSpawnPoint |
| 1903 | ‚õî | Map-Navigation | application | Navigation-Dialog: Mehrere Eing√§nge zur Auswahl anzeigen | mittel | Nein | #1902, #1512, #1509 | Map-Navigation.md#spawn-position-bestimmung, Map-Navigation.md#multi-poi-tiles, POI.md#queries | src/application/session-runner/panels/NavigationDialog.svelte [neu], src/features/map/map-navigation.ts:getEntrancesForMap() [neu] |
| 1904 | ‚õî | Map-Navigation | features | Map-Navigation: Journal-Entry automatisch bei Betreten einer Map erstellen | hoch | Ja | #901, #1900, #2200, #2207 | Map-Navigation.md#journal-entries-fuer-tracking, Journal.md#auto-generierung, Time-System.md#zeit-operationen | src/features/map/map-navigation.ts:createArrivalJournalEntry() [neu], src/core/events/domain-events.ts:worldevents:journal-added |
| 1905 | ‚õî | Map-Navigation | features | Map-Navigation: map:navigated Event nach erfolgreicher Navigation publizieren | hoch | Ja | #1900 | Map-Navigation.md#navigation-events, Map-Feature.md#events, Events-Catalog.md#map | src/features/map/map-navigation.ts:publishNavigated() [neu], src/core/events/domain-events.ts:147 (Event existiert) |
| 1906 | ‚õî | Map-Navigation | application | Betreten-Button UI-Validierung: disabled mit Tooltip wenn Travel aktiv | hoch | Ja | #1901, #1512 | Map-Navigation.md#travel-state-bei-map-wechsel, POI.md#tile-content-panel, SessionRunner.md#travel-integration | src/application/session-runner/panels/TileContentPanel.ts [neu], src/application/session-runner/panels/TileContentPanel.svelte [neu] |
| 1907 | ‚õî | Map-Navigation | features | Map-Navigation: Exit-POI Support (Party verl√§sst Map via Exit-Tile) | hoch | Ja | #1900, #1501 | Map-Navigation.md#navigation-via-exit-poi, POI.md#entrancepoi, Map-Navigation.md#position-nach-rueckkehr | src/features/map/map-navigation.ts:handleNavigateRequested() [√§ndern - Exit-POI support] |
| 2100 | ‚¨ú | Shop | core | ShopDefinition Schema mit Zod implementieren (id, name, type, locationId?, inventory, priceModifier?, sellModifier?, description?, gmNotes?) | mittel | Nein | #1600, #2703 | Shop.md#schema, EntityRegistry.md#entity-type-mapping, Core.md#branded-types | [neu] src/core/schemas/shop.ts |
| 2101 | ‚õî | Shop | core | ShopType Zod-Enum definieren (general | blacksmith | alchemist | magic | tavern | stable | custom) | mittel | Nein | #2100 | Shop.md#schema | [neu] src/core/schemas/shop.ts |
| 2102 | ‚õî | Shop | core | ShopInventoryEntry Schema mit Zod (itemId, price?: {amount, currency}, quantity?: number, available: boolean) | mittel | Nein | #2100, #1600 | Shop.md#shopinventoryentry, Item.md#schema | [neu] src/core/schemas/shop.ts |
| 2103 | ‚õî | Shop | core | Currency Type als Zod-Enum (cp | sp | ep | gp | pp) in item.ts oder common.ts - harmonisieren mit existierendem CurrencyId | mittel | Nein | #1600 | Shop.md#shopinventoryentry, Item.md#currency-category-currency, Inventory-System.md#waehrungs-items | src/core/schemas/item.ts:CurrencyId (existiert als 'copper-piece' etc., nicht als 'cp' etc.) |
| 2104 | üî∂ | Shop | features | Shop EntityRegistry Integration: 'shop' als Entity-Typ | mittel | Nein | #2100, #2800, #2801 | Shop.md#schema, EntityRegistry.md#entity-type-mapping, EntityRegistry.md#neue-entity-typen-mvp | src/core/schemas/common.ts:entityTypeSchema (Zeile 55) |
| 2105 | ‚õî | Shop | core | Shop CRUD Events als Zod-Schemas definieren (shop:created, shop:updated, shop:deleted) in domain-events.ts | mittel | Nein | #2100, #2104 | Shop.md#events, Events-Catalog.md | [neu] src/core/events/domain-events.ts |
| 2106 | ‚õî | Shop | core | Shop Interaction Events als Zod-Schemas (shop:opened, shop:item-purchased, shop:item-sold, shop:closed) in domain-events.ts | mittel | Nein | #2105 | Shop.md#events, Events-Catalog.md, SessionRunner.md | [neu] src/core/events/domain-events.ts |
| 2107 | ‚õî | Shop | features | getShop(shopId): Result<ShopDefinition, AppError> Query-Funktion implementieren | mittel | Nein | #2100, #2104, #2800 | Shop.md#queries, EntityRegistry.md#port-interface | [neu] src/features/shop/shop-queries.ts |
| 2108 | ‚õî | Shop | features | getShopsByLocation(locationId): Result<ShopDefinition[], AppError> Query-Funktion implementieren | mittel | Nein | #2100, #2104, #2800, #2804 | Shop.md#queries, EntityRegistry.md#querying, POI.md#schema | [neu] src/features/shop/shop-queries.ts |
| 2109 | ‚õî | Shop | features | getShopsByType(type): Result<ShopDefinition[], AppError> Query-Funktion implementieren | mittel | Nein | #2101, #2104, #2800, #2804 | Shop.md#queries, EntityRegistry.md#querying | [neu] src/features/shop/shop-queries.ts |
| 2110 | ‚õî | Shop | features | getShopInventory(shopId): Result<ResolvedInventoryEntry[], AppError> mit aufgel√∂sten Items implementieren | mittel | Nein | #1600, #1607, #2107, #3164 | Shop.md#queries, Item.md#queries | [neu] src/features/shop/shop-queries.ts:getShopInventory() |
| 2111 | ‚õî | Shop | features | calculateBuyPrice(shop, entry): number implementieren (Entry-Preis oder Item-Base-Preis + shop.priceModifier) | mittel | Nein | #2102, #1600 | Shop.md#preis-berechnung, Item.md#schema | [neu] src/features/shop/shop-pricing.ts:calculateBuyPrice() |
| 2112 | ‚õî | Shop | features | calculateSellPrice(shop, itemId): number implementieren (Item-Base-Preis * shop.sellModifier, default 0.5) | mittel | Nein | #2111, #1600 | Shop.md#preis-berechnung, Item.md#schema | [neu] src/features/shop/shop-pricing.ts:calculateSellPrice() |
| 2113 | ‚õî | Shop | features | Shop-Feature: createShopOrchestrator() Factory mit CRUD-Logik (shop-service, shop-store, types, index) | mittel | Nein | #2100, #2105, #2107, #2800, #3166 | Shop.md#verwendung, EntityRegistry.md#bootstrapping, Features.md | [neu] src/features/shop/orchestrator.ts:createShopOrchestrator(), [neu] src/features/shop/shop-service.ts, [neu] src/features/shop/shop-store.ts, [neu] src/features/shop/types.ts, [neu] src/features/shop/index.ts |
| 2114 | ‚õî | Shop | application | ShopPanel.svelte im SessionRunner (Inventar anzeigen, durchsuchen, filtern) | mittel | Nein | #2113, #2110 | Shop.md#verwendung, SessionRunner.md, DetailView.md | [neu] src/application/session-runner/panels/ShopPanel.svelte |
| 2115 | ‚õî | Shop | application | Kauf-Funktion in ShopPanel: handleBuyItem() + shop-service.purchaseItem() - Party-Gold abziehen, shop:item-purchased Event emittieren | mittel | Nein | #612, #615, #2111, #2114 | Shop.md#verwendung, Inventory-System.md#shop-integration-mvp, Character-System.md#character-schema | [neu] src/application/session-runner/panels/ShopPanel.svelte:handleBuyItem(), src/features/shop/shop-service.ts:purchaseItem() [neu] |
| 2116 | ‚õî | Shop | application | Verkauf-Funktion in ShopPanel: handleSellItem() + shop-service.sellItem() - Party-Gold erh√∂hen, shop:item-sold Event emittieren | mittel | Nein | #613, #614, #2112, #2114 | Shop.md#verwendung, Inventory-System.md#shop-integration-mvp, Character-System.md#character-schema | [neu] src/application/session-runner/panels/ShopPanel.svelte:handleSellItem(), src/features/shop/shop-service.ts:sellItem() [neu] |
| 2117 | ‚õî | Shop | application | GM-Verf√ºgbarkeits-Anpassung in ShopPanel: toggleAvailability() f√ºr quantity und available | niedrig | Nein | #2114, #2113 | Shop.md#verwendung, SessionRunner.md | [neu] src/application/session-runner/panels/ShopPanel.svelte:toggleAvailability() |
| 2118 | ‚õî | Shop | application | Shop CRUD UI in Library: ShopView.svelte f√ºr Erstellen, Bearbeiten, L√∂schen | mittel | Nein | #2105, #2113 | Shop.md#verwendung, Library.md | [neu] src/application/library/views/ShopView.svelte |
| 2119 | ‚õî | Shop | application | Shop-Inventar-Editor in ShopView: Items aus Library w√§hlen, Preise/Mengen festlegen | mittel | Nein | #1607, #2118 | Shop.md#verwendung, Library.md, Item.md#queries | [neu] src/application/library/views/ShopView.svelte:InventoryEditor |
| 2120 | ‚õî | Shop | application | Location-Zuordnung UI in ShopView: LocationSelector-Komponente (optional) | niedrig | Nein | #2118, #1516 | Shop.md#verwendung, Library.md, POI.md#schema | [neu] src/application/library/views/ShopView.svelte:LocationSelector |
| 2121 | ‚õî | Shop | features | Restock-System (Post-MVP): restockDays/restockQuantity in Schema + restock-service.ts mit Time-System Integration | niedrig | Nein | #2102, #2113 | Shop.md#shopinventoryentry, Time-System.md | [neu] src/core/schemas/shop.ts:ShopInventoryEntry.restockDays, [neu] src/features/shop/restock-service.ts |
| 2122 | ‚õî | Shop | core | NPC-H√§ndler Integration (Post-MVP): npcOwnerId?: EntityId<'npc'> zu ShopDefinition hinzuf√ºgen | niedrig | Nein | #1315, #2100 | Shop.md#prioritaet, NPC-System.md#npc-schema, EntityRegistry.md#neue-entity-typen-mvp | [neu] src/core/schemas/shop.ts:ShopDefinition.npcOwnerId |
| 2200 | üìã | Journal | core | JournalEntry Schema implementieren (id, timestamp, category, source, content, relatedEntities) | hoch | Ja | #901 | Journal.md#schema, ../architecture/EntityRegistry.md | src/core/schemas/journal.ts:journalEntrySchema, src/core/schemas/index.ts |
| 2201 | üìã | Journal | core | JournalCategory Enum (quest, encounter, travel, discovery, worldevent, session, note) | hoch | Ja | #2200 | Journal.md#schema | src/core/schemas/journal.ts:journalCategorySchema |
| 2202 | üìã | Journal | core | JournalSource Enum (auto, gm, player) | hoch | Ja | #2200 | Journal.md#schema | src/core/schemas/journal.ts:journalSourceSchema |
| 2203 | üìã | Journal | core | JournalEntityRef Schema (entityType, entityId, displayName) | hoch | Ja | #2200 | Journal.md#schema, ../architecture/EntityRegistry.md | src/core/schemas/journal.ts:journalEntityRefSchema |
| 2204 | ‚¨ú | Journal | core | Session Schema (id, name, startTime, endTime, summary, stats) | mittel | Nein | #901, #902 | Journal.md#session-management, ../features/Time-System.md#schemas | [neu] src/core/schemas/journal.ts:Session, [neu] src/core/schemas/journal.ts:SessionStats |
| 2205 | ‚õî | Journal | features | Auto-Generierung: Quest-Events zu Journal-Eintr√§gen (discovered, activated, completed, failed) | hoch | Ja | #414, #415, #417, #418, #901, #907, #2200, #2201, #2209 | Journal.md#auto-generierung, Journal.md#event-zu-journal-mapping, ../domain/Quest.md#events, ../features/Quest-System.md | [neu] src/features/journal/auto-generator.ts:handleQuestEvents(), src/features/journal/templates.ts:QuestEventTemplate [neu] |
| 2206 | ‚õî | Journal | features | Auto-Generierung: Encounter-Events zu Journal-Eintr√§gen (started, resolved) | hoch | Ja | #901, #907, #2200, #2201, #2209 | Journal.md#auto-generierung, Journal.md#event-zu-journal-mapping, ../features/Encounter-System.md#events | [neu] src/features/journal/auto-generator.ts:handleEncounterEvents(), src/features/journal/templates.ts:EncounterEventTemplate [neu] |
| 2207 | ‚õî | Journal | features | Auto-Generierung: Travel-Events zu Journal-Eintr√§gen (completed, departed) | mittel | Nein | #12, #901, #907, #2200, #2201, #2209 | Journal.md#auto-generierung, Journal.md#event-zu-journal-mapping, ../features/Travel-System.md#event-flow | [neu] src/features/journal/auto-generator.ts:handleTravelEvents(), src/features/journal/templates.ts:TravelEventTemplate [neu] |
| 2208 | ‚õî | Journal | features | Auto-Generierung: WorldEvent-Events zu Journal-Eintr√§gen (weather-changed, faction-poi-claimed) | niedrig | Nein | #110, #901, #907, #1414, #2200, #2201, #2209 | Journal.md#auto-generierung, Journal.md#event-zu-journal-mapping, ../features/Weather-System.md#event-flow, ../domain/Faction.md#events | [neu] src/features/journal/auto-generator.ts:handleWorldEvents(), src/features/journal/templates.ts:WorldEventTemplate [neu] |
| 2209 | ‚õî | Journal | features | Event-zu-Journal Mapping Tabelle implementieren (getJournalTemplate) | hoch | Ja | #901, #2200, #2201, #2203 | Journal.md#event-zu-journal-mapping, Journal.md#generierungs-logik | [neu] src/features/journal/auto-generator.ts:getJournalTemplate(), src/features/journal/templates.ts:JournalTemplate [neu] |
| 2210 | ‚õî | Journal | core | JournalSettings Schema (autoLog-Optionen, encounterDetailLevel) | niedrig | Nein | #2200 | Journal.md#konfigurations-optionen | [neu] src/core/schemas/journal.ts:JournalSettings, [neu] src/core/schemas/journal.ts:AutoLogSettings |
| 2211 | ‚õî | Journal | features | encounterDetailLevel Konfiguration (minimal, standard, detailed) | niedrig | Nein | #2210 | Journal.md#konfigurations-optionen | [neu] src/features/journal/auto-generator.ts:formatEncounterDetails() |
| 2212 | ‚õî | Journal | features | Manuelle Notizen: GM Quick-Note Funktion | hoch | Ja | #2200, #2228 | Journal.md#prioritaet, Journal.md#uebersicht, ../application/SessionRunner.md | [neu] src/features/journal/orchestrator.ts:createQuickNote() |
| 2213 | ‚õî | Journal | application | Entity-Linking: Clickable References in Journal-Eintr√§gen | hoch | Ja | #2203, #2228 | Journal.md#prioritaet, Journal.md#verwendung-in-anderen-features, ../application/DetailView.md | [neu] src/application/session-runner/panels/JournalPanel.svelte:EntityLink (Component), [neu] src/application/session-runner/panels/JournalPanel.svelte:handleEntityClick() |
| 2214 | ‚õî | Journal | features | Session-Management: Session starten/beenden Workflow | mittel | Nein | #901, #2204, #2228 | Journal.md#session-workflow, Journal.md#session-management | [neu] src/features/journal/orchestrator.ts:startSession(), [neu] src/features/journal/orchestrator.ts:endSession() |
| 2215 | ‚õî | Journal | features | Session Stats Tracking (encountersCompleted, questsProgressed, distanceTraveled, inGameTimeElapsed) | mittel | Nein | #901, #2204, #2214 | Journal.md#session-management, ../features/Time-System.md#schemas | [neu] src/features/journal/orchestrator.ts:updateSessionStats(), src/features/journal/types.ts:SessionState [neu] |
| 2216 | ‚õî | Journal | core | journal:entry-created Event publizieren | hoch | Ja | #2200, #2228 | Journal.md#events, ../architecture/Events-Catalog.md#journal | [neu] src/core/events/domain-events.ts:JOURNAL_ENTRY_CREATED, [neu] src/core/events/domain-events.ts:JournalEntryCreatedPayload, src/features/journal/orchestrator.ts:publishEntryCreated() [neu] |
| 2217 | ‚õî | Journal | core | journal:entry-updated Event publizieren | hoch | Ja | #2200, #2228 | Journal.md#events, ../architecture/Events-Catalog.md#journal | [neu] src/core/events/domain-events.ts:JOURNAL_ENTRY_UPDATED, [neu] src/core/events/domain-events.ts:JournalEntryUpdatedPayload, src/features/journal/orchestrator.ts:publishEntryUpdated() [neu] |
| 2218 | ‚õî | Journal | core | journal:entry-deleted Event publizieren | hoch | Ja | #2200, #2228 | Journal.md#events, ../architecture/Events-Catalog.md#journal | [neu] src/core/events/domain-events.ts:JOURNAL_ENTRY_DELETED, [neu] src/core/events/domain-events.ts:JournalEntryDeletedPayload, src/features/journal/orchestrator.ts:publishEntryDeleted() [neu] |
| 2219 | ‚õî | Journal | core | journal:session-started Event publizieren | mittel | Nein | #2214 | Journal.md#events, ../architecture/Events-Catalog.md#journal | [neu] src/core/events/domain-events.ts:JOURNAL_SESSION_STARTED, [neu] src/core/events/domain-events.ts:JournalSessionStartedPayload, src/features/journal/orchestrator.ts:publishSessionStarted() [neu] |
| 2220 | ‚õî | Journal | core | journal:session-ended Event publizieren | mittel | Nein | #2214 | Journal.md#events, ../architecture/Events-Catalog.md#journal | [neu] src/core/events/domain-events.ts:JOURNAL_SESSION_ENDED, [neu] src/core/events/domain-events.ts:JournalSessionEndedPayload, src/features/journal/orchestrator.ts:publishSessionEnded() [neu] |
| 2221 | ‚õî | Journal | features | Query: getEntriesBySession(sessionId) | hoch | Ja | #2200, #2228 | Journal.md#queries | [neu] src/features/journal/queries.ts:getEntriesBySession() |
| 2222 | ‚õî | Journal | features | Query: getEntriesByCategory(category) | hoch | Ja | #2200, #2201, #2228 | Journal.md#queries | [neu] src/features/journal/queries.ts:getEntriesByCategory() |
| 2223 | ‚õî | Journal | features | Query: getEntriesForEntity(entityType, entityId) | hoch | Ja | #2200, #2203, #2228 | Journal.md#queries, Journal.md#entity-beziehungen | [neu] src/features/journal/queries.ts:getEntriesForEntity() |
| 2224 | ‚õî | Journal | features | Query: getEntriesInRange(from, to) - Zeitraum-basierte Abfrage | hoch | Ja | #2200, #901, #2228 | Journal.md#queries, ../features/Time-System.md#schemas | [neu] src/features/journal/queries.ts:getEntriesInRange() |
| 2225 | ‚õî | Journal | features | Query: getPinnedEntries() | mittel | Nein | #2200, #2228 | Journal.md#queries | [neu] src/features/journal/queries.ts:getPinnedEntries() |
| 2226 | ‚õî | Journal | application | Journal-Panel UI im SessionRunner (Quick Note Button, filterbare Liste) | hoch | Ja | #2212, #2213, #2221, #2222, #2223, #2224, #2225, #2228 | Journal.md#sessionrunner, ../application/SessionRunner.md#journal-integration | [neu] src/application/session-runner/panels/JournalPanel.svelte, [neu] src/application/session-runner/panels/JournalPanel.svelte:QuickNoteButton, [neu] src/application/session-runner/panels/JournalPanel.svelte:EntryList |
| 2227 | ‚õî | Journal | application | Timeline-View in Almanac (chronologische Ansicht, Filter nach Kategorie/Tags) | mittel | Nein | #2221, #2222, #2223, #2224, #2225 | Journal.md#almanac, ../features/Time-System.md | [neu] src/application/almanac/views/TimelineView.svelte, [neu] src/application/almanac/almanac-viewmodel.ts [√§ndern] |
| 2228 | üìã | Journal | features | Journal Feature/Orchestrator mit CRUD-Logik | hoch | Ja | - | Journal.md, ../architecture/Features.md | [neu] src/features/journal/orchestrator.ts:createJournalOrchestrator(), [neu] src/features/journal/types.ts:JournalFeaturePort, [neu] src/features/journal/storage.ts:JournalStoragePort [neu], [neu] src/features/journal/index.ts |
| 2300 | ‚úÖ | Application/SessionRunner | apps | SessionRunner View Component (Hauptcontainer) | hoch | Ja | - | SessionRunner.md#uebersicht, Application.md#mvvm-pattern | src/application/session-runner/view.ts:SessionRunnerView, view.ts:createSessionRunnerViewFactory() |
| 2301 | ‚úÖ | Application/SessionRunner | apps | SessionRunner ViewModel mit State-Management | hoch | Ja | #2300 | SessionRunner.md#viewmodel-state, Application.md#mvvm-pattern, Data-Flow.md | src/application/session-runner/viewmodel.ts:createSessionRunnerViewModel(), viewmodel.ts:SessionRunnerViewModel, types.ts:RenderState |
| 2302 | ‚úÖ | Application/SessionRunner | apps | Header Component (Zeit, Weather) | hoch | Ja | #2300 | SessionRunner.md#header, Time-System.md, Weather-System.md | src/application/session-runner/panels/header.ts:createHeaderPanel(), types.ts:HeaderState |
| 2303 | ‚úÖ | Application/SessionRunner | apps | Quick-Controls Sidebar Container | hoch | Ja | #2300 | SessionRunner.md#quick-controls-sidebar-links, Application.md | src/application/session-runner/panels/sidebar.ts:createSidebarPanel(), types.ts:SidebarState |
| 2304 | ‚úÖ | Application/SessionRunner | apps | Travel Section Component (Status, Speed, Plan/Start/Pause) | hoch | Ja | #2303, #1 | SessionRunner.md#travel-sektion, Travel-System.md#state-machine | src/application/session-runner/panels/sidebar.ts:updateTravelSection(), types.ts:TravelSectionState |
| 2305 | ‚úÖ | Application/SessionRunner | apps | Travel Animation Display (Progress Bar, ETA) | hoch | Ja | #2304, #8 | SessionRunner.md#travel-sektion, Travel-System.md | src/application/session-runner/panels/sidebar.ts:etaDisplay, map-canvas.ts:renderPartyToken(), types.ts:TokenAnimationState, types.ts:ETAInfo |
| 2306 | ‚õî | Application/SessionRunner | apps | Audio Section Component (Track-Name, Play/Pause/Skip/Volume) | hoch | Ja | #1100, #1110, #1111, #1500, #2303 | SessionRunner.md#audio-sektion, Audio-System.md | src/application/session-runner/panels/sidebar.ts:audioSection [√§ndern] |
| 2307 | ‚úÖ | Application/SessionRunner | apps | Party Section Component (Party-Size, Health-Summary, Manage-Button) | hoch | Ja | - | SessionRunner.md#party-sektion, Character-System.md | src/application/session-runner/panels/sidebar.ts:partySection [√§ndern] |
| 2308 | ‚úÖ | Application/SessionRunner | apps | Actions Section Component (nur Rest-Button, Encounter/Teleport entfernt) | hoch | Ja | - | SessionRunner.md#actions-sektion, Time-System.md#resting | src/application/session-runner/panels/sidebar.ts:actionsSection [√§ndern], sidebar.ts:updateActionsSection() [√§ndern], types.ts:ActionsSectionState [√§ndern] |
| 2309 | ‚úÖ | Application/SessionRunner | apps | Map Panel Component (Hauptansicht mit Hex-Grid und Party-Token) | hoch | Ja | #2300 | SessionRunner.md#map-panel, Map-Feature.md | src/application/session-runner/panels/map-canvas.ts:createMapCanvas(), map-canvas.ts:renderFrame() |
| 2310 | ‚õî | Application/SessionRunner | apps | Map Overlays Controls (Weather, Territory, Factions, Visibility) | hoch | Ja | #2309, #1300, #1400 | SessionRunner.md#map-panel, Weather-System.md, Map-Feature.md | src/application/session-runner/panels/map-canvas.ts:renderFrame() [√§ndern], types.ts:RenderState [√§ndern - overlaySettings hinzuf√ºgen] |
| 2311 | ‚úÖ | Application/SessionRunner | apps | Camera Controls (Pan mit MMB, Zoom mit Scroll) | hoch | Ja | #2309 | SessionRunner.md#map-panel, Map-Feature.md | src/application/session-runner/panels/map-canvas.ts:onMouseMove(), map-canvas.ts:onWheel(), viewmodel.ts:onPan(), viewmodel.ts:onZoom() |
| 2312 | ‚úÖ | Application/SessionRunner | apps | Travel-Modus Interaktionen (Waypoint setzen/verschieben/l√∂schen) | hoch | Ja | #2309, #2 | SessionRunner.md#map-panel, Travel-System.md | src/application/session-runner/viewmodel.ts:onTileClick(), viewmodel.ts:addWaypoint(), viewmodel.ts:clearWaypoints(), sidebar.ts:planBtn |
| 2313 | ‚úÖ | Application/SessionRunner | apps | Route-Anzeige im Travel-Modus (Linie zwischen Waypoints) | hoch | Ja | #2312 | SessionRunner.md#map-panel, Travel-System.md | src/application/session-runner/panels/map-canvas.ts:renderRoute(), map-canvas.ts:drawRouteLine(), map-canvas.ts:drawWaypointMarkers() |
| 2314 | ‚úÖ | Application/SessionRunner | apps | Tile-Klick Handler (Location-Info in DetailView) | hoch | Ja | #2309 | SessionRunner.md#map-panel, DetailView.md#location-tab, Map-Feature.md | src/application/session-runner/viewmodel.ts:onTileClick(), types.ts:RenderState.selectedTile |
| 2315 | ‚úÖ | Application/SessionRunner | apps | Event Subscriptions: travel:state-changed | hoch | Ja | #2301 | SessionRunner.md#event-subscriptions, Travel-System.md#events, Data-Flow.md | src/application/session-runner/viewmodel.ts:setupEventHandlers() L443-475 |
| 2316 | ‚úÖ | Application/SessionRunner | apps | Event Subscriptions: travel:position-changed | hoch | Ja | #2301 | SessionRunner.md#event-subscriptions, Travel-System.md#events, Data-Flow.md | src/application/session-runner/viewmodel.ts:setupEventHandlers() L370-408 |
| 2317 | ‚úÖ | Application/SessionRunner | apps | Event Subscriptions: time:state-changed | hoch | Ja | #2301 | SessionRunner.md#event-subscriptions, Time-System.md#events, Data-Flow.md | src/application/session-runner/viewmodel.ts:setupEventHandlers() L359-368 |
| 2318 | ‚úÖ | Application/SessionRunner | apps | Event Subscriptions: weather:state-changed | hoch | Ja | #2301 | SessionRunner.md#event-subscriptions, Weather-System.md#weather-events, Data-Flow.md | src/application/session-runner/viewmodel.ts:setupEventHandlers() L410-419 |
| 2319 | ‚õî | Application/SessionRunner | apps | Event Subscriptions: audio:track-changed | hoch | Ja | #1112, #1500, #2301 | SessionRunner.md#event-subscriptions, Audio-System.md, Data-Flow.md | src/application/session-runner/viewmodel.ts:setupEventHandlers() [√§ndern - audio subscription hinzuf√ºgen] |
| 2320 | ‚úÖ | Application/SessionRunner | apps | Event Subscriptions: map:loaded | hoch | Ja | #2301 | SessionRunner.md#event-subscriptions, Map-Feature.md, Data-Flow.md | src/application/session-runner/viewmodel.ts:setupEventHandlers() L316-324 |
| 2321 | ‚úÖ | Application/SessionRunner | apps | Event Subscriptions: party:state-changed | hoch | Ja | #2301 | SessionRunner.md#event-subscriptions, Character-System.md, Data-Flow.md | src/application/session-runner/viewmodel.ts:setupEventHandlers() L347-356 |
| 2323 | ‚¨ú | Application/SessionRunner | apps | Jump-to-Date Dialog (Klick auf Zeit im Header) | mittel | Nein | #2302, #900 | SessionRunner.md#header, Time-System.md#zeit-operationen | [neu] src/application/session-runner/dialogs/JumpToDateDialog.ts, header.ts:dateTimeEl [√§ndern - onClick Handler] |
| 2324 | ‚õî | Application/SessionRunner | apps | Weather-Status Display im Header (Klick ‚Üí DetailView Weather-Tab) | hoch | Ja | #2302, #1300 | SessionRunner.md#header, Weather-System.md, DetailView.md | src/application/session-runner/panels/header.ts:weatherEl, header.ts:updateHeader() |
| 2325 | ‚¨ú | Application/SessionRunner | apps | Keyboard Shortcuts: Space (Travel Start/Pause) | mittel | Nein | #2301 | SessionRunner.md#keyboard-shortcuts, Travel-System.md#state-machine | src/application/session-runner/view.ts:onOpen() [√§ndern - Keyboard Listener], viewmodel.ts [√§ndern - handleKeyboard()] |
| 2326 | ‚¨ú | Application/SessionRunner | apps | Keyboard Shortcuts: T (Travel-Sektion fokussieren) | mittel | Nein | #2301 | SessionRunner.md#keyboard-shortcuts, SessionRunner.md#travel-sektion | src/application/session-runner/view.ts:onOpen() [√§ndern - Keyboard Listener], viewmodel.ts [√§ndern - handleKeyboard()] |
| 2327 | ‚¨ú | Application/SessionRunner | apps | Keyboard Shortcuts: E (Encounter generieren) | mittel | Nein | #2301 | SessionRunner.md#keyboard-shortcuts, DetailView.md#encounter-tab | src/application/session-runner/view.ts:onOpen() [√§ndern - Keyboard Listener], viewmodel.ts [√§ndern - handleKeyboard()] |
| 2328 | ‚¨ú | Application/SessionRunner | apps | Keyboard Shortcuts: 1-6 (Time-Segment springen) | mittel | Nein | #2301 | SessionRunner.md#keyboard-shortcuts, Time-System.md#time-segment-berechnung | src/application/session-runner/view.ts:onOpen() [√§ndern - Keyboard Listener], viewmodel.ts [√§ndern - handleKeyboard()] |
| 2329 | ‚¨ú | Application/SessionRunner | apps | Keyboard Shortcuts: +/- (Zoom In/Out) | mittel | Nein | #2301 | SessionRunner.md#keyboard-shortcuts, SessionRunner.md#map-panel | src/application/session-runner/view.ts:onOpen() [√§ndern - Keyboard Listener], viewmodel.ts [√§ndern - handleKeyboard()] |
| 2330 | ‚¨ú | Application/SessionRunner | apps | Keyboard Shortcuts: Arrow Keys (Pan Map) | mittel | Nein | #2301 | SessionRunner.md#keyboard-shortcuts, SessionRunner.md#map-panel | src/application/session-runner/view.ts:onOpen() [√§ndern - Keyboard Listener], viewmodel.ts [√§ndern - handleKeyboard()] |
| 2331 | ‚¨ú | Application/SessionRunner | apps | Keyboard Shortcuts: [ / ] (Quick-Controls ein/ausblenden) | mittel | Nein | #2301 | SessionRunner.md#keyboard-shortcuts, SessionRunner.md#collapsed-quick-controls | src/application/session-runner/view.ts:onOpen() [√§ndern - Keyboard Listener], viewmodel.ts [√§ndern - handleKeyboard()] |
| 2332 | ‚¨ú | Application/SessionRunner | apps | Collapsed Quick-Controls Modus (Icon-only Sidebar) | mittel | Nein | #2303 | SessionRunner.md#collapsed-quick-controls, Application.md | src/application/session-runner/panels/sidebar.ts:createSidebarPanel() [√§ndern - Icon-Modus], types.ts:RenderState.sidebarCollapsed |
| 2333 | ‚õî | Application/SessionRunner | apps | Visibility-Toggle im Overlays-Bereich (Sichtweiten-Overlay) | mittel | Nein | #2310, #1000 | SessionRunner.md#visibility-toggle-post-mvp, Map-Feature.md#visibility-system, Time-System.md#sichtweiten-einfluss-post-mvp | src/application/session-runner/panels/map-canvas.ts:renderFrame() [√§ndern - Visibility Layer], types.ts:RenderState [√§ndern - overlaySettings.visibility] |
| 2334 | ‚¨ú | Application/SessionRunner | apps | Animations-Geschwindigkeit Slider (0.5x - 10x) | niedrig | Nein | #2304 | SessionRunner.md#animations-geschwindigkeit-slider-post-mvp, Travel-System.md | src/application/session-runner/panels/sidebar.ts:travelSection [√§ndern - Speed Slider] |
| 2335 | ‚úÖ | Application/SessionRunner | apps | Travel-Plan-Button Toggle (Aktiviert/Deaktiviert Travel-Modus) | hoch | Ja | #2304 | SessionRunner.md#travel-sektion, Travel-System.md#state-machine | src/application/session-runner/panels/sidebar.ts:planBtn, viewmodel.ts:toggleTravelMode(), types.ts:RenderState.travelMode |
| 2338 | üìã | Application/SessionRunner | apps | Party-Manage-Button (√ñffnet Party-Tab im DetailView) | mittel | Nein | #2307, #3216 | SessionRunner.md#party-sektion, Character-System.md | src/application/session-runner/view.ts:onManageParty() - √∂ffnet DetailView via workspace.getRightLeaf() + setViewState({activeTab: 'party'}). src/application/detail-view/view.ts:setState() - Tab-Wechsel via ViewState |
| 2339 | ‚úÖ | Application/SessionRunner | apps | Health-Summary Berechnung (All OK, X Wounded, X Critical) | hoch | Ja | - | SessionRunner.md#party-sektion, Character-System.md | src/application/session-runner/viewmodel.ts:syncFromFeatures() [√§ndern - Health Summary], types.ts:SidebarState [√§ndern - Party Section mit Health] |
| 2340 | ‚õî | Application/SessionRunner | apps | Audio Volume Slider (Klick auf üîä im Audio-Section) | mittel | Nein | #1104, #1500, #2306 | SessionRunner.md#audio-sektion, Audio-System.md | src/application/session-runner/panels/sidebar.ts:audioSection [√§ndern - Volume Control] |
| 2400 | ‚úÖ | Application/DetailView | apps | DetailView View Component (Hauptcontainer mit Tab-Navigation) | hoch | Ja | - | DetailView.md#uebersicht | src/application/detail-view/view.ts |
| 2401 | ‚úÖ | Application/DetailView | apps | DetailView ViewModel mit State-Management | hoch | Ja | #2400 | DetailView.md#state-synchronisation, Application.md#viewmodel-pattern | src/application/detail-view/viewmodel.ts |
| 2402 | ‚úÖ | Application/DetailView | apps | Tab-Management (activeTab State, setActiveTab) | hoch | Ja | #2401 | DetailView.md#uebersicht | viewmodel.ts:setActiveTab(), types.ts:DetailViewState.activeTab |
| 2403 | ‚úÖ | Application/DetailView | apps | Idle-State Placeholder (Hinweis wenn kein Tab aktiv) | mittel | Ja | #2400 | DetailView.md#idle-state-kein-tab-aktiv | view.ts:idleState (lines 113-123) |
| 2404 | ‚úÖ | Application/DetailView | apps | Auto-Open Verhalten f√ºr Encounter-Tab (encounter:generated) | hoch | Ja | #2401 | DetailView.md#auto-open-verhalten, Encounter-System.md#events, Events-Catalog.md#encounter | viewmodel.ts:ENCOUNTER_GENERATED handler (lines 110-125) |
| 2405 | ‚úÖ | Application/DetailView | apps | Auto-Open Verhalten f√ºr Combat-Tab (combat:started) | hoch | Ja | #322, #2401 | DetailView.md#auto-open-verhalten, Combat-System.md#combat-flow, Events-Catalog.md#combat | viewmodel.ts:COMBAT_STARTED handler (lines 140-150) |
| 2406 | ‚õî | Application/DetailView | apps | Auto-Open Verhalten f√ºr Location-Tab (ui:tile-selected, optional) | niedrig | Nein | #2401, #2448 | DetailView.md#auto-open-verhalten | viewmodel.ts:setupEventHandlers() [√§ndern - UI_TILE_SELECTED handler] |
| 2407 | ‚úÖ | Application/DetailView | apps | Tab-Priorit√§t System (Combat > Encounter > Rest) | mittel | Ja | #2402 | DetailView.md#auto-open-verhalten | viewmodel.ts:ENCOUNTER_GENERATED handler (line 118 - pr√ºft ob combat aktiv) |
| 2408 | ‚úÖ | Application/DetailView | apps | Encounter-Tab Component (Container) | hoch | Ja | - | DetailView.md#encounter-tab | src/application/detail-view/panels/encounter-tab.ts:createEncounterTab() |
| 2409 | ‚úÖ | Application/DetailView | apps | Encounter-Builder State (Name, Activity, Goal, Creatures) | hoch | Ja | #2401 | DetailView.md#encounter-tab, Encounter-System.md#schemas | types.ts:EncounterTabState, types.ts:BuilderCreature, viewmodel.ts:setBuilder*(), viewmodel.ts:*CreatureFromBuilder() |
| 2410 | ‚úÖ | Application/DetailView | apps | Encounter-Suche (Autocomplete f√ºr gespeicherte EncounterDefinitions) | mittel | Ja | #2408, #2409 | DetailView.md#encounter-tab, Encounter-System.md#schemas | types.ts [EncounterSearchResult, encounterSearchOpen], viewmodel.ts [setEncounterSearchQuery, selectEncounterFromSearch, closeEncounterSearch], encounter-tab.ts [createEncounterSearch mit Dropdown], view.ts [Callbacks verdrahtet] |
| 2411 | ‚¨ú | Application/DetailView | apps | Kreatur/NPC-Suche (Autocomplete f√ºr CreatureDefinitions + Named NPCs) | hoch | Ja | #2408, #2409 | DetailView.md#encounter-tab, Creature.md#schema, NPC-System.md#npc-schema | encounter-tab.ts [√§ndern - Kreatur-Suche-Input + Autocomplete-Logic] |
| 2412 | ‚õî | Application/DetailView | apps | Kreatur/NPC hinzuf√ºgen zum Builder | hoch | Ja | #2409, #2411 | DetailView.md#encounter-tab, DetailView.md#flow-neues-encounter-im-builder-erstellen | encounter-tab.ts [√§ndern - onAddCreature callback], viewmodel.ts [√§ndern - addCreatureToBuilder()] |
| 2413 | ‚õî | Application/DetailView | apps | Kreatur/NPC entfernen aus Builder ([√ó] Button) | mittel | Ja | #2409, #2412 | DetailView.md#encounter-tab | encounter-tab.ts [√§ndern - Remove-Button], viewmodel.ts [√§ndern - removeCreatureFromBuilder()] |
| 2414 | üî∂ | Application/DetailView | apps | Encounter-Wertung Live-Berechnung (Gesamt-XP, Difficulty, Daily-Budget) | hoch | Ja | #2409, #1400 | DetailView.md#encounter-tab, Encounter-Balancing.md#xp-budget, Encounter-Balancing.md#cr-vergleich | viewmodel.ts [√§ndern - calculateEncounterRating()], nutzet Encounter-Balancing-Feature #1400 |
| 2415 | ‚úÖ | Application/DetailView | apps | Encounter-Builder bef√ºllen aus encounter:generated Event | hoch | Ja | #2404, #2409 | DetailView.md#encounter-tab, DetailView.md#flow-random-encounter-builder, Encounter-System.md#events | viewmodel.ts:loadEncounterIntoBuilder(), ENCOUNTER_GENERATED handler |
| 2416 | ‚¨ú | Application/DetailView | apps | Encounter-Builder bef√ºllen aus gespeichertem Encounter | mittel | Ja | #2409, #2410 | DetailView.md#flow-gespeichertes-encounter-laden, Encounter-System.md#schemas | viewmodel.ts [√§ndern - loadEncounterDefinition()], encounter-tab.ts [√§ndern - onLoadEncounter callback] |
| 2417 | ‚¨ú | Application/DetailView | apps | Encounter speichern (üíæ Button) | mittel | Ja | #2409 | DetailView.md#flow-builder-speichern, Encounter-System.md#schemas | encounter-tab.ts [√§ndern - Save-Button], viewmodel.ts [√§ndern - saveEncounterDefinition()], view.ts [√§ndern - onSaveEncounter callback] |
| 2418 | ‚úÖ | Application/DetailView | apps | Combat starten aus Builder (‚öîÔ∏è Button, publiziert combat:start-requested) | hoch | Ja | #321, #2409 | DetailView.md#flow-builder-combat, Combat-System.md#combat-flow, Encounter-System.md#integration | encounter-tab.ts:onStartEncounter ‚Üí view.ts:EventTypes.ENCOUNTER_START_REQUESTED (lines 236-244) |
| 2419 | ‚úÖ | Application/DetailView | apps | Combat-Tab Component (Container) | hoch | Ja | #305, #2400 | DetailView.md#combat-tab, Combat-System.md#schemas | src/application/detail-view/panels/combat-tab.ts |
| 2420 | ‚úÖ | Application/DetailView | apps | Combat-Tab State (CombatState, PendingEffects, Resolution) | hoch | Ja | #2401, #2419 | DetailView.md#combat-tab, DetailView.md#state-synchronisation, Combat-System.md#combatstate | types.ts:CombatTabState, ResolutionState |
| 2421 | ‚úÖ | Application/DetailView | apps | Initiative-Tracker Display (Liste mit Reihenfolge, aktiver Participant markiert) | hoch | Ja | #2419, #2420 | DetailView.md#combat-tab, Combat-System.md#sortierung, Combat-System.md#initiative-layout | combat-tab.ts:renderParticipant(), renderInitiativeList() |
| 2422 | ‚úÖ | Application/DetailView | apps | HP-Bar Display pro Participant | hoch | Ja | #308, #309, #2420, #2421 | DetailView.md#combat-tab, Combat-System.md#damage-heal | combat-tab.ts:createHpBar() (lines 265-298) |
| 2423 | ‚úÖ | Application/DetailView | apps | Conditions Display pro Participant (Icons + Labels) | hoch | Ja | #312, #313, #2420, #2421 | DetailView.md#combat-tab, Combat-System.md#conditions | combat-tab.ts:conditions rendering (lines 220-246) |
| 2424 | ‚úÖ | Application/DetailView | apps | Damage Button + Dialog | hoch | Ja | #319, #2419, #2420 | DetailView.md#combat-tab, Combat-System.md#combat-flow, Combat-System.md#automatische-effekte | combat-tab.ts:damageBtn + view.ts:onApplyDamage callback (lines 288-295) |
| 2425 | ‚úÖ | Application/DetailView | apps | Heal Button + Dialog | hoch | Ja | #2419, #2424 | DetailView.md#combat-tab, Combat-System.md#start-of-turn | combat-tab.ts:healBtn + view.ts:onApplyHealing callback (lines 297-305) |
| 2426 | ‚úÖ | Application/DetailView | apps | Condition Button + Dropdown | hoch | Ja | #2419, #2424 | DetailView.md#combat-tab, Combat-System.md#end-of-turn | combat-tab.ts:conditionBtn + view.ts:onAddCondition/onRemoveCondition callbacks (lines 306-323) |
| 2427 | ‚¨ú | Application/DetailView | apps | Add Effect Button + Dialog (Custom Start/End-of-Turn Effects) | mittel | Nein | #323, #2419, #2420 | DetailView.md#flow-combat-beenden, Combat-System.md#combat-flow | combat-tab.ts [√§ndern - Effect-Button + Dialog], view.ts [√§ndern - onAddEffect callback] |
| 2428 | ‚úÖ | Application/DetailView | apps | Next Turn Button (combat:next-turn-requested) | hoch | Ja | #338, #339, #340, #2419, #2427 | DetailView.md#post-combat-resolution, Combat-System.md#post-combat-resolution, Combat-System.md#xp-berechnung | combat-tab.ts:nextTurnBtn + view.ts:onNextTurn callback (lines 274-277) |
| 2429 | ‚úÖ | Application/DetailView | apps | End Combat Button (combat:end-requested) | hoch | Ja | #2419, #2428 | DetailView.md#post-combat-resolution, Combat-System.md#xp-berechnung | combat-tab.ts:endBtn + view.ts:onEndCombat callback (lines 279-287) |
| 2429a | ‚úÖ | Application/DetailView | apps | Update Initiative Button (combat:update-initiative-requested) | mittel | Ja | #2419, #2428 | DetailView.md#post-combat-resolution, Combat-System.md#xp-berechnung | combat-tab.ts:initBtn + view.ts:onUpdateInitiative callback (lines 324-332) |
| 2430 | ‚õî | Application/DetailView | apps | Start-of-Turn Effect Display (Save-Prompt f√ºr Effekte wie Tasha's Caustic Brew) | mittel | Nein | #408, #409, #2420, #2427, #2428 | DetailView.md#post-combat-resolution, Quest-System.md#quest-assignment-ui-post-combat, Quest-System.md#40-60-split-mechanik, Combat-System.md#post-combat-resolution | combat-tab.ts [√§ndern - Turn-Wechsel-Dialog mit Pending-Effects], viewmodel.ts [√§ndern - getPendingEffects()] |
| 2431 | ‚úÖ | Application/DetailView | apps | Post-Combat Resolution State-Management | hoch | Ja | - | DetailView.md#post-combat-resolution, Loot-Feature.md#verteilen-einheitliches-loot-modal, Loot-Feature.md#loot-generierung-bei-encounter, Combat-System.md#post-combat-resolution | types.ts:CombatTabState [√§ndern - Resolution-Felder hinzuf√ºgen], viewmodel.ts [√§ndern - Resolution-State-Management] |
| 2432 | ‚¨ú | Application/DetailView | apps | Post-Combat Phase 1: XP-Summary Display (Basis-XP, GM-Anpassung, Verteilung) | hoch | Ja | - | DetailView.md#shop-tab, Shop.md#verwendung | combat-tab.ts [neu - renderResolutionPanel:XpPhase] |
| 2433 | ‚õî | Application/DetailView | apps | Post-Combat Phase 1: GM-Anpassung Controls ([-] [%] [+] Schnellauswahl) | mittel | Ja | #2432 | DetailView.md#shop-tab, DetailView.md#state-synchronisation, Shop.md#schema | combat-tab.ts:XpPhase [√§ndern - GM-Modifier-Controls] |
| 2434 | ‚õî | Application/DetailView | apps | Post-Combat Phase 2: Quest-Zuweisung Display (Quest-Suche, Aktive Quests Radio-Liste) | hoch | Ja | #2432, #2433 | DetailView.md#shop-tab, Shop.md#queries | combat-tab.ts [neu - renderResolutionPanel:QuestPhase] |
| 2435 | ‚õî | Application/DetailView | apps | Post-Combat Phase 2: Quest-Pool XP Zuweisung (Quest ausw√§hlen, XP zuweisen) | hoch | Ja | #2433, #2434 | DetailView.md#shop-tab, Shop.md#preis-berechnung, Shop.md#events | viewmodel.ts [√§ndern - assignXpToQuest()], view.ts [√§ndern - onAssignQuestXp callback] |
| 2436 | ‚õî | Application/DetailView | apps | Post-Combat Phase 3: Loot-Verteilung Display (Items + Gold) | hoch | Ja | #2433, #2434 | DetailView.md#shop-tab, Shop.md#preis-berechnung, Shop.md#events | combat-tab.ts [neu - renderResolutionPanel:LootPhase] |
| 2437 | ‚õî | Application/DetailView | apps | Post-Combat Phase 3: Item-Verteilung (Dropdown pro Item ‚Üí Character) | hoch | Ja | #2400, #2436 | DetailView.md#location-tab, POI.md#tile-content-panel | combat-tab.ts:LootPhase [√§ndern - Item-Dropdown-Controls] |
| 2438 | ‚õî | Application/DetailView | apps | Post-Combat Phase 3: Gold-Verteilung (Gleichm√§√üig verteilen + manuell anpassen) | mittel | Ja | #2436, #2437 | DetailView.md#location-tab, DetailView.md#state-synchronisation, POI.md#queries | combat-tab.ts:LootPhase [√§ndern - Gold-Distribution-Controls] |
| 2439 | ‚õî | Application/DetailView | apps | Post-Combat Resolution: √úberspringen-Button pro Phase | mittel | Ja | #2431, #2432, #2434, #2436, #2438 | DetailView.md#location-tab, Terrain.md#schema, Weather-System.md#weather-state | combat-tab.ts:renderResolutionPanel [√§ndern - Skip-Button], viewmodel.ts [√§ndern - skipPhase()] |
| 2440 | ‚õî | Application/DetailView | apps | Post-Combat Resolution: Weiter-Button (Phase-Transition) | hoch | Ja | #2431, #2432, #2438 | DetailView.md#location-tab, POI.md#tile-content-panel, POI.md#queries | combat-tab.ts:renderResolutionPanel [√§ndern - Next-Button], viewmodel.ts [√§ndern - nextPhase()] |
| 2441 | ‚õî | Application/DetailView | apps | Post-Combat Resolution: Events publizieren (encounter:resolved, quest:xp-accumulated, loot:distributed) | hoch | Ja | #2431, #2435, #2437, #2438 | DetailView.md#location-tab, Faction.md#praesenz-datenstruktur, Faction.md#encounter-integration | viewmodel.ts [√§ndern - Resolution-Event-Publishing], view.ts [√§ndern - Event-Callbacks] |
| 2442 | ‚õî | Application/DetailView | apps | Shop-Tab Component (Container) | mittel | Ja | #2400, #2438 | DetailView.md#location-tab, NPC-System.md#npc-schema, NPC-System.md#mvp-fraktions-basierte-location | [neu] src/application/detail-view/panels/shop-tab.ts |
| 2443 | ‚¨ú | Application/DetailView | apps | Shop-Tab State (activeShop, searchQuery, filter, mode) | mittel | Ja | #2400, #2401 | DetailView.md#quest-tab, Quest.md#schema | types.ts:ShopTabState [neu], viewmodel.ts [√§ndern - Shop-State-Management] |
| 2444 | ‚õî | Application/DetailView | apps | Shop-Tab Buy-Mode (Item-Liste, Search, Filter, Buy-Button) | mittel | Ja | #2442, #2443 | DetailView.md#quest-tab, DetailView.md#state-synchronisation, Quest-System.md#quest-progress-runtime-state | shop-tab.ts [√§ndern - Buy-Mode-Rendering] |
| 2445 | ‚õî | Application/DetailView | apps | Shop-Tab Sell-Mode (Party-Inventory, Sell-Button) | mittel | Ja | #2442, #2443, #2444 | DetailView.md#quest-tab, Quest-System.md#quest-schema-entityregistry, Quest.md#questobjective | shop-tab.ts [√§ndern - Sell-Mode-Rendering] |
| 2446 | ‚õî | Application/DetailView | apps | Shop-Tab Mode Toggle (Buy/Sell wechseln) | niedrig | Nein | #2442, #2443, #2444 | DetailView.md#quest-tab, Quest-System.md#quest-state-machine, Quest.md#events | shop-tab.ts [√§ndern - Mode-Toggle-Button], viewmodel.ts [√§ndern - toggleShopMode()] |
| 2447 | ‚õî | Application/DetailView | apps | Shop-Tab Load More / Pagination | niedrig | Nein | #2400, #2444 | DetailView.md#journal-tab, Journal.md#schema | shop-tab.ts [√§ndern - Pagination-Controls] |
| 2448 | ‚õî | Application/DetailView | apps | Location-Tab Component (Container) | mittel | Ja | #2400, #2447 | DetailView.md#journal-tab, DetailView.md#state-synchronisation, Journal.md#queries | [neu] src/application/detail-view/panels/location-tab.ts |
| 2449 | ‚õî | Application/DetailView | apps | Location-Tab State (selectedTile, tileData) | mittel | Ja | #2401, #2448 | DetailView.md#journal-tab, Journal.md#schema | types.ts:LocationTabState [neu], viewmodel.ts [√§ndern - Location-State-Management] |
| 2450 | ‚õî | Application/DetailView | apps | Location-Tab Terrain Display (Type, Elevation, Movement Cost) | mittel | Ja | #2448, #2449 | DetailView.md#journal-tab, Journal.md#journalentry | location-tab.ts [√§ndern - Terrain-Rendering] |
| 2451 | ‚õî | Application/DetailView | apps | Location-Tab Weather Display (aktuelles Wetter f√ºr Tile) | mittel | Ja | #2448, #2449 | DetailView.md#location-tab | location-tab.ts [√§ndern - Weather-Rendering] |
| 2452 | ‚õî | Application/DetailView | apps | Location-Tab POI-Liste (POIs auf Tile mit Details-Link) | mittel | Ja | #2448, #2449 | DetailView.md#location-tab | location-tab.ts [√§ndern - POI-List-Rendering] |
| 2453 | ‚õî | Application/DetailView | apps | Location-Tab Fraktions-Pr√§senz (Factions mit %-Werten) | niedrig | Nein | #2448, #2449 | DetailView.md#location-tab | location-tab.ts [√§ndern - Faction-Rendering] |
| 2454 | ‚õî | Application/DetailView | apps | Location-Tab Bekannte NPCs (NPCs auf Tile) | niedrig | Nein | #2448, #2449 | DetailView.md#location-tab | location-tab.ts [√§ndern - NPC-List-Rendering] |
| 2455 | ‚¨ú | Application/DetailView | apps | Quest-Tab Component (Container) | niedrig | Nein | #2400 | DetailView.md#quest-tab | [neu] src/application/detail-view/panels/quest-tab.ts |
| 2456 | ‚¨ú | Application/DetailView | apps | Quest-Tab State (selectedQuest) | niedrig | Nein | #2401 | DetailView.md#viewmodel-state | types.ts:QuestTabState [neu], viewmodel.ts [√§ndern - Quest-State-Management] |
| 2457 | ‚õî | Application/DetailView | apps | Quest-Tab Details Display (Status, Progress, Description, Objectives) | niedrig | Nein | #2455, #2456 | DetailView.md#quest-tab | quest-tab.ts [√§ndern - Quest-Details-Rendering] |
| 2458 | ‚õî | Application/DetailView | apps | Quest-Tab Encounters Display (Liste mit XP-Info, Start-Button) | niedrig | Nein | #2455, #2456 | DetailView.md#quest-tab | quest-tab.ts [√§ndern - Encounter-List-Rendering] |
| 2459 | ‚õî | Application/DetailView | apps | Quest-Tab Rewards Display (Gold, Quest-XP Pool, Reputation) | niedrig | Nein | #2455, #2456 | DetailView.md#quest-tab | quest-tab.ts [√§ndern - Rewards-Rendering] |
| 2460 | ‚õî | Application/DetailView | apps | Quest-Tab Complete/Abandon Buttons | niedrig | Nein | #2455 | DetailView.md#quest-tab | quest-tab.ts [√§ndern - Action-Buttons], viewmodel.ts [√§ndern - completeQuest()/abandonQuest()], view.ts [√§ndern - Quest-Callbacks] |
| 2461 | ‚¨ú | Application/DetailView | apps | Journal-Tab Component (Container) | niedrig | Nein | #2400 | DetailView.md#journal-tab | [neu] src/application/detail-view/panels/journal-tab.ts |
| 2462 | ‚¨ú | Application/DetailView | apps | Journal-Tab State (filter, entries) | niedrig | Nein | #2401 | DetailView.md#viewmodel-state | types.ts:JournalTabState [neu], viewmodel.ts [√§ndern - Journal-State-Management] |
| 2463 | ‚õî | Application/DetailView | apps | Journal-Tab Filter Controls (Type-Filter, Date-Filter) | niedrig | Nein | #2461, #2462 | DetailView.md#journal-tab | journal-tab.ts [√§ndern - Filter-Controls] |
| 2464 | ‚õî | Application/DetailView | apps | Journal-Tab Entry Display (Chronologisch gruppiert nach Tag) | niedrig | Nein | #2461, #2462 | DetailView.md#journal-tab | journal-tab.ts [√§ndern - Entry-Rendering] |
| 2465 | ‚õî | Application/DetailView | apps | Journal-Tab Quick Note Button | niedrig | Nein | #2461 | DetailView.md#journal-tab | journal-tab.ts [√§ndern - Quick-Note-Button], viewmodel.ts [√§ndern - addQuickNote()], view.ts [√§ndern - onAddQuickNote callback] |
| 2466 | ‚õî | Application/DetailView | apps | Journal-Tab Export Button | niedrig | Nein | #2461 | DetailView.md#journal-tab | journal-tab.ts [√§ndern - Export-Button], viewmodel.ts [√§ndern - exportJournal()] |
| 2467 | ‚¨ú | Application/DetailView | apps | Keyboard-Shortcuts (1-7 f√ºr Tab-Wechsel, Escape f√ºr Close) | niedrig | Nein | #2402 | DetailView.md#keyboard-shortcuts | view.ts [√§ndern - onKeyDown handler mit Tab-Switch-Logic] |
| 2468 | ‚¨ú | Application/DetailView | apps | Keyboard-Shortcuts Combat-spezifisch (N=Next Turn, D=Damage, H=Heal) | niedrig | Nein | #2419 | DetailView.md#keyboard-shortcuts | view.ts [√§ndern - onKeyDown handler mit Combat-Shortcuts], combat-tab.ts [√§ndern - keyboard event passthrough] |
| 2469 | ‚úÖ | Application/DetailView | apps | Event-Subscriptions Setup (encounter:generated, combat:started, etc.) | hoch | Ja | #2401 | DetailView.md#event-subscriptions | viewmodel.ts:setupEventHandlers() (lines 109-173) |
| 2470 | ‚úÖ | Application/DetailView | apps | Generate-Button im Encounter-Tab (üé≤, publiziert encounter:generate-requested) Deliverables: - [x] PartyFeaturePort als optionale Dependency in DetailViewDeps - [x] onRegenerateEncounter() nutzt Party-Position als Fallback - [x] Button funktioniert auch ohne bestehendes Encounter DoD: - [x] Button publiziert encounter:generate-requested mit korrekter Position - [x] TypeScript-Check erfolgreich - [x] Build erfolgreich | hoch | Ja | #2408 | DetailView.md#encounter-tab | view.ts:onRegenerateEncounter() [ge√§ndert - Party-Fallback], view.ts:DetailViewDeps [ge√§ndert - partyFeature], main.ts [ge√§ndert - partyFeature √ºbergabe] |
| 2500 | ‚úÖ | Application/Cartographer | apps | Cartographer View Component (Hauptcontainer mit Tool-Sidebar + Canvas + Layer-Panel) | hoch | Ja | - | Cartographer.md#layout-wireframe, Application.md#workmodes | [neu] src/application/cartographer/view.ts |
| 2501 | ‚úÖ | Application/Cartographer | apps | Cartographer ViewModel mit State-Management | hoch | Ja | - | Cartographer.md#state-management, Application.md#viewmodels | [neu] src/application/cartographer/viewmodel.ts |
| 2502 | ‚úÖ | Application/Cartographer | apps | Tool-Wechsel State (activeTool, toolOptions) | hoch | Ja | - | Cartographer.md#tool-panels, Cartographer.md#tool-legende | viewmodel.ts:setActiveTool() |
| 2503 | ‚úÖ | Application/Cartographer | apps | Map-Typ Erkennung (Overland vs Dungeon ‚Üí passende Tool-Palette) | hoch | Ja | - | Cartographer.md#terrain-brush-overland, Terrain.md#schema, Map-Feature.md#overworldtile | viewmodel.ts:mapType switch |
| 2504 | ‚úÖ | Application/Cartographer | apps | Camera State (Pan, Zoom) | hoch | Ja | - | Cartographer.md#elevation-brush-overland, Map-Feature.md#overworldtile | viewmodel.ts:camera |
| 2505 | ‚úÖ | Application/Cartographer | apps | Selection State (selectedTiles, hoveredTile) | hoch | Ja | - | Cartographer.md#state-management | viewmodel.ts:selectedTiles |
| 2506 | ‚úÖ | Application/Cartographer | apps | Undo/Redo Stack Implementation | hoch | Ja | - | Cartographer.md#state-management | viewmodel.ts:undoStack/redoStack |
| 2507 | ‚úÖ | Application/Cartographer | apps | Terrain-Brush Tool Component (Overland) | hoch | Ja | - | Cartographer.md#climate-brush-overland, Weather-System.md#tile-basierte-wetter-ranges, Terrain.md#climateprofile | [neu] src/application/cartographer/tools/TerrainBrush.svelte |
| 2508 | ‚¨ú | Application/Cartographer | apps | Terrain-Brush Options Panel (Terrain-Auswahl Grid, Brush Size, Shape) | hoch | Ja | #802, #2502, #2507 | Cartographer.md#terrain-brush-overland, Map-Feature.md#overworldtile | [neu] src/application/cartographer/panels/TerrainBrushPanel.svelte |
| 2509 | ‚õî | Application/Cartographer | apps | Terrain-Brush Interaktionen (Click+Drag Paint, Right-Click Picker, Shift-Line) | hoch | Ja | #809, #810, #2502, #2507 | Cartographer.md#terrain-brush, Map-Feature.md#overworld-rendering | TerrainBrush.svelte:handleMouseDown/Drag |
| 2510 | ‚õî | Application/Cartographer | apps | Terrain-Brush Auto-Elevation Option | mittel | Nein | #1500, #1510, #2502, #2507 | Cartographer.md#location-marker-overland, POI.md#basepoi, POI.md#poi-typen, Map-Feature.md#overworldtile | TerrainBrushPanel.svelte:autoElevation toggle |
| 2511 | ‚õî | Application/Cartographer | apps | Elevation-Brush Tool Component (Overland) | hoch | Ja | #802, #1509, #2500, #2502 | Cartographer.md#inspector-alle-map-typen, Map-Feature.md#overworldtile, POI.md#queries | [neu] src/application/cartographer/tools/ElevationBrush.svelte |
| 2512 | ‚õî | Application/Cartographer | apps | Elevation-Brush Paint Mode (Direktes Setzen von H√∂henwerten mit Presets) | hoch | Ja | #806, #808, #2502, #2511 | Cartographer.md#wall-tool-dungeon, Dungeon-System.md#dungeontile, Map-Feature.md#dungeonmap | ElevationBrush.svelte:paintMode |
| 2513 | ‚õî | Application/Cartographer | apps | Elevation-Brush Gradient Mode (Start/End H√∂he, Falloff Linear/Smooth) | mittel | Nein | #808, #2502, #2511 | Cartographer.md#door-tool-dungeon, Dungeon-System.md#dungeontile, Map-Feature.md#dungeontile | ElevationBrush.svelte:gradientMode |
| 2514 | ‚õî | Application/Cartographer | apps | Elevation-Brush Smooth Mode (Iterations, Preserve Peaks) | mittel | Nein | #810, #1504, #2502, #2511 | Cartographer.md#trap-tool-dungeon, Dungeon-System.md#dungeontilecontent, Map-Feature.md#dungeontile, POI.md#trappoi | ElevationBrush.svelte:smoothMode |
| 2515 | ‚õî | Application/Cartographer | apps | Elevation-Brush Strength Slider | mittel | Ja | #808, #1200, #2502, #2511 | Cartographer.md#token-placer-dungeon, Dungeon-System.md#dungeontile, Creature.md#schema, Map-Feature.md#dungeontile | ElevationBrush.svelte:strength |
| 2516 | ‚¨ú | Application/Cartographer | apps | Climate-Brush Tool Component (Overland) | niedrig | Nein | #2500, #2501, #2502 | Cartographer.md#layer-control, Cartographer.md#state-management | [neu] src/application/cartographer/tools/ClimateBrush.svelte |
| 2517 | ‚õî | Application/Cartographer | apps | Climate-Brush Layer Selection (Temp/Precip/Wind) | niedrig | Nein | #801, #806, #2500, #2516 | Cartographer.md#layout-wireframe, Map-Feature.md#rendering, Map-Feature.md#overworld-rendering, Map-Feature.md#dungeon-rendering | ClimateBrush.svelte:activeLayer |
| 2518 | ‚õî | Application/Cartographer | apps | Climate-Brush Temperature Override (Additive/Absolute Mode) | niedrig | Nein | #2516, #2517 | Cartographer.md#keyboard-shortcuts, Cartographer.md#state-management | ClimateBrush.svelte:tempOverride |
| 2519 | ‚õî | Application/Cartographer | apps | Climate-Brush Precipitation Override | niedrig | Nein | #2503, #2504, #2507, #2516 | Cartographer.md#terrain-brush-overland, Cartographer.md#elevation-brush-overland, Cartographer.md#climate-brush-overland | ClimateBrush.svelte:precipOverride |
| 2520 | ‚õî | Application/Cartographer | apps | Climate-Brush Wind Override (Direction + Strength) | niedrig | Nein | #2503, #2516 | Cartographer.md#climate-brush-overland | ClimateBrush.svelte:windOverride |
| 2521 | ‚õî | Application/Cartographer | apps | Climate-Brush Falloff Control | niedrig | Nein | #2501, #2516 | Cartographer.md#state-management, Cartographer.md#keyboard-shortcuts | ClimateBrush.svelte:falloff |
| 2522 | ‚¨ú | Application/Cartographer | apps | Auto-Elevation Option (Terrain-abh√§ngige H√∂he) | mittel | Nein | - | Cartographer.md#terrain-brush-overland, Terrain.md#schema | TerrainBrush.svelte:autoElevation |
| 2523 | ‚õî | Application/Cartographer | apps | Preview Mode (√Ñnderungen vor Apply anzeigen) | niedrig | Nein | #2503, #2504, #2507, #2522 | Cartographer.md#terrain-brush-overland | TerrainBrush.svelte:previewMode |
| 2524 | ‚õî | Application/Cartographer | apps | Terrain Custom Type Creator | mittel | Nein | #1700, #1707, #2503, #2522 | Cartographer.md#terrain-brush-overland, Terrain.md#custom-terrains-mvp, Terrain.md#schema | [neu] TerrainTypeCreator.svelte |
| 2525 | ‚õî | Application/Cartographer | apps | Path Properties Editor (Speed, Barrier, Transport-Requirement) | mittel | Nein | #1800, #1802, #2509, #2522 | Cartographer.md#path-tool-overland-post-mvp, Path.md#pathmovement, Path.md#pathencountermodifier | PathTool.svelte:propertiesEditor |
| 2526 | ‚õî | Application/Cartographer | apps | Path Custom Type Creator | mittel | Nein | #1800, #2509, #2522 | Cartographer.md#path-tool-overland-post-mvp, Path.md#schema, Path.md#default-presets | [neu] PathTypeCreator.svelte |
| 2527 | ‚õî | Application/Cartographer | apps | Location Editor Modal (On-Place Integration) | hoch | Ja | #1501, #1502, #2510, #2522 | Cartographer.md#location-marker-overland, POI.md#entrancepoi, POI.md#landmarkpoi, Map-Navigation.md#bidirektionale-links | [neu] LocationEditorModal.svelte |
| 2528 | ‚õî | Application/Cartographer | apps | Location-Marker Tool Component (Overland) | hoch | Ja | #2500, #2501, #2502, #2521 | Cartographer.md#keyboard-shortcuts, Cartographer.md#state-management | [neu] src/application/cartographer/tools/LocationMarker.svelte |
| 2529 | ‚õî | Application/Cartographer | apps | Location-Marker Type Selection (Settlement/Dungeon/Landmark/Custom) | hoch | Ja | #801, #806, #2502, #2528 | Cartographer.md#tool-panels, Map-Feature.md#overworldmap, Map-Feature.md#dungeonmap | LocationMarker.svelte:locationType |
| 2530 | ‚õî | Application/Cartographer | apps | Location-Marker Settlement Icons (Village, Town, City) | hoch | Ja | #2516, #2528 | Cartographer.md#layer-control, Cartographer.md#state-management | LocationMarker.svelte:settlementIcons |
| 2531 | ‚õî | Application/Cartographer | apps | Location-Marker Dungeon Icons (Cave, Ruins, Mine) | hoch | Ja | #2528 | Cartographer.md#location-marker-overland | LocationMarker.svelte:dungeonIcons |
| 2532 | ‚õî | Application/Cartographer | apps | Location-Marker Landmark Icons (Tree, Peak, Tower) | mittel | Ja | #2528 | Cartographer.md#location-marker-overland | LocationMarker.svelte:landmarkIcons |
| 2533 | ‚õî | Application/Cartographer | apps | Location-Marker On-Place Behavior (Open Editor vs Link Existing) | hoch | Ja | #2528 | Cartographer.md#location-marker-overland | LocationMarker.svelte:onPlace |
| 2534 | ‚úÖ | Application/Cartographer | apps | Inspector Tool Component (Alle Map-Typen) | hoch | Ja | - | Cartographer.md#inspector-alle-map-typen | [neu] src/application/cartographer/tools/Inspector.svelte |
| 2535 | ‚¨ú | Application/Cartographer | apps | Inspector Terrain Display (Type, Movement Cost, Change Button) | hoch | Ja | #2534 | Cartographer.md#inspector-alle-map-typen | Inspector.svelte:terrainDisplay |
| 2536 | ‚¨ú | Application/Cartographer | apps | Inspector Elevation Display (Height, Slope, Edit Button) | hoch | Ja | #2534 | Cartographer.md#inspector-alle-map-typen | Inspector.svelte:elevationDisplay |
| 2537 | ‚¨ú | Application/Cartographer | apps | Inspector Climate Display (Base Temp, Override, Precipitation, Edit Button) | mittel | Nein | #2534 | Cartographer.md#inspector-alle-map-typen | Inspector.svelte:climateDisplay |
| 2538 | ‚¨ú | Application/Cartographer | apps | Inspector Features Display (Liste mit Add/Remove Buttons) | hoch | Ja | #2534 | Cartographer.md#inspector-alle-map-typen | Inspector.svelte:featuresDisplay |
| 2539 | ‚¨ú | Application/Cartographer | apps | Inspector Locations Display (POIs auf Tile mit Details-Link) | hoch | Ja | #2534 | Cartographer.md#inspector-alle-map-typen | Inspector.svelte:locationsDisplay |
| 2540 | ‚¨ú | Application/Cartographer | apps | Inspector Factions Display (Fraktions-Pr√§senz mit %-Werten) | niedrig | Nein | #2534 | Cartographer.md#inspector-alle-map-typen | Inspector.svelte:factionsDisplay |
| 2541 | ‚¨ú | Application/Cartographer | apps | Wall-Tool Component (Dungeon) | hoch | Ja | #2500, #2502, #2503 | Cartographer.md#wall-tool-dungeon | [neu] src/application/cartographer/tools/WallTool.svelte |
| 2542 | ‚õî | Application/Cartographer | apps | Wall-Tool Type Selection (Stone, Wood, Bars, Force, Illusion) | hoch | Ja | #2541 | Cartographer.md#wall-tool-dungeon | WallTool.svelte:wallType |
| 2543 | ‚õî | Application/Cartographer | apps | Wall-Tool Draw Mode (Line, Rectangle, Free) | hoch | Ja | #2541 | Cartographer.md#wall-tool-dungeon | WallTool.svelte:drawMode |
| 2544 | ‚õî | Application/Cartographer | apps | Wall-Tool Properties (HP, AC, Blocks Vision/Movement) | hoch | Ja | #2541 | Cartographer.md#wall-tool-dungeon | WallTool.svelte:wallProperties |
| 2545 | ‚õî | Application/Cartographer | apps | Wall-Tool Erase Mode | hoch | Ja | #2541 | Cartographer.md#wall-tool-dungeon | WallTool.svelte:eraseMode |
| 2546 | ‚¨ú | Application/Cartographer | apps | Door-Tool Component (Dungeon) | hoch | Ja | #2500, #2502, #2503 | Cartographer.md#door-tool-dungeon | [neu] src/application/cartographer/tools/DoorTool.svelte |
| 2547 | ‚õî | Application/Cartographer | apps | Door-Tool Type Selection (Simple, Double, Portcullis, Secret, Trapdoor) | hoch | Ja | #2546 | Cartographer.md#door-tool-dungeon | DoorTool.svelte:doorType |
| 2548 | ‚õî | Application/Cartographer | apps | Door-Tool State Selection (Closed, Open, Locked, Stuck, Barred) | hoch | Ja | #2546 | Cartographer.md#door-tool-dungeon | DoorTool.svelte:doorState |
| 2549 | ‚õî | Application/Cartographer | apps | Door-Tool Lock Properties (DC, Key, Locked Toggle) | hoch | Ja | #2546 | Cartographer.md#door-tool-dungeon | DoorTool.svelte:lockProperties |
| 2550 | ‚õî | Application/Cartographer | apps | Door-Tool HP/AC Properties | mittel | Ja | #2546 | Cartographer.md#door-tool-dungeon | DoorTool.svelte:doorProperties |
| 2551 | ‚¨ú | Application/Cartographer | apps | Trap-Tool Component (Dungeon) | niedrig | Nein | #2500, #2502, #2503 | Cartographer.md#trap-tool-dungeon | [neu] src/application/cartographer/tools/TrapTool.svelte |
| 2552 | ‚õî | Application/Cartographer | apps | Trap-Tool Type Selection (Pit, Poison, Magic, Arrow, Fire, Mechanical) | niedrig | Nein | #2551 | Cartographer.md#trap-tool-dungeon | TrapTool.svelte:trapType |
| 2553 | ‚õî | Application/Cartographer | apps | Trap-Tool Detection Properties (Perception DC, Investigation DC) | niedrig | Nein | #2551 | Cartographer.md#trap-tool-dungeon | TrapTool.svelte:detectionDC |
| 2554 | ‚õî | Application/Cartographer | apps | Trap-Tool Disarm Properties (DC, Tool Requirement) | niedrig | Nein | #2551 | Cartographer.md#trap-tool-dungeon | TrapTool.svelte:disarmProperties |
| 2555 | ‚õî | Application/Cartographer | apps | Trap-Tool Effect Properties (Damage, Save, Half-on-Save) | niedrig | Nein | #2551 | Cartographer.md#trap-tool-dungeon | TrapTool.svelte:effectProperties |
| 2556 | ‚õî | Application/Cartographer | apps | Trap-Tool Trigger Selection (Pressure Plate, Tripwire, Proximity, Manual) | niedrig | Nein | #2551 | Cartographer.md#trap-tool-dungeon | TrapTool.svelte:trapTrigger |
| 2557 | ‚õî | Application/Cartographer | apps | Trap-Tool Visibility Toggle (Hidden, Visible, GM Only) | niedrig | Nein | #2551 | Cartographer.md#trap-tool-dungeon | TrapTool.svelte:visibility |
| 2558a | ‚úÖ | Application/Cartographer | apps | Token-Placer Panel Component (UI) | hoch | Ja | - | Cartographer.md#token-placer-dungeon | [neu] src/application/cartographer/tools/token-placer.ts |
| 2558b | ‚¨ú | Application/Cartographer | apps | EntityRegistryPort an CartographerView √ºbergeben | hoch | Ja | #2558a | Cartographer.md#token-placer-dungeon | [neu] src/application/cartographer/tools/token-placer.ts |
| 2559 | ‚¨ú | Application/Cartographer | apps | Token-Placer Type Selection (Creature, Object, Light) | hoch | Ja | #2558 | Cartographer.md#token-placer-dungeon | token-placer.ts:tokenType |
| 2560 | ‚¨ú | Application/Cartographer | apps | Token-Placer Creature Search (mit Recent List und Library Browse) | hoch | Ja | #2558 | Cartographer.md#token-placer-dungeon | token-placer.ts:creatureSearch |
| 2561 | ‚¨ú | Application/Cartographer | apps | Token-Placer Size Selection (T/S/M/L/H/G) | hoch | Ja | #2558 | Cartographer.md#token-placer-dungeon | token-placer.ts:sizeSelection |
| 2562 | ‚¨ú | Application/Cartographer | apps | Token-Placer Object Icons (Chest, Chair, Bed, Books, Potions, Shelf) | mittel | Nein | #2558 | Cartographer.md#token-placer-dungeon | token-placer.ts:objectIcons |
| 2563 | ‚¨ú | Application/Cartographer | apps | Token-Placer Light Source (Source, Radius, Color, Flicker) | mittel | Nein | #2558 | Cartographer.md#token-placer-dungeon | token-placer.ts:lightSource |
| 2564 | ‚úÖ | Application/Cartographer | apps | Layer-Control Panel Component | hoch | Ja | - | Cartographer.md#layer-control | [neu] src/application/cartographer/panels/LayerControl.svelte |
| 2565 | ‚¨ú | Application/Cartographer | apps | Layer-Control Overland Layers (Terrain, Elevation, Climate, Faction, Features, Locations, Grid) | hoch | Ja | #2564 | Cartographer.md#layer-control | LayerControl.svelte:overlandLayers |
| 2566 | ‚¨ú | Application/Cartographer | apps | Layer-Control Dungeon Layers (Walls, Doors, Traps, Tokens, Light Sources, Grid) | hoch | Ja | #2564 | Cartographer.md#layer-control | LayerControl.svelte:dungeonLayers |
| 2567 | ‚¨ú | Application/Cartographer | apps | Layer-Control Visibility Toggle (Eye Icon) | hoch | Ja | #2564 | Cartographer.md#layer-control | LayerControl.svelte:visibilityToggle |
| 2568 | ‚¨ú | Application/Cartographer | apps | Layer-Control Lock Toggle (Lock Icon) | mittel | Ja | #2564 | Cartographer.md#layer-control | LayerControl.svelte:lockToggle |
| 2569 | ‚¨ú | Application/Cartographer | apps | Layer-Control Opacity Slider | mittel | Nein | #2564 | Cartographer.md#layer-control | LayerControl.svelte:opacitySlider |
| 2570 | ‚¨ú | Application/Cartographer | apps | Layer-Control Show All / Hide All Buttons | niedrig | Nein | #2564 | Cartographer.md#layer-control | LayerControl.svelte:showHideAll |
| 2571 | ‚¨ú | Application/Cartographer | apps | Keyboard-Shortcuts Number Keys (1-6 f√ºr Tool-Wechsel) | mittel | Nein | #2502 | Cartographer.md#keyboard-shortcuts | viewmodel.ts:handleKeyPress |
| 2572 | ‚¨ú | Application/Cartographer | apps | Keyboard-Shortcuts Brush Size ([ / ] f√ºr -/+) | mittel | Nein | #2502 | Cartographer.md#keyboard-shortcuts | viewmodel.ts:handleKeyPress |
| 2573 | ‚¨ú | Application/Cartographer | apps | Keyboard-Shortcuts Tool Letters (B=Terrain, E=Elevation, C=Climate, F=Feature, L=Location, I=Inspector) | mittel | Nein | #2502 | Cartographer.md#keyboard-shortcuts | viewmodel.ts:handleKeyPress |
| 2574 | ‚¨ú | Application/Cartographer | apps | Keyboard-Shortcuts Undo/Redo (Ctrl+Z, Ctrl+Y) | hoch | Ja | #2506 | Cartographer.md#keyboard-shortcuts | viewmodel.ts:handleKeyPress |
| 2575 | ‚¨ú | Application/Cartographer | apps | Keyboard-Shortcuts Save (Ctrl+S) | hoch | Ja | #2500 | Cartographer.md#keyboard-shortcuts | viewmodel.ts:handleKeyPress |
| 2576 | ‚¨ú | Application/Cartographer | apps | Keyboard-Shortcuts Pan (Space Hold) | mittel | Ja | #2504 | Cartographer.md#keyboard-shortcuts | viewmodel.ts:handleKeyPress |
| 2577 | ‚¨ú | Application/Cartographer | apps | Keyboard-Shortcuts Zoom (Scroll) | hoch | Ja | #2504 | Cartographer.md#keyboard-shortcuts | view.ts:handleScroll |
| 2578 | ‚¨ú | Application/Cartographer | apps | Map Canvas Rendering Component (Hex/Grid View) | hoch | Ja | #2500 | Cartographer.md#layout-wireframe | [neu] src/application/cartographer/canvas/MapCanvas.svelte |
| 2579 | ‚¨ú | Application/Cartographer | apps | Tool Options Panel Container (Kontextabh√§ngig je nach activeTool) | hoch | Ja | #2500, #2502 | Cartographer.md#layout-wireframe | [neu] src/application/cartographer/panels/ToolOptionsPanel.svelte |
| 2580 | ‚¨ú | Application/Cartographer | apps | Sidebar Collapse/Expand Toggle | mittel | Nein | #2501 | Cartographer.md#state-management | viewmodel.ts:sidebarCollapsed |
| 2581 | ‚¨ú | Application/Cartographer | apps | Inspector Open/Close Toggle | mittel | Nein | #2501 | Cartographer.md#state-management | viewmodel.ts:inspectorOpen |
| 2599 | ‚úÖ | Application/Library | apps | LibraryView Container (Obsidian ItemView) Umgesetzt: - View in main.ts registriert (registerView) - Ribbon-Icon 'book-open' f√ºr Library hinzugef√ºgt - Command 'open-library' hinzugef√ºgt - Alle vorbereiteten Deliverables waren bereits implementiert (view.ts, viewmodel.ts, types.ts, index.ts) | hoch | Ja | #2621, #2706 | Application.md#mvvm-pattern, Application.md#view-factory-pattern, Library.md | main.ts [ge√§ndert]: - Import VIEW_TYPE_LIBRARY, LibraryView aus ./application/library - registerView(VIEW_TYPE_LIBRARY, ...) mit entityRegistry + eventBus - addRibbonIcon('book-open', 'Open Library', ...) - addCommand({ id: 'open-library', name: 'Open Library', ... }) Bereits implementiert (unver√§ndert): - src/application/library/view.ts: LibraryView, createLibraryViewFactory() - src/application/library/viewmodel.ts: createLibraryViewModel() - src/application/library/types.ts: VIEW_TYPE_LIBRARY - src/application/library/index.ts: Public API Exports |
| 2600 | üî∂ | Application/Library | apps | Tab-Navigation Component mit Entity-Type Tabs | hoch | Ja | #2801, #2599 | Library.md#layout-wireframe, Application.md#mvvm-pattern | [neu] src/application/library/TabNavigation.svelte, [neu] src/application/library/types.ts:LibraryState |
| 2601 | ‚úÖ | Application/Library | apps | Entity-Tab Icons und Badges (Count Display) | hoch | Ja | #2600, #2800 | Library.md#state-management, Application.md#mvvm-pattern, Application.md#viewmodel-feature-kommunikation | [√§ndern] src/application/library/TabNavigation.svelte:renderTabs(), [nutzt] src/core/types/entity-registry.port.ts:EntityRegistryPort.count() |
| 2602 | ‚¨ú | Application/Library | apps | Tab Overflow-Menu fuer viele Entity-Typen | mittel | Nein | #2600, #2601 | Library.md#tab-navigation, EntityRegistry.md#entity-type-mapping, Application.md#mvvm-pattern | [√§ndern] src/application/library/TabNavigation.svelte:renderOverflowMenu() |
| 2603 | ‚úÖ | Application/Library | apps | Browse-View Component (List-Ansicht) Umgesetzt: - BrowseView.ts Komponente mit Entity-Liste, Loading/Error/Empty-States - Entity-Cards mit Icon, Name, ID und Selection-Highlighting - Pagination UI mit 'Load More' Button und Count-Anzeige - Integration in view.ts (renderContent() delegiert an BrowseView) Deliverables: - [x] BrowseView.ts Komponente mit Factory-Funktion - [x] Entity-Card-Rendering (in BrowseView integriert statt separater EntityList.ts) - [x] Pagination UI (Load More, Showing X/Y) - [x] Integration in view.ts (renderContent ersetzen) DoD: - [x] TypeScript-Check erfolgreich - [x] Build erfolgreich - [x] Entity-Liste rendert f√ºr alle 17 Entity-Typen - [x] Tab-Wechsel zeigt korrekte Entities - [x] Selection funktioniert (Click) - [x] Edit-Intent funktioniert (DblClick) | hoch | Ja | #2600, #2601, #2621 | Library.md#browse-view, Library.md#view-modi, Application.md#mvvm-pattern | [neu] src/application/library/BrowseView.svelte, [neu] src/application/library/components/EntityList.svelte |
| 2604 | ‚¨ú | Application/Library | apps | Search-Bar mit Echtzeit-Filterung | hoch | Ja | #2603, #2621 | Library.md#filter-controls, EntityRegistry.md#querying | [√§ndern] src/application/library/BrowseView.svelte:renderSearchBar(), [√§ndern] src/application/library/viewmodel.ts:filterEntities() |
| 2605 | ‚¨ú | Application/Library | apps | Quick Filters (Entity-spezifisch: CR, Type, Habitat, Rarity, etc.) | hoch | Ja | #2603 | Library.md#filter-controls, Library.md#browse-view, EntityRegistry.md#querying | [√§ndern] src/application/library/BrowseView.svelte:renderQuickFilters(), [√§ndern] src/application/library/viewmodel.ts:applyFilters() |
| 2606 | ‚¨ú | Application/Library | apps | Sort Controls (Name, CR, Type, Custom Fields) | hoch | Ja | #2603, #2621 | Library.md#filter-controls, Library.md#state-management | [√§ndern] src/application/library/BrowseView.svelte:renderSortControls(), [√§ndern] src/application/library/viewmodel.ts:sortEntities() |
| 2607 | ‚õî | Application/Library | apps | Entity-Card Component (Creature) | hoch | Ja | #2603, #1200 | Library.md#entity-cards, Library.md#browse-view | [neu] src/application/library/cards/CreatureCard.svelte, [nutzt] src/core/schemas/creature.ts:CreatureDefinition |
| 2608 | ‚¨ú | Application/Library | apps | Entity-Card Component (Item) | hoch | Ja | #1600, #2601, #2603 | Library.md#create-edit-modal, EntityRegistry.md#port-interface, Application.md#viewmodel-feature-kommunikation | [neu] src/application/library/cards/ItemCard.svelte, [nutzt] src/core/schemas/item.ts:Item |
| 2609 | ‚¨ú | Application/Library | apps | Entity-Card Component (Spell) | hoch | Ja | #2601, #2603 | Library.md#create-edit-modal, EntityRegistry.md#port-interface, Application.md#viewmodel-feature-kommunikation | [neu] src/application/library/cards/SpellCard.svelte, [neu] src/core/schemas/spell.ts:Spell (Post-MVP) |
| 2610 | ‚õî | Application/Library | apps | Entity-Card Component (Location) | hoch | Ja | #1500, #2603, #2608, #2609 | Library.md#modal-navigation, Library.md#create-edit-modal | [neu] src/application/library/cards/LocationCard.svelte, [nutzt] src/core/schemas/poi.ts:POI |
| 2611 | ‚õî | Application/Library | apps | Entity-Card Component (Generisch fuer andere Entity-Typen) | mittel | Ja | #2603, #2610 | Library.md#modal-navigation, EntityRegistry.md#validierung, Error-Handling.md | [neu] src/application/library/cards/GenericCard.svelte |
| 2612 | ‚õî | Application/Library | apps | Card-Actions (Edit, Duplicate, Delete Buttons) | hoch | Ja | #2601, #2607, #2608, #2609, #2610, #2611, #2621 | Library.md#entity-cards, EntityRegistry.md#entity-deletion-cascades, Application.md#viewmodel-feature-kommunikation | [√§ndern] src/application/library/cards/*.svelte:renderActions(), [nutzt] src/application/library/viewmodel.ts:editEntity(), deleteEntity(), duplicateEntity() |
| 2613 | ‚úÖ | Application/Library | apps | Create/Edit Modal Component (Generisch) Umgesetzt: - EntityModal.ts - Modal-Klasse (extends Obsidian Modal) - EntityModalOptions Interface (mode, entityType, entityId, onCancel) - Modal-Header mit Titel (Create/Edit + EntityType) - Platzhalter-Content f√ºr nachfolgende Tasks (#2614-#2618) - Cancel-Button (ruft viewModel.closeModal()) - Integration in view.ts (renderModal bei 'modal' RenderHint) - Export in index.ts Deliverables: - [x] EntityModal.ts - Modal-Klasse (extends Obsidian Modal) - [x] EntityModalOptions Interface (mode, entityType, entityId, onCancel) - [x] Modal-Header mit Titel (Create/Edit + EntityType) - [x] Platzhalter-Content f√ºr nachfolgende Tasks (#2614-#2618) - [x] Cancel-Button (ruft viewModel.closeModal()) - [x] Integration in view.ts (renderModal bei 'modal' RenderHint) - [x] Export in index.ts DoD: - [x] TypeScript-Check erfolgreich - [x] Build erfolgreich - [x] DblClick auf Entity √∂ffnet Edit-Modal - [x] Modal schlie√üt bei Cancel | hoch | Ja | #2601, #2621 | Library.md#entity-cards, EntityRegistry.md#port-interface | [neu] src/application/library/EntityModal.ts:EntityModal, EntityModalOptions, openEntityModal(), ENTITY_TYPE_LABELS [√§ndern] src/application/library/view.ts:renderModal(), currentModal Property, Import EntityModal [√§ndern] src/application/library/index.ts:Export EntityModal, openEntityModal, EntityModalOptions [nutzt] src/application/library/viewmodel.ts:openCreateModal(), openEditModal(), closeModal() [nutzt] src/application/library/types.ts:ModalState, ModalMode, LibraryRenderHint |
| 2614 | üìã | Application/Library | apps | Modal Tab-Navigation (Basic Info, Stats, Abilities, etc.) Deliverables: - [ ] ModalSectionConfig Interface in types.ts - [ ] ENTITY_SECTIONS Mapping f√ºr Entity-spezifische Tabs - [ ] getEntitySections(entityType) Hilfsfunktion - [ ] renderTabNavigation() in EntityModal.ts - [ ] Tab-Click-Handler mit onSectionChange Callback - [ ] Aktiver Tab visuell hervorgehoben DoD: - [ ] TypeScript-Check erfolgreich - [ ] Build erfolgreich - [ ] DblClick auf Entity √∂ffnet Modal mit Tab-Navigation - [ ] Tab-Wechsel aktualisiert modal.currentSection im State - [ ] Aktiver Tab ist visuell hervorgehoben - [ ] Entity-spezifische Tabs werden angezeigt (z.B. Creature vs Character) | hoch | Ja | #2603, #2613 | Library.md#view-modi, Library.md#state-management | Umgesetzt: - types.ts: ModalSectionConfig Interface, ENTITY_SECTIONS Mapping (creature, character, npc, item, quest, encounter, shop, faction, map, poi, terrain), DEFAULT_SECTIONS Fallback, getEntitySections() Hilfsfunktion - EntityModal.ts: renderTabNavigation() mit CSS-Styling, handleTabClick() mit Callback, refreshContent() f√ºr Tab-Wechsel, currentSection Tracking - view.ts: renderModal() erweitert um currentSection und onSectionChange Callback |
| 2615 | ‚õî | Application/Library | apps | Modal Section-States (Unbesucht, Valid, Invalid, Aktiv) | mittel | Ja | #2603, #2614, #2617 | Library.md#view-modi, POI.md#schema, POI.md#map-navigation | [√§ndern] src/application/library/EntityModal.svelte:updateSectionState(), [√§ndern] src/application/library/viewmodel.ts:validateSection() |
| 2616 | ‚¨ú | Application/Library | apps | Modal Form Generation aus create-spec.ts | hoch | Ja | #2603, #2613 | Library.md#state-management, EntityRegistry.md#port-interface | [√§ndern] src/application/library/EntityModal.svelte:renderForm(), [neu] src/application/library/form-generator.ts:generateFormFields() |
| 2617 | ‚õî | Application/Library | apps | Modal Validation (Required Fields, Type Checks) | hoch | Ja | #2601, #2616, #2803 | Library.md#state-management, EntityRegistry.md#storage | [√§ndern] src/application/library/EntityModal.svelte:validateForm(), [nutzt] Zod-Schemas via EntityRegistry |
| 2618 | ‚õî | Application/Library | apps | Modal Save Actions (Save, Save & New) | hoch | Ja | #2605, #2613, #2621, #2802 | Library.md#filter-controls, Creature.md#schema, Creature.md#creaturedefinition | [√§ndern] src/application/library/EntityModal.svelte:handleSave(), [nutzt] src/application/library/viewmodel.ts:saveEntity() |
| 2619 | ‚õî | Application/Library | apps | Delete Confirmation Dialog | hoch | Ja | #2605, #2612, #2810 | Library.md#filter-controls, Item.md#schema, Item.md#kategorie-details | [neu] src/application/library/DeleteConfirmDialog.svelte, [nutzt] EntityRegistry.delete() mit Referenz-Pr√ºfung |
| 2620 | ‚õî | Application/Library | apps | Keyboard-Shortcuts (Ctrl+N, Ctrl+F, Enter, Delete, etc.) | mittel | Nein | #2603, #2605, #2621 | Library.md#filter-controls, EntityRegistry.md#entity-type-mapping | [√§ndern] src/application/library/viewmodel.ts:handleKeyPress(), [√§ndern] src/application/library/view.ts:registerDomEvent() |
| 2621 | ‚úÖ | Application/Library | apps | LibraryViewModel State Management | hoch | Ja | - | Library.md#filter-controls, POI.md#poi-typen, POI.md#basepoi | [neu] src/application/library/viewmodel.ts, [neu] src/application/library/types.ts:LibraryState, [nutzt] EntityRegistryPort |
| 2622 | ‚õî | Application/Library | apps | EntityRegistry Integration (getConfig, createSpec, browseConfig) | hoch | Ja | #2602, #2621, #2800, #2801 | Library.md#tab-navigation, EntityRegistry.md#port-interface | [√§ndern] src/application/library/viewmodel.ts:loadEntities(), [nutzt] EntityRegistryPort.getAll(), query() |
| 2623 | ‚õî | Application/Library | apps | Grid-View Component (Alternative Ansicht) | niedrig | Nein | #2602, #2603 | Library.md#tab-navigation, Library.md#entity-tabs | [neu] src/application/library/GridView.svelte |
| 2624 | ‚¨ú | Application/Library | apps | Tree-View Component (Locations Hierarchie) | mittel | Nein | #1500, #2601, #2603 | Library.md#keyboard-shortcuts, Application.md#mvvm-pattern | [neu] src/application/library/TreeView.svelte, [nutzt] POI.parentId f√ºr Hierarchie |
| 2625 | ‚¨ú | Application/Library | apps | Bulk-Actions (Multi-Select und Batch-Delete) | niedrig | Nein | #2603, #2621 | Library.md#browse-view, Library.md#state-management | [√§ndern] src/application/library/BrowseView.svelte:renderBulkActions(), [√§ndern] src/application/library/viewmodel.ts:deleteMultiple() |
| 2626 | ‚õî | Application/Library | apps | Import/Export Funktionalitaet | niedrig | Nein | #2608, #2621, #2802 | Library.md#create-edit-modal, EntityRegistry.md#port-interface | [√§ndern] src/application/library/viewmodel.ts:exportEntities(), importEntities(), [nutzt] EntityRegistry save/delete |
| 2700 | ‚úÖ | Core | core | Result<T, E> Type und API (ok, err, isOk, isErr, unwrap, unwrapOr, map, mapErr) | hoch | Ja | - | Core.md#result-option-types, Error-Handling.md | src/core/types/result.ts:ok(), err(), isOk(), isErr(), unwrap(), unwrapOr(), map(), mapErr(), flatMap() |
| 2701 | ‚úÖ | Core | core | Option<T> Type und API (some, none, isSome, isNone, getOrElse, fromNullable) | hoch | Ja | - | Core.md#resultoption-types | src/core/types/option.ts:some(), none(), isSome(), isNone(), getOrElse(), fromNullable(), unwrap(), map(), flatMap(), filter() |
| 2702 | ‚úÖ | [TEST FAILED] Core | core | Branded Types: EntityId<T>, Timestamp, TimeSegment | hoch | Ja | - | Core.md#branded-types, EntityRegistry.md#entity-type-mapping | src/core/types/common.ts:EntityId, Timestamp, TimeSegment, AppError |
| 2703 | ‚úÖ | Core | core | Entity Type Union (creature, character, npc, faction, item, etc.) | hoch | Ja | - | Core.md#entitytype-union, EntityRegistry.md#port-interface | src/core/types/common.ts:EntityType (18 types: creature, character, npc, faction, item, map, location, poi, maplink, terrain, quest, encounter, shop, calendar, journal, worldevent, track, party) |
| 2704 | ‚úÖ | Core | core | BaseEntity und TrackedEntity Interfaces | hoch | Ja | #2702 | Core.md#base-interfaces | src/core/types/common.ts:BaseEntity, TrackedEntity |
| 2705 | ‚úÖ | Core | core | Helper Functions (createEntityId, toEntityId, now, toTimestamp, entityIdSchema) | hoch | Ja | #2702 | Core.md#helpers | src/core/types/common.ts:createEntityId(), toEntityId(), now(), toTimestamp(), createError(); src/core/schemas/common.ts:entityIdSchema(), timestampSchema, entityTypeSchema, timeSegmentSchema, appErrorSchema |
| 2706 | ‚úÖ | Core | core | DomainEvent Interface mit correlationId | hoch | Ja | #2702 | Core.md#event-struktur, EventBus.md#event-struktur-pflichtfelder, Events-Catalog.md | src/core/events/domain-events.ts:DomainEvent, createEvent(), newCorrelationId() |
| 2707 | ‚úÖ | Core | core | hex-math Utils (hexDistance, coordToKey, hexNeighbors, hexesInRadius) | hoch | Ja | - | Core.md#utils, Map-Feature.md#hexagonal-grid | src/core/utils/hex-math.ts:hexDistance(), coordToKey(), hexNeighbors(), hexesInRadius(), hexRing(), hexAdjacent(), axialToPixel(), pixelToAxial() |
| 2708 | ‚úÖ | Core | core | time-math Utils (addDuration, getTimeOfDay, getCurrentSeason, getMoonPhase) | hoch | Ja | #2702 | Core.md#utils, Time-System.md#zeit-operationen | src/core/utils/time-math.ts:getTimeSegment(), getTimeOfDay(), addDuration(), diffInHours(), getCurrentSeason(), getMoonPhase() |
| 2709 | ‚úÖ | Core | core | creature-utils (parseCR, calculateXP, getEncounterMultiplier, isValidCRRange) | hoch | Ja | - | Core.md#entity-spezifische-utils, Creature.md#schema, Encounter-Balancing.md#xp-berechnung | src/core/utils/creature-utils.ts:parseCR(), calculateXP(), getEncounterMultiplier(), isValidCRRange(), calculateEffectiveXP() |
| 2710 | ‚õî | Core | core | item-utils erweitern: calculateStackWeight (50 coins = 1lb), canStack (category-spezifisch), getItemCategory, isWeapon, isArmor Helper | hoch | Ja | #1600, #1604 | Core.md#entity-spezifische-utils, Item.md#schema | [neu] src/core/utils/item-utils.ts:calculateStackWeight(), canStack(), getItemCategory() |
| 2711 | ‚¨ú | Core | core | npc-utils (calculateReactionModifier, getDisposition) | hoch | Ja | - | Core.md#entity-spezifische-utils, NPC-System.md#personality | [neu] src/core/utils/npc-utils.ts:calculateReactionModifier(), getDisposition() |
| 2712 | ‚¨ú | Core | core | faction-utils (calculateRelationChange, getStandingLabel) | hoch | Ja | - | Core.md#entity-spezifische-utils, Faction.md#reputation | [neu] src/core/utils/faction-utils.ts:calculateRelationChange(), getStandingLabel() |
| 2713 | ‚õî | Core | core | terrain-utils (getMovementCost, getNativeCreatures, matchEncounterTerrain) | mittel | Ja | #1700 | Core.md#entity-spezifische-utils, Terrain.md#verwendung-in-anderen-features, Terrain.md#travel-system, Terrain.md#encounter-system | [neu] src/core/utils/terrain-utils.ts:getMovementCost(), getNativeCreatures(), matchEncounterTerrain() |
| 2714 | ‚¨ú | Core | core | shop-utils Post-MVP: getInventoryValue(), quickBuy(), quickSell() Convenience-Funktionen | niedrig | Nein | #2111, #2112 | Core.md#entity-spezifische-utils, Shop.md#preisberechnung | src/core/utils/shop-utils.ts:getInventoryValue(), quickBuy(), quickSell() [neu] |
| 2715 | ‚¨ú | Core | core | spell-utils (validateSpellSlot, getComponentsRequired, calculateSpellDC) | niedrig | Nein | - | Core.md#post-mvp | [neu] src/core/utils/spell-utils.ts:validateSpellSlot(), getComponentsRequired(), calculateSpellDC() |
| 2716 | ‚úÖ | Core | core | inventory-utils (addItemToCharacter, removeItemFromCharacter, sumInventoryWeight, countRations, consumeRations) | hoch | Ja | - | Core.md#entity-spezifische-utils, Inventory-System.md#encumbrance, Character-System.md#inventory | src/core/utils/inventory-utils.ts:addItemToCharacter(), removeItemFromCharacter(), addGoldToCharacter(), removeGoldFromCharacter(), transferItem(), sumInventoryWeight(), countRations(), consumeRations() |
| 2717 | ‚úÖ | Core | core | loot-utils (distributeCurrencyEvenly, distributeToCharacter, quickAssign, trackMagicItemReceived) | hoch | Ja | - | Core.md#entity-spezifische-utils, Loot-Feature.md#verteilung | src/core/utils/loot-utils.ts:distributeCurrencyEvenly(), distributeToCharacter(), quickAssign(), trackMagicItemReceived(), getMagicItemTracking(), getTotalMagicItemsReceived() |
| 2718 | ‚úÖ | Core | core | encounter-utils (resolveCreatureSlots, calculateEncounterXP, checkTriggers) | hoch | Ja | - | Core.md#entity-spezifische-utils, Encounter-System.md#5-step-pipeline, Encounter-Balancing.md#cr-balancing | src/core/utils/encounter-utils.ts:resolveCreatureSlots(), calculateEncounterXP(), checkTriggers(), filterEligibleCreatures(), calculateCreatureWeight(), deriveEncounterType(), validateVariety(), selectCompanions() |
| 2719 | ‚úÖ | Core/EventBus | core | EventBus Interface mit publish(), subscribe(), subscribeAll(), clear() | hoch | Ja | - | EventBus.md#kommunikationsfluss, Core.md#event-struktur, Features.md#kommunikation | src/core/events/event-bus.ts:EventBus, publish(), subscribe(), subscribeAll(), subscriberCount(), clear(), clearSticky(), request() |
| 2720 | ‚úÖ | Core/EventBus | core | Request/Response API: request() Methode mit correlationId-Matching | hoch | Ja | #2719 | EventBus.md#async-patterns, EventBus.md#requestresponse-f√ºr-workflows, Core.md#correlationid-regeln | src/core/events/event-bus.ts:request() (Zeilen ~100-140) |
| 2721 | ‚úÖ | Core/EventBus | core | TimeoutError Klasse f√ºr request() Timeouts | hoch | Ja | #2720 | EventBus.md#timeout-verhalten, EventBus.md#async-patterns | src/core/events/timeout-error.ts:TimeoutError |
| 2722 | ‚úÖ | Core/EventBus | core | Sticky Events: publish({sticky}), subscribe({replay}), clearSticky() | hoch | Ja | #2719 | EventBus.md#sticky-events, EventBus.md#lifecycle, Events-Catalog.md#konvention-zusammenfassung | src/core/events/event-bus.ts:PublishOptions, SubscribeOptions, stickyEvents Map, clearSticky() |
| 2723 | ‚úÖ | Core/EventBus | core | EventTypes Konstanten-Objekt (Single Source of Truth f√ºr Event-Namen) | hoch | Ja | #2706 | EventBus.md#type-safe-events, EventBus.md#event-naming-konvention, Events-Catalog.md, Core.md#event-struktur | src/core/events/domain-events.ts:EventTypes (time:*, party:*, travel:*, encounter:*, combat:*, environment:*, loot:*, quest:*) |
| 2724 | ‚úÖ | Core/EventBus | core | Event Payload Interfaces f√ºr alle Event-Typen | hoch | Ja | #2723 | EventBus.md#type-safe-events, Events-Catalog.md, Core.md#domainevent-interface | src/core/events/domain-events.ts:TimeAdvanceRequestedPayload, TravelStartRequestedPayload, EncounterGeneratedPayload, CombatStartedPayload, etc. |
| 2725 | ‚úÖ | Core/EventBus | core | EventPayloadMap f√ºr type-safe Event-Handling | hoch | Ja | #2723, #2724 | EventBus.md#type-safe-events, Core.md#event-struktur | src/core/events/domain-events.ts:EventPayloadMap |
| 2726 | ‚úÖ | Core/EventBus | core | Event Factory Functions: createEvent(), newCorrelationId() | hoch | Ja | #2706, #2723 | EventBus.md#events-publizieren, Core.md#correlationid-regeln, Features.md#event-flow | src/core/events/domain-events.ts:createEvent(), newCorrelationId() |
| 2800 | ‚úÖ | Core/EntityRegistry | core | EntityRegistryPort Interface (get, getAll, query, save, delete, exists, count) | hoch | Ja | #2703 | EntityRegistry.md#port-interface, Core.md#branded-types | src/core/types/entity-registry.port.ts:EntityRegistryPort, Entity<T>, EntityTypeMap |
| 2801 | üî∂ | Core/EntityRegistry | core | EntityTypeMap mit allen 14 MVP Entity-Typen (creature, character, npc, faction, item, map, poi, terrain, quest, encounter, shop, calendar, journal, worldevent, track) | hoch | Ja | - | EntityRegistry.md#entity-type-mapping, Core.md#entitytype-union | src/core/types/common.ts:EntityType (18 Typen inkl. location, maplink, party), src/core/schemas/common.ts:entityTypeSchema - Mismatch: Spec sagt 14 MVP-Typen, Code hat 18 |
| 2802 | ‚úÖ | Core/EntityRegistry | core | VaultEntityRegistryAdapter Implementation (JSON-File-basiert mit Vault/{plugin}/data/{entityType}/{id}.json) | hoch | Ja | - | EntityRegistry.md#storage, Infrastructure.md#adapter-pattern | src/infrastructure/vault/entity-registry.adapter.ts:createVaultEntityRegistryAdapter(), EntityCache, loadEntityType(), saveEntity(), deleteEntity() |
| 2803 | ‚¨ú | Core/EntityRegistry | core | Zod-Validierung bei save() mit getSchemaForType() | hoch | Ja | #2802 | EntityRegistry.md#validierung, Core.md#zod-schemas | src/infrastructure/vault/entity-registry.adapter.ts:save() [√§ndern], [neu] src/core/schemas/index.ts:getSchemaForType() - nutzt existierende Schemas aus src/core/schemas/ |
| 2804 | ‚úÖ | Core/EntityRegistry | core | Predicate-basierte query() Methode (Lineare Suche f√ºr MVP) | hoch | Ja | - | EntityRegistry.md#querying | src/infrastructure/vault/entity-registry.adapter.ts:query() |
| 2805 | ‚úÖ | Core/EntityRegistry | core | Unbounded In-Memory Cache mit Map pro EntityType | hoch | Ja | - | EntityRegistry.md#caching-strategy | src/infrastructure/vault/entity-registry.adapter.ts:EntityCache [neu - private interface], ensureCacheLoaded() [neu] |
| 2806 | ‚¨ú | Core/EntityRegistry | core | Lazy Loading: Cache-Population bei erstem Zugriff auf Entity-Typ | hoch | Ja | #2805 | EntityRegistry.md#lifecycle | src/infrastructure/vault/entity-registry.adapter.ts:get() [√§ndern], getAll() [√§ndern] - beide rufen ensureCacheLoaded() auf |
| 2807 | ‚¨ú | Core/EntityRegistry | core | File-Watcher Invalidierung bei modify/delete Events | hoch | Ja | #2805 | EntityRegistry.md#caching-strategy, Infrastructure.md#file-watcher-integration | src/infrastructure/vault/entity-registry.adapter.ts:registerFileWatcher() [neu], invalidateFromPath() [neu] - Obsidian vault.on('modify'/'delete') Events |
| 2808 | ‚¨ú | Core/EntityRegistry | core | Pessimistisches Speichern (sofort bei save(), erst Vault dann Cache) | hoch | Ja | #2802, #2805 | EntityRegistry.md#persistence-timing, Infrastructure.md#state-persistenz | src/infrastructure/vault/entity-registry.adapter.ts:save() [√§ndern] - 1. Vault write, 2. Cache update, 3. Return Result |
| 2809 | ‚õî | Core/EntityRegistry | core | Error Handling: ValidationError, NotFoundError, IOError Klassen | hoch | Ja | #2803 | EntityRegistry.md#error-handling, Error-Handling.md | [neu] src/core/types/entity-registry-errors.ts:ValidationError, NotFoundError, IOError (extends Error) |
| 2810 | ‚¨ú | Core/EntityRegistry | core | Entity-Deletion Cascades: Referenz-Pr√ºfung und Soft-Cascade Bereinigung | mittel | Ja | #2802 | EntityRegistry.md#entity-deletion-cascades | src/infrastructure/vault/entity-registry.adapter.ts:delete() [√§ndern], checkReferences() [neu], confirmDeletionDialog() [neu - UI-Integration], cascadeCleanup() [neu] |
| 2811 | ‚¨ú | Core/EntityRegistry | core | Constructor Injection: Features erhalten EntityRegistryPort via Constructor | hoch | Ja | #2800, #2802 | EntityRegistry.md#bootstrapping, Features.md#feature-communication | src/main.ts:onload() [√§ndern - bootstrapFeatures()], Feature-Constructors [√§ndern - entityRegistry-Parameter hinzuf√ºgen] |
| 2815 | ‚úÖ | Core/EntityRegistry | core | CreatureDefinition vs Creature vs NPC Hierarchie dokumentieren und implementieren | hoch | Ja | - | EntityRegistry.md#creature-hierarchie-definition-vs-instanz-vs-npc, Creature.md, NPC-System.md | src/core/schemas/creature.ts:CreatureDefinition (existiert), [neu] src/core/types/creature.ts:Creature (Runtime-Instanz - nicht in Registry), src/core/schemas/npc.ts:NPC (existiert mit CreatureRef) - Hierarchie ist implementiert aber nicht dokumentiert |
| 2817 | ‚¨ú | Core/EntityRegistry | core | In-Memory-Indizes f√ºr h√§ufige Queries (Post-MVP Performance-Optimierung) | niedrig | Nein | #2804 | EntityRegistry.md#prioritaet | [neu] src/infrastructure/vault/entity-registry.adapter.ts:buildIndices(), IndexConfig, queryWithIndex() |
| 2818 | ‚õî | Core/EntityRegistry | core | Schema-Migration System f√ºr automatische Updates (Post-MVP) | niedrig | Nein | #2803 | EntityRegistry.md#keine-backwards-migration | [neu] src/infrastructure/vault/schema-migration.ts:MigrationRunner, Migration interface, migrationRegistry |
| 2900 | ‚¨ú | Features/Economy | features | EconomyFeaturePort Interface mit getState() (Post-MVP) | niedrig | Nein | - | Features.md#economy-feature-post-mvp, Features.md#primary-features, Shop.md#prioritaet | [neu] src/features/economy/types.ts:EconomyFeaturePort, EconomyConfig |
| 2901 | ‚õî | Features/Economy | features | EconomyState: transactionLog, shopStock, restockTimers (Post-MVP) | niedrig | Nein | #2900 | Features.md#economy-feature-post-mvp, Shop.md#shopinventoryentry | [neu] src/features/economy/types.ts:EconomyState, Transaction, StockEntry |
| 2902 | ‚õî | Features/Economy | features | economy:transaction-completed Event (Post-MVP) | niedrig | Nein | #2900 | Features.md#economy-feature-post-mvp, Events-Catalog.md#event-naming-konvention, EventBus.md#event-naming-konvention | [neu] src/core/events/domain-events.ts:EconomyTransactionCompletedPayload |
| 2903 | ‚õî | Features/Economy | features | economy:transaction-failed Event mit Compensation Pattern (Post-MVP) | niedrig | Nein | #2900 | Features.md#compensation-pattern, Events-Catalog.md#event-naming-konvention, Error-Handling.md#event-fehlerbehandlung | [neu] src/core/events/domain-events.ts:EconomyTransactionFailedPayload mit correlationId |
| 2904 | ‚õî | Features/Economy | features | EconomyOrchestrator: Automatische Transaktionen + Stock-Verwaltung (Post-MVP) | niedrig | Nein | #2901, #2902, #2903 | Features.md#economy-feature-post-mvp, Features.md#state-machine-pattern, Shop.md#preis-berechnung | [neu] src/features/economy/orchestrator.ts:createEconomyOrchestrator(), processTransaction(), updateStock() |
| 2905 | ‚õî | Features/Factions | features | FactionsFeaturePort Interface mit getState() | hoch | Ja | #1400 | Features.md#factions-feature, Features.md#primary-features, Faction.md#schema | [neu] src/features/factions/types.ts:FactionsFeaturePort, FactionsConfig |
| 2906 | ‚õî | Features/Factions | features | FactionsState: relations, reputation, plannedActions | hoch | Ja | #2905, #1403 | Features.md#factions-feature, Faction.md#schema, Faction.md#events | [neu] src/features/factions/types.ts:FactionsState, FactionRelation, FactionAction |
| 2907 | ‚õî | Features/Factions | features | faction:relation-changed Event | hoch | Ja | #2905 | Features.md#factions-feature, Events-Catalog.md#faction, EventBus.md#event-naming-konvention | [neu] src/core/events/domain-events.ts:FactionRelationChangedPayload |
| 2908 | ‚õî | Features/Factions | features | faction:action-triggered Event | hoch | Ja | #2905 | Features.md#factions-feature, Events-Catalog.md#faction, EventBus.md#event-naming-konvention | [neu] src/core/events/domain-events.ts:FactionActionTriggeredPayload |
| 2909 | ‚õî | Features/Factions | features | FactionsOrchestrator: Relation-Tracking + Reputation-System | hoch | Ja | #2906, #2907, #2908, #1401 | Features.md#factions-feature, Features.md#state-machine-pattern, Faction.md#kultur-vererbung | [neu] src/features/factions/orchestrator.ts:createFactionsOrchestrator(), updateRelation(), calculateReputation() |
| 2910 | ‚¨ú | Architecture | features | Compensation Pattern: travel:failed Event bei Fehler publizieren | hoch | Ja | - | Features.md#compensation-pattern, Events-Catalog.md#travel, Error-Handling.md#event-fehlerbehandlung, Travel-System.md#fehlerbehandlung | src/features/travel/travel-service.ts:startTravel() [√§ndern - publish travel:failed bei Fehler] |
| 2911 | ‚úÖ | Architecture | features | Compensation Pattern: encounter:failed Event bei Fehler publizieren | hoch | Ja | - | Features.md#compensation-pattern, Events-Catalog.md#encounter, Error-Handling.md#event-fehlerbehandlung, Encounter-System.md#events | src/features/encounter/encounter-service.ts:generateEncounter() [√§ndern - publish encounter:failed bei Fehler] |
| 2912 | ‚¨ú | Architecture | features | Compensation Pattern: combat:failed Event bei Fehler publizieren | mittel | Ja | - | Features.md#compensation-pattern, Events-Catalog.md#combat, Error-Handling.md#event-fehlerbehandlung, Combat-System.md#events | src/features/combat/combat-service.ts:startCombat() [√§ndern - publish combat:failed bei Fehler] |
| 2913 | ‚¨ú | Architecture | features | Compensation Pattern: map:load-failed Event bei Fehler publizieren | hoch | Ja | - | Features.md#compensation-pattern, Events-Catalog.md#map, Error-Handling.md#event-fehlerbehandlung, Map-Feature.md#events | src/features/map/map-service.ts:loadMap() [√§ndern - publish map:load-failed bei Fehler] |
| 2914 | ‚¨ú | Architecture | infra | Compensation Pattern: entity:save-failed Event bei Fehler publizieren | hoch | Ja | - | Features.md#compensation-pattern, Features.md#entityregistry-pattern, EntityRegistry.md, EventBus.md#event-naming-konvention, Events-Catalog.md | src/infrastructure/vault/entity-adapter.ts:save() [√§ndern - publish entity:save-failed bei Fehler], delete() [√§ndern] |
| 2915 | ‚õî | Architecture | core | Compensation Pattern: Alle *-failed Events m√ºssen correlationId √ºbernehmen | hoch | Ja | #2910-#2914 | Features.md#compensation-pattern, EventBus.md#event-struktur-pflichtfelder, Error-Handling.md#event-fehlerbehandlung | src/core/events/domain-events.ts [√§ndern - add correlationId to all *-failed payloads], alle Feature-Services [√§ndern - correlationId propagieren] |
| 2916 | ‚úÖ | Application | apps | NotificationService Interface (show() Methode mit Notification-Typ) | hoch | Ja | - | Error-Handling.md#notification-service, Application.md#viewmodel--feature-kommunikation | src/application/shared/notification-service.ts:NotificationService (existiert - interface und implementation kombiniert) |
| 2917a | ‚úÖ | Application | apps | Notification Type: type, title, message, duration + show() Methode | hoch | Ja | #2916 | Error-Handling.md#notification-service, Error-Handling.md#user-feedback | src/application/shared/notification-service.ts:Notification, NotificationType, NotificationAction, show() |
| 2917b | ‚¨ú | Application | apps | NotificationAction[] Support (Custom Modal f√ºr interaktive Actions) | mittel | Nein | #2916, #2917a | Error-Handling.md#user-feedback, Error-Handling.md#recovery-strategien | src/application/shared/notification-service.ts:show() [√§ndern] |
| 2918 | ‚úÖ | Application | apps | NotificationService Obsidian Implementation (nutzt Notice API) | hoch | Ja | #2916, #2917a | Error-Handling.md#notification-service, Infrastructure.md | src/application/shared/notification-service.ts:createNotificationService() (existiert - nutzt Obsidian Notice) |
| 2919 | ‚úÖ | Application | apps | Error-Formatter Utilities: formatMapError, formatTravelError, etc. f√ºr User-Nachrichten | hoch | Ja | #2917a | Error-Handling.md#user-feedback, Error-Handling.md#error-kategorisierung-fuer-user | src/application/shared/notification-service.ts:formatMapError(), formatTravelError(), formatTimeError(), formatWeatherError(), formatPartyError(), formatEncounterError(), formatCombatError(), formatQuestError() |
| 2920 | ‚¨ú | Architecture | core | Structured Logging: LogEntry Type, Logger Interface (debug, info, warn, error) | niedrig | Nein | #2702 | Error-Handling.md#structured-logging, Error-Handling.md#log-levels, Core.md#branded-types | [neu] src/core/utils/logger.ts:LogEntry, Logger interface, LogLevel enum |
| 2921 | ‚õî | Architecture | infra | Structured Logging: Console/File Logger Implementierung | niedrig | Nein | #2920 | Error-Handling.md#structured-logging, Error-Handling.md#wann-loggen | [neu] src/infrastructure/console-logger.ts:createConsoleLogger(), createFileLogger() |
| 2922a | ‚úÖ | Infrastructure | infra | Vault-Struktur: maps/ + parties/ Verzeichnisse | hoch | Ja | - | Infrastructure.md#vault-struktur | vault-map-adapter.ts, vault-party-adapter.ts |
| 2922b | ‚¨ú | Infrastructure | infra | Vault-Struktur: data/ Unterverzeichnisse f√ºr EntityRegistry | hoch | Ja | Entity-Adapter | Infrastructure.md#vault-struktur | [neu] |
| 2922c | ‚¨ú | Infrastructure | infra | Vault-Struktur: audio/ Verzeichnis | mittel | Nein | Audio-Feature | Infrastructure.md#vault-struktur | [neu] |
| 2923 | ‚úÖ | Infrastructure | infra | Shared Vault-Utilities: JSON parse/serialize Helpers | hoch | Ja | #2700, #2702 | Infrastructure.md#adapter-pattern, Core.md#result-option-types, Error-Handling.md#io-errors-infrastructure | src/infrastructure/vault/shared.ts:VaultIO, createVaultIO(), readJson(), writeJson(), listJsonFiles(), ensureDir() |
| 2924 | ‚úÖ | Infrastructure | infra | VaultMapAdapter Implementation (MapStoragePort) | hoch | Ja | #2700, #2802, #2923 | Infrastructure.md#adapter-pattern, Infrastructure.md#beispiel, Map-Feature.md#map-schemas, Features.md#storageport-pattern | src/infrastructure/vault/vault-map-adapter.ts:createVaultMapAdapter(), loadMap(), saveMap(), listMaps() |
| 2925 | ‚úÖ | Infrastructure | infra | VaultTimeAdapter Implementation (TimeStoragePort) | hoch | Ja | #2700, #2802, #2923 | Infrastructure.md#adapter-pattern, Time-System.md#schemas, Features.md#storageport-pattern | src/infrastructure/vault/vault-time-adapter.ts:createVaultTimeAdapter(), loadState(), saveState() |
| 2926 | ‚úÖ | Infrastructure | infra | VaultPartyAdapter Implementation (PartyStoragePort) | hoch | Ja | #2700, #2802, #2923 | Infrastructure.md#adapter-pattern, Infrastructure.md#vault-struktur, Features.md#storageport-pattern | src/infrastructure/vault/vault-party-adapter.ts:createVaultPartyAdapter(), loadParty(), saveParty() |
| 2927 | ‚¨ú | Infrastructure | infra | PresetPort Interface: get(), list(), search() f√ºr Plugin-Bundled Data | hoch | Ja | #2701, #2703 | Infrastructure.md#presetport-plugin-bundled-data, Infrastructure.md#phase-1-nur-plugin-bundled, Core.md#option-t, EntityRegistry.md#entity-type-mapping | [neu] src/infrastructure/vault/preset-adapter.ts:PresetPort interface, BundledPresets type |
| 2928 | ‚¨ú | Infrastructure | infra | Preset Index: Re-Exports aller bundled Presets (creatures, terrains, items) | hoch | Ja | #1703 | Infrastructure.md#build-prozess, EntityRegistry.md#entity-type-mapping | [neu] presets/index.ts:bundledPresets export |
| 2929 | ‚õî | Infrastructure | infra | PresetAdapter Implementation: Phase 1 nur Plugin-Bundled (readonly) | hoch | Ja | #2701, #2927, #2928 | Infrastructure.md#phase-1-nur-plugin-bundled, Core.md#option-t | [neu] src/infrastructure/vault/preset-adapter.ts:createPresetAdapter(), get(), list(), search() |
| 2930 | ‚¨ú | Infrastructure | infra | File-Watcher Registration f√ºr EntityRegistry (SaltMarcher/data/{entityType}/*.json) | mittel | Nein | #2802, #2805 | Infrastructure.md#file-watcher-integration, EntityRegistry.md#invalidierung-via-file-watcher, EntityRegistry.md#caching-strategy | src/main.ts:onload() [√§ndern - registerEvent() f√ºr vault.on('modify'/'delete')] |
| 2931 | ‚¨ú | Infrastructure | infra | File-Watcher Registration f√ºr Map-Tiles (SaltMarcher/maps/{mapId}/tiles.json) | mittel | Nein | #2805, #2924 | Infrastructure.md#file-watcher-integration, Map-Feature.md#map-schemas | src/main.ts:onload() [√§ndern - registerEvent() f√ºr vault.on('modify')] |
| 2932 | ‚¨ú | Infrastructure | infra | ResumableStateEnvelope Schema: version, savedAt, featureName, data | mittel | Ja | #2702 | Infrastructure.md#resumable-state-schema, Core.md#timestamp, Features.md#resumable-pattern | [neu] src/core/schemas/resumable-state.ts:ResumableStateEnvelopeSchema, ResumableStateEnvelope<T> type |
| 2933 | ‚õî | Infrastructure | infra | ResumableFeature Interface: serialize(), restore(), resumeEnabled | mittel | Ja | #2932 | Infrastructure.md#resumable-state-schema, Features.md#resumable-pattern, Features.md#state-ownership--persistence | [neu] src/features/types.ts:ResumableFeature interface |
| 2934 | ‚õî | Infrastructure | infra | Resumable State Version-Mismatch Handling: Console-Warning und State verwerfen | mittel | Ja | #2932, #2933 | Infrastructure.md#resumable-state-schema, Features.md#resumable-pattern | src/main.ts:onload() [√§ndern - in restore() Version pr√ºfen und bei Mismatch Warning + fresh start], src/features/travel/travel-service.ts:restore() [√§ndern] |
| 2935 | ‚õî | Infrastructure | infra | Travel ResumableState: routeInProgress, currentTileIndex, partyId | mittel | Ja | #2702, #2933 | Infrastructure.md#resumable-state-schema, Travel-System.md#state-machine, Features.md#resumable-pattern | src/features/travel/types.ts:TravelResumableState [neu], TravelService:serialize(), restore() [√§ndern] |
| 2936 | ‚¨ú | Infrastructure | infra | MockVault Utility f√ºr Integration-Tests (createMockVault mit file map) | mittel | Nein | #2700 | Infrastructure.md#testing, Infrastructure.md#pattern-integration-tests-mit-mockvault, Core.md#result-option-types | [neu] devkit/testing/mock-vault.ts:createMockVault(), MockVault class mit file map |
| 2937 | ‚¨ú | Infrastructure | infra | Test Fixtures: devkit/testing/fixtures/ Verzeichnis mit Beispiel-Daten | mittel | Nein | - | Infrastructure.md#testing, Infrastructure.md#test-utilities | [neu] devkit/testing/fixtures/maps/, creatures/, items/ mit JSON fixtures |
| 2938 | ‚õî | Infrastructure | infra | VaultMapAdapter Integration-Tests mit MockVault | mittel | Nein | #2924, #2936 | Infrastructure.md#pattern-integration-tests-mit-mockvault, Infrastructure.md#test-utilities | [neu] src/infrastructure/vault/vault-map-adapter.test.ts:describe('VaultMapAdapter') |
| 2939 | ‚úÖ | Infrastructure | infra | Pessimistic Save-First Strategie: Alle Adapter speichern erst, dann State √§ndern | hoch | Ja | #2700, #2923 | Infrastructure.md#state-persistenz, Infrastructure.md#persistence-strategy-pessimistic-save-first, Features.md#persistence-strategy-pessimistic-save-first, EntityRegistry.md#persistence-timing | party-service.ts:setPosition(), setActiveTransport(), addMember(), removeMember(); time-service.ts:advanceTime(), setTime(), EventBus-Handler; travel-service.ts:processNextTravelTick(), executeMove(), advanceSegmentInternal(); viewmodel.ts:onTimeAdvance() |
| 2940 | ‚õî | Infrastructure | infra | Error-Handling in Adapters: MAP_NOT_FOUND, PARSE_FAILED, SAVE_FAILED | hoch | Ja | #2700, #2809, #2923 | Infrastructure.md#fehlerbehandlung, Error-Handling.md#io-errors-infrastructure, Error-Handling.md#zwischen-layers, EntityRegistry.md#error-handling | src/infrastructure/vault/vault-map-adapter.ts, vault-time-adapter.ts, vault-party-adapter.ts [√§ndern - consistent error codes in Result returns] (teilweise implementiert via shared.ts:VaultIO, muss systematisch gepr√ºft werden) |
| 2941 | ‚õî | Infrastructure | infra | HybridPresetPort Interface f√ºr Phase 2: getSource(), exportToVault() (Post-MVP) | niedrig | Nein | #2700, #2929 | Infrastructure.md#phase-2-hybrid-spaeter, Core.md#result-option-types | [neu] src/infrastructure/vault/preset-adapter.ts:HybridPresetPort interface [erweitern], getSource(), exportToVault() |
| 2942 | ‚úÖ | Core/EntityRegistry | core | EntityRegistry Bootstrap: preloadEntityTypes() in main.ts vor Feature-Init | hoch | Ja | - | EntityRegistry.md#bootstrapping | - |
| 2943 | ‚¨ú | Core/EntityRegistry | core | save() auf Vault-Write warten (pessimistic save-first) | hoch | Ja | #2802 | EntityRegistry.md#persistence-timing | - |
| 2944 | ‚õî | Core/EntityRegistry | core | save() I/O-Fehler an Caller propagieren | hoch | Ja | #2943 | EntityRegistry.md#error-handling | - |
| 2945 | ‚úÖ | DevTools | - | Bug-Status-System: Bugs mit ‚úÖ markieren statt l√∂schen f√ºr Nachvollziehbarkeit | hoch | Nein | - | - | - |
| 2946 | ‚úÖ | Scripts | - | prioritize-tasks.mjs: Warnung bei inkonsistenten Task-IDs √ºber Dateien hinweg | mittel | Nein | - | - | - |
| 2947 | ‚úÖ | Docs | - | Verwaiste Task-Referenzen in Docs bereinigen | mittel | Nein | - | - | - |
| 2948 | ‚úÖ | Scripts | - | update-tasks.mjs: Automatische Bereinigung verwaister Deps bei Task-L√∂schung/Split | mittel | Nein | - | - | - |
| 2949 | üü¢ | Creature | core | CreatureDetectionProfile Schema (noiseLevel, scentStrength, stealthAbilities) - REQUIRED auf CreatureDefinition | hoch | Ja | - | Balance.md#multi-sense-detection | schemas/creature.ts:creatureDetectionProfileSchema |
| 2950 | ‚úÖ | Creature | core | StealthAbility Type (burrowing, invisibility, ethereal, shapechange, mimicry, ambusher) | hoch | Ja | - | Balance.md#multi-sense-detection | schemas/creature.ts:stealthAbilitySchema |
| 2951 | ‚õî | Encounter | features | calculateDetection(): Multi-Sense Perception mit visual/auditory/olfactory Detection-Methods | hoch | Ja | #2949, #2950, #3228, #3229, #3087, #3089 | Balance.md#perception-system | encounter-utils.ts:calculateDetection() |
| 2952 | ‚õî | Terrain | core | encounterVisibility Feld zu TerrainDefinition Schema hinzuf√ºgen (Basis-Sichtweite in feet, f√ºr Encounter-Entdeckung, variiert je nach Terrain: 60ft forest - 500ft mountains) | hoch | Ja | #1700 | Balance.md#perception-system | - |
| 2953 | ‚õî | Weather | core | windDirection: 6 Hex-kompatible Richtungen (N, NE, SE, S, SW, NW) f√ºr Wind | hoch | Ja | #101 | Weather-System.md#weatherstate | src/core/schemas/weather.ts:HexDirection type [neu] |
| 2954 | ‚õî | Weather | features | Saison-Modifier: Temperatur-Offset basierend auf Kalender-Saison (Winter -15¬∞C, Sommer +10¬∞C) | hoch | Ja | #101, #905, #2964 | Weather-System.md#saison-modifier | src/features/weather/weather-utils.ts:SEASON_TEMPERATURE_MODIFIERS+applySeasonModifier() [neu] |
| 2955 | ‚õî | Weather | features | Elevation-Modifier: Temperatur sinkt ~6.5¬∞C pro 1000m H√∂he (atmosph√§rischer Gradient) | hoch | Ja | #101, #802 | Weather-System.md#elevation-modifier | src/features/weather/weather-utils.ts:calculateElevationModifier() [neu] |
| 2956 | ‚õî | Weather | features | moonPhase: Mondphase aus Kalender-System ableiten (custom Mondzyklen unterst√ºtzen) | hoch | Ja | #2965, #905 | Weather-System.md#weatherstate | src/features/weather/weather-service.ts:getMoonPhaseFromCalendar() [neu] |
| 2957 | ‚õî | Weather | features | cloudCover: Wolkenbedeckung aus precipChance ableiten (0-1) | hoch | Ja | #2979 | Weather-System.md#weatherstate | src/features/weather/weather-utils.ts:deriveCloudCover() [neu] |
| 2958 | ‚õî | Weather | core | fogLevel: Nebel als separater Layer (0-1), kombinierbar mit Niederschlag | hoch | Ja | #105 | Weather-System.md#nebel | src/core/schemas/weather.ts:WeatherState.fogLevel [neu] |
| 2959 | ‚õî | Weather | features | visibilityModifier: Sichtweiten-Faktor (0.1-1.0) aus precipIntensity + fogLevel berechnen | hoch | Ja | #2979, #2958 | Weather-System.md#weatherstate | src/features/weather/weather-utils.ts:calculateVisibilityModifier() [neu] |
| 2961 | ‚õî | Creature | features | Design-Rollen Ableitung: deriveDesignRole() aus Statblock | mittel | Ja | #1200 | Creature.md#design-rollen-mcdm-basiert | [neu] src/features/creature/design-role.ts:deriveDesignRole() |
| 2963 | ‚úÖ | Encounter | features | Template-Matching Logik: Fraktion-Templates > Generische Templates, CR-basierte Wahrscheinlichkeit | hoch | Ja | #206 | Encounter-System.md#template-auswahl-hierarchie | [neu] src/features/encounter/template-matcher.ts:matchTemplate() |
| 2964 | ‚¨ú | Time | features | getCurrentSeason(): Aktuelle Saison aus GameDateTime + CalendarDefinition ableiten | hoch | Ja | #905 | Time-System.md#calendardefinition | - |
| 2965 | ‚¨ú | Time | core | CalendarDefinition erweitern: Mondphasen-System und Celestial Events (Himmelszyklen) | hoch | Ja | #903 | Time-System.md#calendardefinition | - |
| 2970 | ‚úÖ | Application/DetailView | apps | Situation-Sektion im Encounter-Tab: Activity + Disposition Anzeige | hoch | Ja | #2409 | DetailView.md#encounter-tab | - |
| 2971 | ‚úÖ | Application/DetailView | apps | Detection-Sektion im Encounter-Tab: Methode, Distanz, Awareness | hoch | Ja | #2409, #208 | DetailView.md#encounter-tab | createDetectionSection() in encounter-tab.ts:599-654, DETECTION_METHOD_ICONS/LABELS Zeile 27-41, Integration in renderBuilder() Zeile 166-168, Re-export DetectionMethod in types.ts:14 |
| 2972 | ‚õî | NPC | core | PartialNPC/HighlightNPC Schema (Name + primaryTrait, session-only) | hoch | Ja | #1300 | NPC-System.md#npc-detail-stufen | [neu] src/core/schemas/npc.ts:partialNpcSchema |
| 2973 | ‚õî | NPC | features | generateHighlightNPC(): Oberfl√§chliche NPC-Generierung (Name + 1 Trait) | hoch | Ja | #2972 | NPC-System.md#npc-detail-stufen | [neu] src/features/encounter/npc-generator.ts:generateHighlightNpc() |
| 2974 | ‚õî | Encounter | core | EncounterGroup.highlightNPCs: NPC[] Feld (max 3 GLOBAL √ºber alle Gruppen) | hoch | Ja | #2972 | Encounter-System.md#npc-detail-stufen-pro-encounter, Encounter-System.md#npc-instanziierung | - |
| 2975 | ‚õî | NPC | features | buildCultureFromCreatureTags(): Fallback-Kultur-Generierung f√ºr fraktionslose Creatures (Beast/Predator-Tags ‚Üí Naming/Personality) | mittel | Ja | #2978, #1314, #3245, #3246 | NPC-System.md#npc-generierung, Creature.md#tags | [neu] src/features/encounter/npc-generator.ts:buildCultureFromCreatureTags() |
| 2976 | ‚õî | Journal | core | linkedNPCs Feld im JournalEntry-Schema f√ºr schnelle NPC-Queries (Array<EntityId<'npc'>>) | mittel | Ja | #2200 | Journal.md#schema | src/core/schemas/journal.ts:journalEntrySchema (linkedNPCs Feld hinzuf√ºgen) |
| 2977 | ‚õî | Journal | application | NPC-Link-Komponente mit Hover-Summary (Klick ‚Üí Journal-Tab, Hover ‚Üí letzte 3 Encounters) | niedrig | Nein | #2976, #2228, #3115, #1300 | Journal.md#npc-link-ui, Journal.md#hover-preview | [neu] src/application/shared/components/NPCJournalLink.svelte, [neu] src/application/shared/components/NPCJournalLink.svelte:getNpcJournalSummary() |
| 2978 | ‚õî | NPC | core | NPC-Schema: factionId von required auf optional √§ndern (Fallback auf Creature-Tags f√ºr fraktionslose NPCs) | hoch | Ja | #1300 | NPC-System.md#npc-schema, NPC-System.md#npc-generierung | - |
| 2979 | ‚õî | Weather | core | WeatherParams: precipChance + precipIntensity statt einzelnem precipitation Parameter | hoch | Ja | #101 | Weather-System.md#precipitationtype-ableitung | src/core/schemas/weather.ts:WeatherParams.precipChance+precipIntensity [neu] |
| 2981 | ‚õî | Weather | core | PrecipitationType: fog entfernen, hail hinzuf√ºgen, Formel anpassen | hoch | Ja | #104 | Weather-System.md#niederschlag | src/core/schemas/weather.ts:PrecipitationType (ohne fog, mit hail) [√§ndern] |
| 2982 | ‚õî | Terrain | core | TileClimateModifiers Schema f√ºr OverworldTile.climateModifiers (temperatureModifier: Offset ¬∞C, humidityModifier: Offset %, windExposure: sheltered/normal/exposed) | hoch | Ja | #2979, #2958 | Terrain.md#tileclimatemodifiers, Map-Feature.md#overworldtile, Weather-System.md#tile-modifiers | - |
| 2983 | ‚õî | Map | core | OverworldTile Schema: climateModifiers Feld (TileClimateModifiers, optional) | hoch | Ja | #2982, #802, #2955 | Map-Feature.md#overworldmap | - |
| 2984 | ‚õî | Weather | features | generateFog(): fogChance ‚Üí fogLevel Transformation implementieren | hoch | Ja | #2958 | Weather-System.md#fogchance--foglevel-transformation | src/features/weather/weather-utils.ts:generateFog() [neu] |
| 2985 | ‚õî | Weather | features | derivePrecipitationType(): precipChance + precipIntensity + temp ‚Üí Typ | hoch | Ja | #2979, #2981 | Weather-System.md#precipitationtype-ableitung | src/features/weather/weather-utils.ts:derivePrecipitationType() [neu] |
| 2986 | ‚õî | Weather | features | Area-Averaging: applyTileModifiers() VOR Weighted-Averaging (Terrain-Einfluss propagiert in Umgebung) | hoch | Ja | #2983, #107 | Weather-System.md#berechnungs-reihenfolge | src/features/weather/weather-utils.ts:applyTileModifiers()+applyWindExposure() [neu] |
| 2987 | ‚õî | Weather | features | TERRAIN_INFLUENCE Konstanten (water, mountains, forest, desert) | mittel | Nein | #2986 | Weather-System.md#terrain-einfluss-nice-to-have | src/features/weather/weather-utils.ts:TERRAIN_INFLUENCE [neu] |
| 2988 | ‚õî | Weather | features | Terrain-Einfluss-Berechnung mit Stapelung (70% D√§mpfung) | mittel | Nein | #2987 | Weather-System.md#stapelung | src/features/weather/weather-utils.ts:stackEffects() [neu] |
| 2989 | ‚õî | Cartographer | features | Climate-Brush: Fog-Override Layer hinzuf√ºgen | mittel | Nein | #2507, #2982 | Cartographer.md#climate-brush-overland | - |
| 2990 | ‚õî | Cartographer | features | Smooth-Transitions-Tool (Toolbar-Button, Weighted Average an Terrain-Grenzen) | mittel | Nein | #2983 | Cartographer.md#smooth-transitions-tool-overland | - |
| 2991 | ‚õî | Cartographer | features | Calculate-Derived-Tool (Toolbar-Button, Preview/Apply f√ºr Terrain-Einfl√ºsse) | mittel | Nein | #2988, #2990 | Cartographer.md#calculate-derived-tool-overland | - |
| 2992 | ‚úÖ | Encounter | features | EncounterGroup Interface: groupId, creatures, dispositionToParty, relationsToOthers, activity, goal, budgetShare, narrativeRole, status (free/captive/incapacitated/fleeing) | hoch | Ja | - | Encounter-System.md#encountergroup-schema | - |
| 2994 | ‚õî | Loot | features | Loot pro Gruppe: generateMultiGroupLoot() generiert separaten LootPool f√ºr jede EncounterGroup | mittel | Nein | #252, #2992, #710, #719 | Loot-Feature.md#loot-bei-multi-gruppen, Encounter-System.md#multi-group-encounters | - |
| 2995 | ‚úÖ | Encounter | core | EncounterGroup.status Feld (free/captive/incapacitated/fleeing) | mittel | Nein | #2992 | Encounter-System.md#encountergroup-schema, Encounter-System.md#multi-group-difficulty-calculation | - |
| 2996 | ‚úÖ | Encounter | features | canAllyHelp(group): boolean Funktion | mittel | Nein | #2995 | Encounter-System.md#multi-group-difficulty-calculation | - |
| 2997 | ‚¨ú | Encounter | features | calculateMultiGroupDifficulty() mit Ally-Thresholds (inkl. calculateAllyThresholds() Helper) | mittel | Nein | #2996 | Encounter-System.md#multi-group-difficulty-calculation | - |
| 2998 | üî∂ | Faction | features | reputationWithParty: number (-100 bis +100) Feld | niedrig | Nein | #1400 | Faction.md#party-reputation | src/core/schemas/faction.ts:184 (reputationWithParty field im Schema) |
| 2999 | ‚¨ú | DetailView | application | Encounter-Resolution-Dialog: Reputation-√Ñnderung UI mit Preset-Buttons [-20..-10..+20] | niedrig | Nein | #2998 | Faction.md#party-reputation, Faction.md#ui-konzept, DetailView.md#post-combat-resolution | - |
| 3000 | ‚¨ú | Loot | features | WEALTH_MULTIPLIERS Konstante (destitute bis hoard) | mittel | Nein | - | Loot-Feature.md#wealth-system | - |
| 3001 | ‚õî | Loot | features | getWealthMultiplier(): Liest Wealth-Tag aus lootTags und gibt Multiplikator zur√ºck (0.25 bis 3.0) | mittel | Nein | #3000 | Loot-Feature.md#wealth-system | - |
| 3002 | ‚õî | Loot | features | calculateLootValue() erweitern: avgWealth-Multiplikator aus allen Creatures berechnen und anwenden | mittel | Nein | #3001, #713, #3110 | Loot-Feature.md#wealth-system | - |
| 3003 | ‚õî | Creature | core | carriesLoot: boolean Feld (default humanoid=true, beast=false) | niedrig | Nein | #1200 | Creature.md#loot-kategorien | - |
| 3004 | ‚õî | Creature | core | stashLocationHint: string Feld (Verweis auf Hoard-Location) | niedrig | Nein | #1200 | Creature.md#loot-kategorien | - |
| 3006 | ‚¨ú | LootContainer | core | LootContainer Entity-Typ + Zod-Schema (id, name, locationRef, goldAmount, items[], status, locked, lockDC, trapped, trapRef, discoveredAt, lootedAt) | hoch | Ja | - | LootContainer.md#schema | - |
| 3009 | ‚õî | Library | features | LootContainer CRUD-Interface in Library | mittel | Ja | #3006, #2800 | Library.md#entity-tabs, LootContainer.md | - |
| 3010 | ‚¨ú | Map | core | DangerZone Typ auf OverworldTile erg√§nzen (safe/normal/dangerous/deadly) | hoch | Ja | #802 | Map.md#danger-zones-und-cr-budget | - |
| 3011 | ‚õî | Map | core | CR-Budget Felder (crBudget, crSpent) auf OverworldTile erg√§nzen | hoch | Ja | #802, #3010 | Map.md#cr-budget-berechnung | - |
| 3012 | ‚õî | Cartographer | application | Danger-Zone Brush Tool (Safe/Normal/Dangerous/Deadly Marker) | hoch | Ja | #3010 | Cartographer.md#danger-zone-brush, Map.md#cartographer-integration | - |
| 3013 | ‚õî | Cartographer | application | Inspector: CR-Budget Anzeige (Budget, Spent, Available) | mittel | Ja | #3011 | Cartographer.md#inspector-panel, Map.md#tile-inspector | - |
| 3014 | ‚õî | Encounter | features | CR-Budget-Check bei Encounter-Generierung | hoch | Ja | #3011, #1202 | Encounter-System.md#cr-budget-check, Map.md#danger-zones-und-cr-budget | - |
| 3015 | ‚õî | Encounter | application | Entity-Promotion Dialog nach Combat (Post-Combat Phase 5): Nicht-Fraktions-Kreaturen ‚Üí NPC mit POI-Vorschlag, optionalem Hoard-Erstellen. Siehe Sub-Tasks f√ºr Detail-UI. | mittel | Nein | #1200, #3006, #2431 | Encounter-System.md#entity-promotion, Faction.md#entity-promotion | - |
| 3016 | ‚õî | Location/POI | core | POI: lootContainers[] Referenz-Array | mittel | Ja | #1500, #3006 | POI.md#lootcontainer-referenz, LootContainer.md#poi-referenz | - |
| 3017 | ‚õî | Encounter | features | suggestHoardLocation(): POI-Vorschlag basierend auf Terrain-Pr√§ferenz + Proximity | niedrig | Nein | #3015, #1500, #3201 | Faction.md#poi-vorschlag, Encounter-System.md#entity-promotion | - |
| 3018 | ‚õî | Faction | features | applyAttrition(): Creature-Counts nach Combat reduzieren + faction:attrition-applied Event | hoch | Ja | #1400, #1402, #3205 | Faction.md#attrition-mechanik, Faction.md#integration-im-encounter-service | - |
| 3019 | ‚õî | Faction | features | recalculatePresenceForTile(): Neuberechnung nach faction:attrition-applied Event | mittel | Ja | #3018, #1409, #3200 | Faction.md#praesenz-neuberechnung | - |
| 3020 | ‚õî | Faction | features | Auto-Status extinct: Wenn alle creature.count = 0 nach Attrition ‚Üí status = extinct + faction:status-changed Event | mittel | Ja | #3018 | Faction.md#automatische-status-aenderungen | - |
| 3021 | ‚õî | DetailView | features | Attrition-Feedback Banner (Post-Combat Phase 4): Automatisches Info-Banner nach Combat zeigt Faction-Count-Reduktion und optionale Status-√Ñnderung | niedrig | Nein | #3018, #2431 | DetailView.md#post-combat-resolution, Faction.md#ui-feedback | - |
| 3024 | ‚õî | Map | features | getAvailableCRBudget(): Budget minus crSpent berechnen | mittel | Ja | #3011 | Map.md#cr-budget-berechnung | - |
| 3025 | ‚õî | Loot | features | takeItems(containerId, itemIds[]): Items aus LootContainer entnehmen, Status auto-update (pristine‚Üípartially_looted‚Üílooted) | mittel | Ja | #3006 | LootContainer.md#status-aenderungen | - |
| 3026 | ‚õî | Loot | features | takeGold(containerId, amount): Gold aus LootContainer entnehmen, Status auto-update (pristine‚Üípartially_looted‚Üílooted) | mittel | Ja | #3006 | LootContainer.md#status-aenderungen | - |
| 3027 | ‚õî | Loot | features | getLootContainersAtPOI(poiId): Query f√ºr LootContainers nach locationRef | mittel | Ja | #3006, #1500 | LootContainer.md#queries | - |
| 3028 | ‚õî | Loot | core | LootContainer Events definieren: lootcontainer:created, lootcontainer:updated, lootcontainer:looted, lootcontainer:status-changed (mit correlationId) | mittel | Ja | #3006 | LootContainer.md#events | - |
| 3030 | ‚õî | Encounter | features | createEncounterLootContainer(encounterId, locationRef): Aggregiere Gold + Items von allen Creatures nach Combat, erstelle LootContainer | mittel | Ja | #3006, #1200 | LootContainer.md#encounter-loot | - |
| 3031 | ‚õî | DetailView | application | LootContainer Interaktions-UI in DetailView: Lock-Status anzeigen, Falle warnen, Alles nehmen, Items ausw√§hlen | mittel | Ja | #3006 | LootContainer.md#detailview-looting-ui, DetailView.md | - |
| 3032 | ‚úÖ | Scripts | - | Blockiert-Status f√ºr Tasks mit nicht-gr√ºnen Dependencies automatisch setzen | hoch | Nein | - | - | task-utils.mjs:areDepsResolved(),findAllDependents() update-tasks.mjs:propagateBlockedStatus(),refreshAllBlockedStatus() |
| 3033 | ‚¨ú | Tooling | - | Task-Scripts Clean Architecture Refactoring | hoch | Nein | - | - | - |
| 3034 | ‚¨ú | Combat | features | Concentrating-Tag visuell anzeigen: üîÆ Icon mit Spell-Name | hoch | Nein | #312, #2421 | Combat-System.md#gm-interface, Combat-System.md#conditions-ui | combat-tab.ts:renderConcentration() [neu], participant-row.ts [√§ndern] |
| 3035 | ‚¨ú | Combat | features | Condition Icons + Tooltips rendern (gem√§√ü Icon-Mapping) | hoch | --spec | #302, #2421 | - | combat-tab.ts:renderConditionIcon() [neu], condition-tooltip.ts [neu] |
| 3036 | ‚¨ú | Combat | features | Start-of-Turn Effects UI: Effekt-Liste mit Aktionen anzeigen | hoch | --spec | #317, #2421 | - | combat-tab.ts:renderStartOfTurnEffects() [neu], turn-effect-dialog.ts [neu] |
| 3037 | ‚¨ú | Combat | features | End-of-Turn Effects UI: Save-Dialoge anzeigen | hoch | --spec | #318, #2421 | - | combat-tab.ts:renderEndOfTurnEffects() [neu], save-prompt-dialog.ts [neu] |
| 3038 | ‚¨ú | Combat | features | Concentration Break Handler: concentratingOn zur√ºcksetzen | hoch | --spec | #331 | - | src/features/combat/combat-service.ts:breakConcentration() [neu] |
| 3039 | ‚¨ú | Inventory | features | travel:completed Handler: Rationen-Verbrauch orchestrieren (checkRations ‚Üí consumeRations oder Dialog) | mittel | --prio | #608, #609, #622 | Inventory-System.md#verbrauch-beim-reisen, Travel-System.md, Events-Catalog.md | - |
| 3040 | ‚¨ú | Audio | features | audio:set-volume-requested Event Handler implementieren: Volume Control (0-100) | hoch | -d | #1104, #1110 | Audio-System.md#events, Events-Catalog.md#audio, Audio-System.md#settings | [neu] src/features/audio/orchestrator.ts:handleSetVolumeRequested() |
| 3041 | ‚¨ú | Audio | features | audio:override-track-requested Event Handler implementieren: Manual Override f√ºr Track-Auswahl | hoch | -d | #1109, #1110 | Audio-System.md#events, Events-Catalog.md#audio, Audio-System.md#manual-override | [neu] src/features/audio/orchestrator.ts:handleOverrideTrackRequested() |
| 3042 | ‚¨ú | Audio | features | party:position-changed Event Handler implementieren: Location-Update in MoodContext | mittel | Nein | #1102, #12 | Audio-System.md#context-updates, Events-Catalog.md#party | [neu] src/features/audio/orchestrator.ts:handlePartyPositionChanged() |
| 3043 | ‚¨ú | Audio | features | combat:started Event Handler implementieren: combatState='active' in MoodContext setzen | mittel | Nein | #1102, #322 | Audio-System.md#context-updates, Events-Catalog.md#combat | [neu] src/features/audio/orchestrator.ts:handleCombatStarted() |
| 3044 | ‚¨ú | Audio | features | combat:completed Event Handler implementieren: combatState='idle' in MoodContext setzen | mittel | Nein | #1102, #324 | Audio-System.md#context-updates, Events-Catalog.md#combat | [neu] src/features/audio/orchestrator.ts:handleCombatCompleted() |
| 3045 | ‚õî | Audio | features | Least-Recently-Played Tiebreaker implementieren: Track.lastPlayedAt f√ºr Tie-Breaking bei gleichen Scores nutzen | hoch | -d | #1108, #1101 | Audio-System.md#mood-matching, Audio-System.md#automatische-track-auswahl | [√§ndern] src/features/audio/mood-matching.ts:findBestMatch(), [√§ndern] src/features/audio/playback.ts:playTrack() |
| 3046 | ‚õî | Audio | application | Audio Settings UI implementieren: Music Volume, Ambience Volume, Crossfade Toggle, Crossfade Duration, Auto-Switch on Context | hoch | -d | #1104, #1106, #1113, #3116, #3119 | Audio-System.md#settings, Audio-System.md#gm-interface | [neu] src/application/session-runner/AudioSettingsPanel.svelte |
| 3047 | ‚õî | Audio | application | Track-Editor UI in Library implementieren: Title, Layer, Tags (locations, mood, time, weather), Loop Toggle | mittel | Nein | #1101, #3056, #3120 | Audio-System.md#track-editor-library, Library.md | [neu] src/application/library/TrackEditor.svelte |
| 3048 | ‚¨ú | Audio | application | Audio Panel in SessionRunner implementieren: Play/Pause/Skip Buttons, Volume Slider, Progress Bar, Manual Override Dropdown | hoch | -d | #1103, #1104, #1119, #1120, #1121, #3116 | Audio-System.md#audio-panel-sessionrunner, SessionRunner.md#audio-sektion | [neu] src/application/session-runner/AudioPanel.svelte |
| 3049 | ‚¨ú | Dungeon | core | DungeonTileContent Schema implementieren (type, id, visible, notes, typ-spezifische Felder) | hoch | --layer | #808 | Dungeon-System.md#dungeontilecontent, Map-Feature.md#dungeontile | - |
| 3050 | ‚¨ú | Dungeon | features | Party Position Tracking auf DungeonMap (partyPosition: GridPosition) | hoch | --layer | #806, #807 | Dungeon-System.md#dungeonmap, Map-Feature.md#dungeonmap | - |
| 3051 | ‚¨ú | Dungeon | features | Door State Tracking (open/closed) f√ºr Sound-Propagation | mittel | Nein | #808 | Dungeon-System.md#sound, Dungeon-System.md#dungeontile | - |
| 3052 | ‚õî | Dungeon | features | Treasure-Content auf Tiles (items, locked, lockDC, looted) | hoch | --layer | #3049, #808, #1600 | Dungeon-System.md#dungeontilecontent, Dungeon-System.md#tile-detail-click | - |
| 3053 | ‚¨ú | Dungeon | features | Room Contents Aggregation: Aggregiere alle Tile-Contents eines Raums | mittel | --layer | #809, #808 | Dungeon-System.md#dungeonroom | - |
| 3054 | ‚õî | Audio | infrastructure | Track File Upload implementieren: Datei-Dialog, Copy nach Vault/SaltMarcher/audio/{layer}/, Auto-Detect Duration | mittel | Nein | #1101, #3056 | Audio-System.md#track-erstellung, Audio-System.md#file-struktur-im-vault | [neu] src/infrastructure/vault/audio-file-handler.ts:uploadAudioFile(), [neu] src/infrastructure/vault/audio-duration-detector.ts:detectDuration() |
| 3055 | ‚¨ú | Audio | features | audio:play-requested Event Handler implementieren: start/resume playback f√ºr layer | hoch | -d | #1103, #1110 | Audio-System.md#events, Events-Catalog.md#audio | [neu] src/features/audio/orchestrator.ts:handlePlayRequested() |
| 3056 | ‚õî | Audio | features | Track CRUD implementieren: createTrack, updateTrack, deleteTrack, getTrack, getAllTracks | hoch | -d | #1101, #3117 | Audio-System.md#schemas, EntityRegistry.md | [neu] src/features/audio/track-service.ts:createTrack(), updateTrack(), deleteTrack(), getTrack(), getAllTracks() |
| 3057 | ‚¨ú | Audio | features | audio:paused Event publizieren implementieren (lifecycle event) | hoch | -d | #1119, #1110 | Audio-System.md#events, Events-Catalog.md#audio | [√§ndern] src/features/audio/orchestrator.ts:handlePauseRequested() |
| 3058 | ‚¨ú | Audio | features | audio:resumed Event publizieren implementieren (lifecycle event) | hoch | -d | #1120, #1110 | Audio-System.md#events, Events-Catalog.md#audio | [√§ndern] src/features/audio/orchestrator.ts:handleResumeRequested() |
| 3059 | ‚¨ú | Audio | features | audio:volume-changed Event publizieren implementieren (state-change event) | hoch | -d | #1104, #1110 | Audio-System.md#events, Events-Catalog.md#audio | [√§ndern] src/features/audio/orchestrator.ts:handleSetVolumeRequested() |
| 3068 | ‚õî | Audio | application | Manual Override Track Selection UI implementieren: Empfohlene Tracks (basierend auf Context) + Alle verf√ºgbaren Tracks anzeigen | mittel | Nein | #1108, #1109, #3116, #3121 | Audio-System.md#manual-override, Audio-System.md#gm-interface | [neu] src/application/session-runner/TrackSelectionModal.svelte |
| 3070 | ‚¨ú | Encounter | features | fillSocialEncounter: Shop-Link via NPC-Owner (leadNpc.npcId ‚Üí shopRegistry.findByNpcOwner) | hoch | --layer | - | Encounter-Balancing.md#social, Encounter-System.md#typ-spezifisches-verhalten | - |
| 3071 | ‚¨ú | Encounter | features | fillPassingEncounter: Nutzt nur Basis-Felder (description, activity, perception) - keine Extra-Logik | hoch | --layer | - | Encounter-Balancing.md#passing | - |
| 3072 | ‚¨ú | Encounter | features | fillTraceEncounter: traceAge + trackingDC Generierung (clues/inferredActivity gestrichen - kreativ, nicht crunch) | hoch | --layer | - | Encounter-Balancing.md#trace | - |
| 3076 | ‚¨ú | Loot | features | Loot-Generierung bei Encounter: generateLoot() in encounter:generate-requested Hook aufrufen | hoch | --deps | - | Loot-Feature.md#loot-generierung-bei-encounter | - |
| 3077 | ‚¨ú | Loot | features | carriesLoot Flag in CreatureDefinition implementieren (default: true f√ºr humanoid, false f√ºr beast) | mittel | Nein | #1205 | Loot-Feature.md#steuerung-via-creaturedefinition, Creature.md#loot-kategorien | - |
| 3078 | ‚¨ú | Loot | features | stashLocationHint in CreatureDefinition f√ºr Hoard-Verweis implementieren | niedrig | Nein | #1205, #730 | Loot-Feature.md#steuerung-via-creaturedefinition, Creature.md#loot-kategorien | - |
| 3079 | ‚¨ú | Loot | features | Wealth-Tags in lootTags unterst√ºtzen (destitute, poor, average, wealthy, rich, hoard) | mittel | Nein | #3000, #722 | Loot-Feature.md#wealth-system | - |
| 3080 | ‚¨ú | Loot | features | EncounterInstance.loot Field f√ºr GeneratedLoot + optional hoard hinzuf√ºgen | hoch | --deps | - | Loot-Feature.md#loot-generierung-bei-encounter | - |
| 3081 | ‚¨ú | Dungeon | application | Trap Trigger Button in TileDetailView (manueller Ausl√∂ser) | mittel | --layer | #1024, #810 | Dungeon-System.md#tile-detail-click | - |
| 3082 | ‚¨ú | Loot | features | EncounterCreature.loot Field f√ºr zugewiesene Items (kann im Combat verwendet werden) | hoch | --deps | - | Loot-Feature.md#loot-generierung-bei-encounter | - |
| 3083 | ‚¨ú | Dungeon | application | Treasure Open Button in TileDetailView (Unlock/Open Action) | mittel | --layer | #1024 | Dungeon-System.md#tile-detail-click | - |
| 3084 | ‚¨ú | Dungeon | features | Party Movement Handler: Bewege Party auf Grid, triggere Movement-Checks | hoch | --layer | #806, #807 | Dungeon-System.md#automatische-trigger, Map-Feature.md#dungeonmap | - |
| 3085 | ‚¨ú | Dungeon | application | Read-aloud Text Display bei Room-Enter | mittel | --layer | #809, #1022 | Dungeon-System.md#dungeonroom | - |
| 3086 | ‚¨ú | Dungeon | features | Cartographer Dungeon-Mode Toggle (MapType: 'dungeon' aktiviert Grid-Rendering) | hoch | --layer | #806 | Dungeon-System.md#map-erstellung, Cartographer.md#dungeon-tools | - |
| 3087 | ‚¨ú | Encounter | features | calculateVisualRange(): terrain.encounterVisibility √ó weather.visibilityModifier √ó getTimeVisibilityModifier(). Basis f√ºr Multi-Sense Detection. | hoch | --layer | #2952, #110 | Balance.md#perception-system | - |
| 3088 | ‚¨ú | Encounter | features | getTimeVisibilityModifier(): Basiert auf TimeSegment (dawn: 0.6, day: 1.0, dusk: 0.6, night: 0.1) + Mondphasen-Bonus (full: 0.3, gibbous: 0.2, etc.) √ó (1 - cloudCover). | hoch | --layer | #910, #110 | Balance.md#perception-system | - |
| 3089 | ‚õî | Encounter | features | calculateAudioRange(): noiseLevel-Tabelle (silent: 0, quiet: 30, normal: 60, loud: 200, deafening: 500ft). Bei Wind/Regen halbiert. | hoch | --layer | #2949, #110 | Balance.md#perception-system | - |
| 3090 | ‚¨ú | Encounter | features | calculateInitialDistance(): Typ-basierte Distanz-Anpassung nach Detection-Range | hoch | --layer | #2951, #207 | Balance.md#perception-system | - |
| 3094 | ‚¨ú | Encounter | features | shouldGenerateMultiGroup(): Trigger-Logik f√ºr Multi-Gruppen-Encounters (Basischance + Variety-Rescue) | mittel | Nein | #252, #210 | Encounter-System.md#trigger-logik | - |
| 3096 | ‚¨ú | Encounter | features | checkCRBudget(): Pr√ºfe verf√ºgbares CR-Budget vs Encounter-CR (auto-generated only) | hoch | --layer | #3014 | Encounter-System.md#cr-budget-check | - |
| 3099 | ‚¨ú | Quest | features | Quest-Feature Factory: createQuestOrchestrator() Export | hoch | ja | #400 | Quest-System.md#quest-feature-state-machine, Conventions.md#factory-functions | features/quest/index.ts:createQuestOrchestrator() |
| 3101 | ‚¨ú | Quest | features | Quest-Progress Resumable Storage: Load/Save QuestProgress State | hoch | ja | #400 | Quest-System.md#quest-progress-runtime-state, Conventions.md#state-categories | features/quest/quest-store.ts:saveProgress(), loadProgress() |
| 3103 | ‚¨ú | Dungeon | infrastructure | Lighting Overlay Rendering: renderLightingOverlay() visualisiert Dunkelheit | hoch | --layer | #1012, #812 | Dungeon-System.md#lichtquellen-tracking | - |
| 3104 | ‚¨ú | Encounter | features | Design-Rollen Support in Templates: designRole-Feld auf Template-Slots | mittel | Nein | - | Encounter-System.md#design-rollen-mcdm-basiert, Encounter-System.md#rollen-in-templates | - |
| 3106 | ‚¨ú | Map | core | Point Schema (x, y Koordinaten f√ºr TownMap Positionen) | mittel | Nein | #830 | Map-Feature.md#townmap | - |
| 3107 | ‚¨ú | Loot | features | selectItemsForBudget(): Items aus Pool ausw√§hlen bis targetValue erreicht (mit Tag-Matching) | hoch | --deps | - | Loot-Feature.md#hoard-generierung | - |
| 3108 | ‚¨ú | Loot | features | LootBudgetState persistieren/laden (Plugin data.json oder Session-State) | hoch | --deps | - | Loot-Feature.md#lootbudgetstate | - |
| 3109 | ‚¨ú | Loot | features | Loot-Kategorien-Logik: carriesLoot bestimmt ob Wealth-basiertes Loot generiert wird | mittel | Nein | #3077, #3001 | Loot-Feature.md#loot-kategorien | - |
| 3110 | ‚¨ú | Loot | features | calculateAverageWealthMultiplier(): Durchschnitt der Wealth-Multiplier aller Creatures berechnen | mittel | Nein | #3001 | Loot-Feature.md#wealth-system | - |
| 3111 | ‚õî | Item | core | Item Validation Functions: validateItemSchema (Zod mit category-spezifischen Refinements), validateCategorySpecificFields (damage nur bei weapon, armorClass nur bei armor/shield), validateStackableDefaults (consumable/gear/currency = stackable) | mittel | Nein | #1600, #1601 | Item.md#schema, Item.md#kategorie-details | - |
| 3112 | ‚¨ú | Item | core | Item Tag-System Logik: Tag-Konstanten exportieren (BASIS_TAGS, CREATURE_TAGS), validateTags() f√ºr user-defined Tags, matchTagScore() f√ºr Loot-Gewichtung | mittel | Nein | #1600 | Item.md#tags, Loot-Feature.md#tag-matching | - |
| 3113 | ‚õî | Item | features | Standard D&D Item Presets erweitern: Waffen (Longsword, Dagger, Greataxe), R√ºstungen (Chainmail, Leather), Gear (Rope, Torch, Rations), Consumables (Healing Potion) mit vollst√§ndigen Properties und Tags | hoch | Nein | #1600, #3112 | Item.md#kategorie-details, presets/items/ | - |
| 3114 | ‚õî | Faction | features | selectMatchingTemplate(): Budget + Context ‚Üí Template-Auswahl mit Gewichtung | hoch | Nein | #3184, #3195 | Faction.md#encounter-templates, Faction.md#template-auswahl | - |
| 3115 | ‚¨ú | Journal | features | Query: getJournalEntriesForNPC(npcId) - optimiert via linkedNPCs-Feld | hoch | --imp | - | Journal.md#queries, Journal.md#npc-link-ui | - |
| 3116 | ‚¨ú | Map-Navigation | features | Map-Navigation: Route verwerfen bei Navigation aus planning state | hoch | Ja | #1900, #2 | Map-Navigation.md#travel-state-bei-map-wechsel, Travel-System.md#route-planung | src/features/map/map-navigation.ts:resetTravelRoute() [neu], src/features/travel/travel-orchestrator.ts:resetRoute() [nutzen] |
| 3117 | ‚¨ú | Loot | features | createLootContainer(locationRef, budget, tags, name?): LootContainer via generateLoot() Budget-basiert erstellen | mittel | Ja | #3006, #3107 | LootContainer.md#via-generateloot-budget-basiert | - |
| 3118 | ‚¨ú | Loot | features | getUnlootedContainers(): Query f√ºr LootContainers mit status=pristine | niedrig | Nein | #3006 | LootContainer.md#queries | - |
| 3119 | ‚õî | Faction | features | generateName(): Name-Generierung aus CultureData mit Pattern-Replacement | mittel | Nein | #1405, #3196 | Faction.md#name-generieren, Faction.md#generierungsfunktionen | - |
| 3120 | ‚¨ú | Loot | features | getContainersByStatus(status): Query f√ºr LootContainers nach Status-Filter | niedrig | Nein | #3006 | LootContainer.md#queries | - |
| 3121 | ‚õî | Faction | features | rollPersonality(): Personality-Trait-Auswahl mit forbidden-Filter + gewichtete Zufallswahl | mittel | Nein | #1405, #3195 | Faction.md#persoenlichkeit-wuerfeln | - |
| 3122 | ‚¨ú | Loot | features | getValuableContainers(minValue): Query f√ºr LootContainers √ºber Wert-Schwelle (goldAmount + Item-Values) | niedrig | Nein | #3006, #1607 | LootContainer.md#queries | - |
| 3123 | ‚õî | Faction | features | rollQuirk(): Quirk-Auswahl mit Kreatur-Kompatibilit√§t + Einzigartigkeit-Tracking | mittel | Nein | #1405, #3195 | Faction.md#quirk-wuerfeln, Faction.md#generierungsfunktionen | - |
| 3124 | ‚¨ú | Faction | features | getActiveFactionsAtTile(): Tile-Pr√§senz mit active-Status-Filter f√ºr Encounter-Generierung | hoch | Nein | #1410 | Faction.md#encounter-filter | - |
| 3125 | ‚¨ú | Faction | features | promoteCreature(): Entity Promotion (Creature ‚Üí NPC + POI + LootContainer + Faction) | mittel | Nein | #3203, #3204, #3017 | Faction.md#ergebnis-der-promotion, Faction.md#entity-promotion, Encounter-System.md#entity-promotion | - |
| 3126 | ‚¨ú | Faction | application | Entity Promotion Dialog UI: Name-Input, POI-Toggle, Faction-Toggle mit Parent-Auswahl | niedrig | Nein | #3017 | Faction.md#promotion-dialog, Faction.md#entity-promotion | - |
| 3127 | ‚õî | Faction | application | Post-Attrition UI Banner: Faction-Schw√§chung mit Creature-Count-Diffs + Extinct-Meldung | niedrig | Nein | #3018 | Faction.md#ui-feedback, Faction.md#attrition-mechanik | - |
| 3128 | üü¢ | Faction | core | WeightedActivity + WeightedGoal Schemas f√ºr Kultur-Daten | niedrig | Nein | #1401 | Faction.md#culturedata | - |
| 3129 | ‚õî | Creature | features | Stealth-Ability-Priorit√§t: getPrimaryStealthAbility() Implementation | mittel | nein | #2950, #2949 | Creature.md#stealth-ability-prioritaet | - |
| 3131 | ‚õî | Faction | features | instantiateLootTable(): LootContainer-Erstellung bei Entity Promotion mit defaultLootTable | niedrig | Nein | #1708 | Faction.md#ergebnis-der-promotion, Loot-Feature.md | - |
| 3132 | ‚õî | Item | features | Library Item CRUD UI: Item erstellen/bearbeiten/l√∂schen mit Category-spezifischen Feldern (Weapon Properties, Armor AC, etc.) | hoch | Nein | #1609, #2599 | Item.md, Application.md#library | - |
| 3133 | ‚¨ú | Item | features | Item Storage Port Interface: loadAllItems(), saveItem(), deleteItem() mit Vault JSON Adapter | hoch | Nein | #1600 | Item.md, Infrastructure.md#storage-ports | - |
| 3134 | ‚¨ú | Time | core | RestSettings Interface (grittyRealism: boolean) f√ºr Normal vs Gritty Realism Modus | hoch | --deps | #952 | Time-System.md#gritty-realism-option | - |
| 3135 | ‚¨ú | Time | features | getRestDuration(): Berechnet Rast-Dauer basierend auf type (short/long) und grittyRealism-Option | hoch | --spec | #3134 | Time-System.md#gritty-realism-option | - |
| 3136 | ‚¨ú | Time | features | rest:pause-requested Event Handler (Rast pausieren bei Encounter-Unterbrechung) | hoch | --deps | #953 | Time-System.md#encounter-unterbrechung, Events-Catalog.md#rest | - |
| 3137 | ‚¨ú | Weather | features | calculateTemperature(): Kombination aller Temperatur-Modifier (Terrain-Basis + Time-Segment + Saison + Elevation) | hoch | -d | #106, #108, #2954, #2955 | Weather-System.md#berechnungs-reihenfolge | src/features/weather/weather-utils.ts:calculateTemperature() [neu] |
| 3138 | ‚¨ú | Time | features | rest:resume-requested Event Handler (Rast fortsetzen nach Unterbrechung) | hoch | --deps | #953 | Time-System.md#encounter-unterbrechung, Events-Catalog.md#rest | - |
| 3139 | ‚¨ú | Time | features | rest:restart-requested Event Handler (Rast neu starten nach Unterbrechung, hoursCompleted=0) | hoch | --deps | #953 | Time-System.md#encounter-unterbrechung, Events-Catalog.md#rest | - |
| 3140 | ‚¨ú | Time | features | rest:short-rest-requested Event Handler (Short Rest initialisieren) | hoch | --deps | #953 | Time-System.md#resting, Events-Catalog.md#rest | - |
| 3141 | ‚¨ú | Time | features | rest:long-rest-requested Event Handler (Long Rest initialisieren) | hoch | --deps | #953 | Time-System.md#resting, Events-Catalog.md#rest | - |
| 3142 | ‚¨ú | Time | features | rest:short-rest-completed Event publizieren (bei erfolgreichem Short Rest Abschluss) | hoch | --deps | #953 | Time-System.md#rest-abschluss, Events-Catalog.md#rest | - |
| 3143 | ‚¨ú | Time | features | rest:long-rest-completed Event publizieren (bei erfolgreichem Long Rest Abschluss) | hoch | --deps | #953 | Time-System.md#rest-abschluss, Events-Catalog.md#rest | - |
| 3144 | ‚¨ú | Time | features | rest:paused Event publizieren (bei Encounter-Unterbrechung w√§hrend Rast) | hoch | --deps | #953 | Time-System.md#encounter-unterbrechung, Events-Catalog.md#rest | - |
| 3146 | ‚¨ú | WorldEvents | core | WorldEvent Schema (id, title, description, scheduledTime, repeat, tags) | hoch | --spec | - | Time-System.md#worldevent-zukunft, EntityRegistry.md | - |
| 3147 | ‚¨ú | WorldEvents | core | RepeatRule Interface f√ºr wiederkehrende WorldEvents (Mondzyklen, j√§hrliche Feste) | mittel | --spec | #3146 | Time-System.md#worldevent-zukunft | - |
| 3149 | ‚¨ú | WorldEvents | core | JournalEntry erweitern: type-Feld f√ºr feinere Kategorisierung (arrival, combat, encounter, rest, quest_progress, death, worldevent, note) | hoch | --spec | #2200,#2201 | Time-System.md#journalentry-vergangenheit | - |
| 3150 | ‚¨ú | WorldEvents | features | WorldEvent Lifecycle: Automatisches Erstellen von JournalEntry wenn scheduledTime erreicht | hoch | --spec | #3146,#2200 | Time-System.md#worldevent-lifecycle | - |
| 3151 | ‚¨ú | WorldEvents | features | WorldEvents Feature: time:state-changed Subscriber pr√ºft f√§llige Events | hoch | --deps | #909,#3146 | Time-System.md#time-worldevents-beziehung | - |
| 3152 | ‚¨ú | WorldEvents | features | worldevents:due Event publizieren (wenn WorldEvent scheduledTime erreicht hat) | hoch | --spec | #3151 | Time-System.md#time-worldevents-beziehung, Events-Catalog.md | - |
| 3153 | ‚¨ú | WorldEvents | features | worldevents:upcoming Event publizieren (kommende Events f√ºr Timeline-Anzeige) | mittel | --spec | #3151 | Time-System.md#time-worldevents-beziehung, Events-Catalog.md | - |
| 3154 | ‚¨ú | Weather | features | Encounter-Integration: Kreatur-Pr√§ferenzen bei weather-changed Event ber√ºcksichtigen | niedrig | Nein | #110 | Weather-System.md#consumer-features, Encounter-System.md | - |
| 3155 | ‚¨ú | Weather | features | UI-Integration: Weather-Widget aktualisieren bei environment:state-changed Event | mittel | Nein | #110 | Weather-System.md#consumer-features, SessionRunner.md | - |
| 3156 | ‚¨ú | Item | features | Equipment Actions: equipItem(characterId, itemId), unequipItem(characterId, itemId) mit equipped-Flag Toggle und Slot-Validierung (nur 1 armor, 1 shield, etc.) | mittel | Nein | #1603, #600 | Item.md#equipment-system, Inventory-System.md | - |
| 3157 | ‚¨ú | Item | features | calculateArmorClass(character): AC-Berechnung basierend auf equipped armor + shield + DEX-Modifier | mittel | Nein | #1603 | Item.md#equipment-system, Combat-System.md#armor-class | - |
| 3158 | ‚¨ú | Item | features | getEquippedWeapons(character): Query f√ºr equipped Waffen mit damage und properties f√ºr Combat-Integration | mittel | Nein | #1603, #1607 | Item.md#equipment-system, Combat-System.md#attack-rolls | - |
| 3159 | ‚õî | Travel | features | calculateTilePopulation(): Summe(Faction.presence √ó memberCount / Territory-Gr√∂√üe) f√ºr Encounter-Chance | mittel | --deps | #10, #1409 | Travel-System.md#population-berechnung, Faction.md#praesenz-vorberechnung | - |
| 3160 | ‚¨ú | Time | features | Time Feature Orchestrator Initialisierung: Lade aktiven Kalender aus EntityRegistry | hoch | --spec | #900,#903 | Time-System.md, Conventions.md#factory-functions | - |
| 3161 | ‚¨ú | WorldEvents | features | WorldEvents Feature Orchestrator: createWorldEventsOrchestrator() Factory | hoch | --deps | - | Time-System.md#time-worldevents-beziehung, Conventions.md#factory-functions | - |
| 3162 | ‚¨ú | Time | infrastructure | Rest Feature Storage Port: RestState persistent speichern/laden (Resumable-Category) | hoch | --deps | - | Time-System.md#resting, Conventions.md#storage-ports | - |
| 3163 | ‚¨ú | Terrain | features | calculateInitialDistance(): Encounter-Startdistanz mit Terrain-Sichtweite √ó Weather-visibilityModifier √ó Time-Modifier, dann Typ-basierte Ranges (combat √ó0.3-0.8, social √ó0.5-1.0, passing √ó0.7-1.0, trace 10-30ft) | hoch | --layer | #2952, #101 | Terrain.md#sichtweite-bei-encounter-generierung, Encounter-System.md#perception, Weather-System.md#visibility-modifier | - |
| 3164 | ‚¨ú | Shop | features | ResolvedInventoryEntry TypeScript Interface definieren (extends ShopInventoryEntry + item: ItemDefinition) | mittel | Nein | #2102, #1600 | Shop.md#queries | src/features/shop/types.ts:ResolvedInventoryEntry [neu] |
| 3165 | ‚¨ú | Terrain | features | windExposure Effekte implementieren: sheltered (-30% Wind, √ó1.5 Audio/Scent), normal (¬±0%, √ó1.0), exposed (+30% Wind, √ó0.5 Audio/Scent) f√ºr Weather und Encounter-Detection | hoch | --layer | #2982 | Terrain.md#windexposure-effekte, Weather-System.md#wind-exposure, Encounter-System.md#detection | - |
| 3166 | ‚¨ú | Shop | infrastructure | Shop Storage Port Integration: ShopStoragePort mit load/save/delete/query Methoden (Persistent Category) | mittel | Nein | #2100 | Shop.md#schema, EntityRegistry.md#port-interface, Infrastructure.md#storage-ports | src/features/shop/storage-port.ts:ShopStoragePort [neu], src/infrastructure/vault/shop-adapter.ts [neu] |
| 3167 | ‚¨ú | Quest | features | Deadline-Tracking: time:tick Subscription pr√ºft Quest-Deadlines und l√∂st quest:failed aus | hoch | ja | #401, #418, #901 | Quest.md#time-feature, Quest.md#questdefinition, Time-System.md#time-events | - |
| 3168 | ‚¨ú | Location/POI | core | POI Union Type (alle 5 POI-Typen kombinieren) | hoch | Ja | #1500, #1501, #1502, #1504, #1505, #1506 | POI.md#poi-union-type | - |
| 3169 | ‚¨ú | Path | infrastructure | Path Preset-Loader: Base-Paths in EntityRegistry laden beim Plugin-Start | hoch | Nein | #1808, #1821 | Path.md#default-presets | src/infrastructure/vault/path-loader.ts:loadBundledPaths() [neu], presets/paths/base-paths.json [wird geladen] |
| 3170 | ‚¨ú | Path | features | Path Storage Port: PathStoragePort Interface mit load/save/delete/query Methoden (Persistent Category) | hoch | Nein | #1800, #1820 | Path.md, EntityRegistry.md#port-interface, Infrastructure.md#storage-ports | src/features/path/storage-port.ts:PathStoragePort [neu], src/features/path/types.ts:PathFeaturePort [√§ndern - Storage-Methoden] |
| 3171 | ‚¨ú | Path | infrastructure | Path Vault Adapter: PathVaultAdapter implementieren (JSON-Serialisierung, Datei-basierte Persistenz) | hoch | Nein | #3170 | Path.md, Infrastructure.md#vault-adapters | src/infrastructure/vault/path-adapter.ts:PathVaultAdapter [neu], src/infrastructure/vault/path-adapter.ts:serializePath/deserializePath [neu] |
| 3172 | ‚¨ú | NPC | features | resolveCultureForNPC(): Wrapper-Funktion - nutzt resolveFactionCulture() wenn Faction vorhanden, sonst buildCultureFromCreatureTags() | mittel | -d | - | NPC-System.md#npc-generierung | - |
| 3178 | ‚¨ú | Terrain | features | Terrain-Registry: loadBundledTerrains() aus presets/terrains/base-terrains.json mit allen 8 Default-Terrains inkl. weatherRanges und encounterVisibility | hoch | --deps | - | Terrain.md#storage, Terrain.md#default-terrains | - |
| 3180 | ‚¨ú | Terrain | features | Terrain CRUD UI im Library-Workmode (Terrain-Liste, Terrain-Editor mit allen Feldern inkl. weatherRanges, nativeCreatures, Transport-Restrictions) | mittel | --deps | - | Terrain.md#custom-terrains-mvp, Library.md#entity-crud | - |
| 3181 | ‚¨ú | Terrain | features | Terrain-Selector Component f√ºr Cartographer Terrain-Brush (8 Default-Terrains + User Custom Terrains mit Icon/Color Preview) | hoch | --deps | - | Terrain.md#custom-terrains-mvp, Cartographer.md#terrain-brush | - |
| 3182 | ‚¨ú | Terrain | features | Climate-Brush Integration: climateModifiers auf OverworldTile schreiben (temperatureModifier, humidityModifier, windExposure) | hoch | --deps | - | Terrain.md#erstellung-im-cartographer, Cartographer.md#climate-brush | - |
| 3183 | ‚¨ú | Terrain | features | validateTransportRestrictions(): Pr√ºfe requiresBoat/blocksMounted/blocksCarriage gegen Party-Transportmode vor Travel | hoch | --deps | - | Terrain.md#schema, Travel-System.md#transport-modes | - |
| 3184 | ‚õî | Faction | features | FactionEncounterTemplate Schema (id, name, composition, triggers, weight) eingebettet in Faction | hoch | -d | #1400, #3215 | Faction.md#schema, Faction.md#encounter-templates | - |
| 3185 | ‚¨ú | Audio | features | time:state-changed Event Handler implementieren: timeOfDay-Update in MoodContext | mittel | Nein | #110, #1102 | Audio-System.md#context-updates, Time-System.md#events, Events-Catalog.md#time | [neu] src/features/audio/orchestrator.ts:handleTimeStateChanged() |
| 3186 | ‚¨ú | Audio | features | AudioState Interface implementieren: playbackState, currentTracks, volumes, settings | hoch | --deps | - | Audio-System.md#events, Audio-System.md#gm-interface | [neu] src/features/audio/types.ts:AudioState |
| 3187 | ‚¨ú | Audio | features | Audio Feature Orchestrator implementieren: createAudioOrchestrator() Factory mit Event-Setup und State-Management | hoch | --deps | #1100, #1102, #1103, #1110, #3186, #3189 | Audio-System.md#events, Features.md#audio-hybrid-feature | [neu] src/features/audio/orchestrator.ts:createAudioOrchestrator() |
| 3188 | ‚¨ú | Audio | features | Loop-Handling implementieren: Ambience-Tracks automatisch loopen, Music-Tracks nicht | hoch | --deps | - | Audio-System.md#playback, Audio-System.md#schemas | [√§ndern] src/features/audio/playback.ts:playTrack() |
| 3189 | ‚¨ú | Audio | features | Audio StoragePort Interface definieren: loadTrack, saveTrack, deleteTrack, getAllTracks | hoch | --spec | - | - | [neu] src/features/audio/ports.ts:AudioStoragePort |
| 3190 | ‚¨ú | Audio | features | Audio VaultAdapter implementieren: Track-Files aus Vault/SaltMarcher/audio/ laden | hoch | --spec | - | - | [neu] src/infrastructure/vault/audio-vault-adapter.ts |
| 3191 | ‚¨ú | Terrain | features | Tile-Modifier Rendering im Cartographer: Visualisierung von temperatureModifier, humidityModifier, windExposure Overlays | niedrig | Nein | #2982 | Terrain.md#erstellung-im-cartographer, Cartographer.md#climate-brush | - |
| 3193 | ‚¨ú | Faction | features | ResolvedCulture Type: Aufgel√∂ste Kultur-Daten nach Vererbung (alle Felder non-optional) | niedrig | -d | - | Faction.md#kultur-vererbung | - |
| 3194 | üü¢ | Faction | features | hexDistance(): Helper-Funktion f√ºr Hex-Distanz-Berechnung zwischen Koordinaten | mittel | -d | #802 | Faction.md#praesenz-vorberechnung-cartographer, Map-Feature.md#hex-coordinates | - |
| 3195 | üü¢ | Faction | features | weightedRandomSelect(): Generische gewichtete Zufallsauswahl-Utility (value, weight) | hoch | --spec | - | - | - |
| 3196 | üü¢ | Faction | features | randomSelect(): Einfache Zufallsauswahl aus Array (gleichverteilte Wahrscheinlichkeit) | mittel | --spec | - | - | - |
| 3197 | ‚¨ú | Audio | features | Audio Settings Schema definieren: musicVolume, ambienceVolume, crossfadeEnabled, crossfadeDuration, autoSwitch | hoch | --spec | - | - | [neu] src/features/audio/types.ts:AudioSettings |
| 3198 | ‚¨ú | Audio | features | getTracksForLayer Query-Funktion implementieren: Filtere Tracks nach Layer (music/ambience) | hoch | --deps | - | Audio-System.md#track-organisation, Audio-System.md#gm-interface | [neu] src/features/audio/track-service.ts:getTracksForLayer() |
| 3199 | ‚¨ú | Audio | features | getRecommendedTracks Query-Funktion implementieren: Sortiere Tracks nach Context-Score f√ºr Manual Override UI | mittel | Nein | #1107, #1108 | Audio-System.md#manual-override | [neu] src/features/audio/mood-matching.ts:getRecommendedTracks() |
| 3200 | ‚õî | Faction | features | findTilesWithFactionPresence(): Alle Tiles mit gegebener Faction-Pr√§senz finden | mittel | -d | #1409 | Faction.md#praesenz-neuberechnung | - |
| 3201 | ‚õî | Faction | features | getTilesInRadius(): Alle Tiles in gegebener Distanz von Koordinate finden | niedrig | -d | #802, #3194 | Faction.md#poi-vorschlag | - |
| 3202 | ‚¨ú | Faction | features | hasPOI(): Pr√ºfung ob Tile bereits einen POI hat | niedrig | Nein | #802, #1500 | Faction.md#poi-vorschlag | - |
| 3203 | ‚¨ú | Faction | features | PromotionResult Interface (npc, poi?, lootContainer?, faction?) f√ºr Entity-Promotion-Return | niedrig | Nein | #3017 | Faction.md#ergebnis-der-promotion | - |
| 3204 | ‚¨ú | Faction | features | PromotionOptions Interface (name, createPOI, createFaction, poiPosition, factionName, factionParent) | niedrig | Nein | #3017 | Faction.md#ergebnis-der-promotion | - |
| 3205 | ‚¨ú | Faction | features | CombatOutcome Interface (defeatedCreatures: Array<{creatureId, count}>) f√ºr Attrition-Integration | mittel | -d | - | Faction.md#integration-im-encounter-service, Combat-System.md | - |
| 3206 | ‚¨ú | Terrain | features | Area-Averaging Integration: Tile-Modifiers VOR Area-Averaging anwenden (climateModifiers beeinflussen Nachbar-Tiles im Weather-System) | mittel | --deps | - | Terrain.md#anwendungs-reihenfolge, Weather-System.md#berechnungs-reihenfolge | - |
| 3207 | ‚¨ú | Terrain | features | Default-Terrain nativeCreatures Population: Basis-Terrains mit typischen Kreaturen besiedeln (forest ‚Üí wolves/bears, swamp ‚Üí lizardfolk, etc.) | niedrig | Nein | #1703, #1706 | Terrain.md#default-terrains, Terrain.md#creature-terrain-auto-sync | - |
| 3208 | üü¢ | Faction | core | FactionStatus-Enum (active, dormant, extinct) mit Status-Transitions | hoch | -d | - | Faction.md#faction-status | - |
| 3210 | ‚ö†Ô∏è | Quest | features | Quantum-Placement Logic: Bei quest:completed Rewards mit placement='quantum' an GM-gew√§hlte Location platzieren | hoch | --deps | b11 | Quest.md#questreward, Quest-System.md#reward-platzierung | - |
| 3211 | ‚ö†Ô∏è | Quest | features | quest:encounter-assigned Event: 60% des Encounter-XP zum Quest-Pool addieren (xpAdded berechnen) | hoch | --deps | b11 | Quest.md#events, Quest-System.md#40-60-split-mechanik | - |
| 3212 | ‚ö†Ô∏è | Quest | features | encounter:resolved Subscription: UI-Prompt Encounter-Quest-Zuweisung bei offenen Slots | hoch | --deps | b11 | Quest.md#encounter-feature, Quest-System.md#quest-assignment-ui-post-combat, Encounter-System.md#integration | - |
| 3213 | ‚ö†Ô∏è | Quest | features | Quest-Journal-Integration: Quest-Events automatisch loggen | mittel | Nein | #414, #415, #416, #417, #418, b11 | Quest.md#journal, Journal.md#automatic-entries | - |
| 3214 | ‚ö†Ô∏è | Quest | features | Located-Rewards: Bei quest:completed Items mit placement='located' an fixe HexCoordinate spawnen | mittel | --deps | b11 | Quest.md#questreward, Quest-System.md#reward-platzierung | - |
| 3215 | ‚õî | Faction | core | TemplateCreatureSlot Schema mit creatureId, count (number oder range), role (leader, elite, regular, support) | mittel | -d | #1400 | Faction.md#schema | - |
| 3216 | ‚úÖ | Application/DetailView | apps | Party-Tab Component (Container) | hoch | -d | - | - | - |
| 3217 | ‚úÖ | Application/DetailView | apps | Party-Tab State (members, partyStats) | hoch | -d | - | - | viewmodel.ts: mapCharacterToDisplay(), calculatePartyStats(), updatePartyState(), syncFromFeatures() Party-Sync, Event-Handler f√ºr PARTY_STATE_CHANGED/MEMBER_ADDED/MEMBER_REMOVED/LOADED/ENTITY_SAVED |
| 3218 | üîí | Application/DetailView | apps | Party-Member Display (collapsed/expanded mit Name, HP, AC, PP). Deliverables: - [x] wisdom Feld im Character-Schema - [x] PP-Berechnung im ViewModel (10 + Wisdom-Modifier) DoD: - [x] TypeScript-Check erfolgreich - [x] Build erfolgreich | hoch | -d | #3217 | - | - |
| 3219 | üìã | Application/DetailView | apps | HP-Eingabe Pattern ([Wert][+][-] f√ºr Damage/Heal) | hoch | -d | - | - | party-tab.ts:247-284 [HP-Input + Buttons], view.ts:417-442 [onHpChange Callback publiziert CHARACTER_HP_CHANGED] |
| 3220 | ‚¨ú | Application/DetailView | apps | [Inventory] Button + Dialog √∂ffnen | mittel | -d | - | - | - |
| 3221 | ‚úÖ | Application/DetailView | apps | [Remove] Button (Character aus Party entfernen) | hoch | -d | - | - | src/application/detail-view/view.ts:onRemoveMember() - ruft partyFeature.removeMember() auf |
| 3222 | üìã | Application/DetailView | apps | [+ Add] Button + Character-Auswahl-Dialog (Library-Characters) Deliverables: - [x] CharacterSelectionDialog Modal-Klasse - [x] Export in dialogs/index.ts - [x] onAddMember() callback in view.ts - [x] EntityRegistry-Zugang in DetailViewDeps DoD: - [x] TypeScript-Check erfolgreich - [x] Build erfolgreich | hoch | -d | - | - | - |
| 3223 | üìã | Application/DetailView | apps | Party Stats Berechnung (Member Count, Avg Level, Travel Speed) | mittel | -d | - | - | viewmodel.ts:itemLookup() [neu] - Item-Lookup f√ºr Encumbrance, viewmodel.ts:mapCharacterToDisplay() [ge√§ndert] - berechnet Encumbrance via calculateEncumbrance(), viewmodel.ts:calculatePartyStats() [ge√§ndert] - berechnet effektive Speed via calculateEffectiveSpeed() |
| 3224 | üìã | Party | - | party:members-changed Event implementieren: Nach loadMembersFromStorage() publizieren mit memberIds Array Umgesetzt: - publishMembersChanged() Helper in party-service.ts - Event wird nach jedem loadMembersFromStorage() publiziert - Auch bei leeren Members (konsistentes Verhalten) | hoch | Ja | #512, #513 | Events-Catalog.md#party, Character-System.md#session-state-synchronization | src/features/party/party-service.ts:publishMembersChanged() - publiziert PARTY_MEMBERS_CHANGED Event mit memberIds src/features/party/party-service.ts:loadMembersFromStorage() - ruft publishMembersChanged() nach Member-Laden auf src/core/events/index.ts - Export f√ºr PartyMembersChangedPayload hinzugef√ºgt |
| 3228 | ‚õî | Encounter | features | calculateScentRange(): scentStrength-Tabelle (none: 0, faint: 30, moderate: 60, strong: 150, overwhelming: 300ft). Bei starkem Wind/Regen halbiert. | hoch | -d | #2949 | Balance.md#perception-system | - |
| 3229 | ‚¨ú | Encounter | features | applyStealthAbilities(): Range-Reduktion basierend auf StealthAbilities (burrowing‚Üí0 visual, invisibility‚Üí0 visual, ethereal‚Üí0 all) | hoch | -d | #2950 | Balance.md#perception-system | - |
| 3230 | ‚¨ú | Encounter | features | calculateMultiGroupPerception(): Lauteste Gruppe bestimmt Encounter-Start-Distanz (max √ºber alle Gruppen) | mittel | Nein | #3094, #2951 | - | - |
| 3232 | ‚¨ú | Encounter | features | getEligibleCreatures() erweitern: path.encounterModifier.creaturePool zum Eligibility-Pool hinzuf√ºgen (Post-MVP) | mittel | Nein | #1800, #200 | - | - |
| 3236 | üü¢ | Creature | features | getCreaturePassivePerception(creature): Berechnet 10 + Wisdom-Modifier aus Creature-Statblock. Fallback auf Standard-Wert wenn nicht definiert. | hoch | -d | - | - | - |
| 3238 | ‚¨ú | Creature | core | DamageType Enum: acid, bludgeoning, cold, fire, force, lightning, necrotic, piercing, poison, psychic, radiant, slashing, thunder | mittel | Nein | - | Creature.md#creaturedefinition | - |
| 3239 | ‚¨ú | Creature | core | Condition Enum: blinded, charmed, deafened, frightened, grappled, incapacitated, invisible, paralyzed, petrified, poisoned, prone, restrained, stunned, unconscious | mittel | Nein | - | Creature.md#creaturedefinition | - |
| 3240 | ‚¨ú | NPC | features | GENERIC_GOALS Konstante: Basis-Goal-Pool f√ºr alle Kreaturen (survive, explore, find_food, etc.) | hoch | --spec | - | - | - |
| 3241 | ‚¨ú | Creature | core | SkillProficiencies Schema: Record<SkillName, 'proficient' | 'expertise'> f√ºr creature.skills | mittel | Nein | #1200 | Creature.md#creaturedefinition | - |
| 3242 | ‚¨ú | Creature | core | SavingThrowProficiencies Schema: Record<AbilityName, boolean> f√ºr creature.savingThrows | mittel | Nein | #1200, #1208 | Creature.md#creaturedefinition | - |
| 3243 | ‚¨ú | Creature | core | Reactions Interface: reactions?: Action[] analog zu actions/legendaryActions | mittel | Nein | #1200, #1220 | Creature.md#creaturedefinition | - |
| 3244 | ‚¨ú | Creature | core | Languages Feld: languages?: string[] f√ºr Sprachen der Kreatur | niedrig | Nein | #1200 | Creature.md#creaturedefinition | - |
| 3245 | ‚¨ú | Creature | core | Creature.names Feld: names?: string[] f√ºr Fallback-Namensgenerierung bei fraktionslosen Creatures (von buildCultureFromCreatureTags genutzt) | mittel | -d | - | NPC-System.md#npc-generierung | - |
| 3246 | ‚¨ú | Creature | core | Creature.quirks Feld: quirks?: WeightedQuirk[] f√ºr Fallback-Quirks bei fraktionslosen Creatures | mittel | -d | - | NPC-System.md#npc-generierung | - |
| 3247 | ‚¨ú | Creature | core | Creature.goals Feld: goals?: WeightedGoal[] f√ºr Goal-Pool-Hierarchie in selectPersonalGoal() | mittel | -d | - | NPC-System.md#goal-pool-hierarchie | - |
| 3248 | ‚¨ú | NPC | features | usedQuirks Session-Tracking: Set<string> zur Vermeidung von Quirk-Wiederholungen innerhalb einer Session | mittel | -d | - | NPC-System.md#quirk-einzigartigkeit | - |
| 3252 | ‚¨ú | Application/DetailView | - | Trace-Details Anzeige im Encounter-Tab: traceAge + trackingDC (nur bei type='trace') | mittel | Nein | #3250, #2408 | - | - |
| 3253 | ‚¨ú | Application/DetailView | - | Entity Promotion: Multi-Creature Handling mit Kreatur-Counter und 'Alle ablehnen' Checkbox | mittel | Nein | #3015 | - | - |
| 3254 | ‚¨ú | Application/DetailView | - | Entity Promotion 'Anpassen' Dialog: NPC-Name, Traits, POI-Typ/Name, Position, LootTable, Fraktion-Option | mittel | Nein | #3015 | - | - |
| 3255 | ‚õî | Application/DetailView | - | Entity Promotion: Ein-Kreatur-Fraktion erstellen Option (Checkbox in Anpassen-Dialog) | niedrig | Nein | #3254, #1400 | - | - |
| 3256 | ‚¨ú | Application/DetailView | - | Detection-Modifikatoren Anzeige: noiseBonus, scentBonus, stealthPenalty in Detection-Sektion (Tooltip) | niedrig | Nein | #2971, #2949 | - | - |
| 3257 | ‚¨ú | Application/DetailView | - | Shop-Link Button bei Social-Encounters: Wenn Lead NPC Shop besitzt, Button anzeigen ‚Üí wechselt zu Shop-Tab | mittel | Nein | #1323, #2442 | - | - |
| 3258 | ‚úÖ | Encounter | prototype | CLI REPL-Framework mit readline implementieren Konformit√§t hergestellt: - PipelineState verwendet jetzt getypte Interfaces statt unknown - Import aus prototype/types/encounter.ts statt lokaler Definition Verhalten jetzt: - context: EncounterContext - draft: EncounterDraft - flavoured: FlavouredEncounter - difficulty: DifficultyResult - balanced: BalancedEncounter | hoch | Nein | - | prototypes/encounter.md | prototype/cli.ts: - parseCommand() - Befehl/Args/Flags parsen - executeCommand() - Command-Dispatch - COMMANDS Record - Befehlshandler - main() - REPL-Loop mit readline - PipelineState Import aus types/encounter.ts (typisiert) prototype/types/encounter.ts: - PipelineState Interface (unver√§ndert, bereits korrekt typisiert) - Alle Pipeline-Output-Typen verwendet |
| 3259 | ‚úÖ | Encounter | prototype | Preset-Loader f√ºr creatures, terrains, templates, factions, parties Deliverables: - [x] loadCreatures() l√§dt 29 Kreaturen - [x] loadTerrains() l√§dt 8 Terrains - [x] loadTemplates() l√§dt 6 Templates - [x] loadFactions() l√§dt 8 Fraktionen - [x] loadParty() erstellt PartySnapshot mit 4 Charakteren - [x] loadAllPresets() gibt vollst√§ndiges PresetCollection zur√ºck - [x] inspect Befehl im CLI funktioniert DoD: - [x] TypeScript kompiliert ohne Fehler - [x] CLI zeigt Presets korrekt an | hoch | Nein | - | prototypes/encounter.md | prototype/loaders/preset-loader.ts: - loadCreatures() - 29 Kreaturen aus base-creatures.json - loadTerrains() - 8 Terrains aus base-terrains.json - loadTemplates() - 6 Templates aus bundled-templates.json - loadFactions() - 8 Fraktionen aus base-factions.json - loadParty() - PartySnapshot mit 4 Charakteren - loadAllPresets() - Vollst√§ndige PresetCollection - createLookup() - Map-basierter Lookup-Helper - createPresetLookups() - Alle Lookups geb√ºndelt prototype/loaders/index.ts: - Re-Export aller Funktionen und Typen prototype/cli.ts: - inspect Befehl erweitert (creatures, terrains, templates, factions, party) |
| 3261 | ‚úÖ | Encounter | prototype | Pipeline-Typen (EncounterContext, EncounterDraft, FlavouredEncounter, etc.) Umgesetzt: - Alle 5 Pipeline-Output-Typen (EncounterContext, EncounterDraft, FlavouredEncounter, DifficultyResult, BalancedEncounter) - Hilfstypen (TimeSegment, CreatureSize, CreatureDisposition, DifficultyLevel, NarrativeRole) - Entity-Typen fuer Prototyp (Terrain, Creature, WeatherState, PartySnapshot, Feature, Faction) - Template-Typen (EncounterTemplate, TemplateSlot) - Group-Typen (CreatureGroup, FlavouredGroup, Activity, Goal, LootItem, GeneratedNpc) - PipelineState Interface (typisiert statt unknown) Keine Abweichungen von Spec. | hoch | Nein | - | prototypes/encounter.md | prototype/types/encounter.ts: - Pipeline-Output-Typen (EncounterContext, EncounterDraft, FlavouredEncounter, DifficultyResult, BalancedEncounter) - Entity-Typen (Terrain, Creature, WeatherState, PartySnapshot, Feature, Faction) - Template-Typen (EncounterTemplate, TemplateSlot) - Group-Typen (CreatureGroup, FlavouredGroup, Activity, Goal) - PipelineState Interface prototype/types/index.ts: - Re-Export aller Typen |
| 3262 | ‚úÖ | Encounter | prototype | Step 1: Initiation - Context aus CLI-Args erstellen Deliverables: - [x] createContext() Funktion in pipeline/initiation.ts - [x] handleInitiate() Command Handler in commands/initiate.ts - [x] CLI-Integration mit PresetLookups - [x] Validierung f√ºr Terrain, TimeSegment, Trigger DoD: - [x] npx tsx prototype/cli.ts startet ohne Fehler - [x] initiate --terrain forest --time midday erstellt EncounterContext - [x] state zeigt den Context korrekt an - [x] Fehler bei ung√ºltigem Terrain/Time werden angezeigt - [x] TypeScript kompiliert ohne Fehler | mittel | Nein | #3258, #3259, #3261 | prototypes/encounter.md, features/encounter/Initiation.md | prototype/pipeline/initiation.ts: - createContext(options, lookups) - Erstellt EncounterContext - isValidTimeSegment(), isValidTrigger() - Validierung - getAvailableTimeSegments(), getAvailableTriggers() - Hilfstext prototype/commands/initiate.ts: - handleInitiate(args, flags, state, lookups) - CLI Handler - Validiert --terrain und --time Flags - Speichert context in PipelineState prototype/cli.ts: - PresetLookups beim Start laden - initiate Handler integriert prototype/pipeline/index.ts, prototype/commands/index.ts: - Re-Exports |
| 3263 | ‚¨ú | Encounter | prototype | Steps 2-3: Population - Tile-Eligibility, Seed-Auswahl, Template-Matching, Slot-Bef√ºllung. Deliverables: Step 2.1 Tile-Eligibility (Filter: Terrain/Tageszeit, Gewichtung: Fraktion/Rarit√§t/Wetter, Minimum-Schwelle), Step 2.2 Seed-Auswahl (gewichtete Zufallsauswahl), Step 3.2a Template-Matching (Faction‚ÜíGenerisch‚ÜíSolo), Step 3.3 Slot-Bef√ºllung (Companion-Pool Faction/Tags, Design-Rollen-Matching, Gruppengr√∂√üen-Hierarchie), Step 3.4 Finalisierung (EncounterDraft) | mittel | Nein | #3262 | prototypes/encounter.md, features/encounter/Population.md | prototype/pipeline/population.ts, prototype/commands/populate.ts |
| 3264 | ‚õî | Encounter | prototype | Step 4: Flavour-Basis - Activity-Auswahl, Goal-Ableitung, Lead-NPC, DefaultLoot. Deliverables: (1) Activity-Auswahl: Pool aus GENERIC + Creature.activities + Faction.activities, gewichtete Zufallsauswahl, (2) Goal-Ableitung: Activity + NarrativeRole ‚Üí DEFAULT_GOALS_BY_ROLE + Faction.activityGoals, (3) Lead-NPC: 1 pro Gruppe, Name + 2 Traits + Quirk + Goal, (4) DefaultLoot: Creature.defaultLoot Chance-Roll, Items Kreaturen zuweisen | mittel | Nein | #3263 | prototypes/encounter.md, features/encounter/Flavour.md | prototype/pipeline/flavour.ts, prototype/commands/flavour.ts |
| 3265 | ‚õî | Encounter | prototype | Step 5 (vereinfacht): CR-basierte Difficulty-Berechnung | mittel | Nein | #3264 | prototypes/encounter.md, features/encounter/Difficulty.md | prototype/pipeline/difficulty.ts, prototype/commands/difficulty.ts |
| 3266 | ‚õî | Encounter | prototype | Step 6: Adjustments - Ziel-Difficulty + Best-Option-Algorithmus. Deliverables: (1) rollTargetDifficulty() Terrain-Threat Normalverteilung, (2) getTargetWinProbability() Difficulty‚ÜíWin%, (3) adjustForFeasibility() iterativer Algorithmus, (4) collectAdjustmentOptions() mit Distance/Disposition/Environment/Activity-Optionen, (5) AdjustmentOption Interface, (6) BalancedEncounter Output-Schema | mittel | Nein | #3265 | prototypes/encounter.md, features/encounter/Adjustments.md | prototype/pipeline/adjustments.ts, prototype/commands/adjust.ts |
| 3267 | ‚õî | Encounter | prototype | generate-Befehl: Vollst√§ndige Pipeline mit einem Aufruf | mittel | Nein | #3266 | prototypes/encounter.md | prototype/commands/generate.ts |
| 3268 | ‚õî | Encounter | prototype | Step 5 (vollst√§ndig): PMF-Kampfsimulation. Deliverables: 5.1.a calculateMovement() Vektor-Bewegung, 5.1.b selectAction() EV-gewichtet, 5.1.c parseDiceNotation()/convolveDie() PMF, 5.1.d applyConditionLayers(), 5.1.e applyDamageToHP() HP-Konvolution, 5.2 calculatePartyWinProbability()/calculateTPKRisk(), 5.3 classifyDifficulty()/calculateFinalDifficulty() | mittel | Nein | #3265 | prototypes/encounter.md, features/encounter/Difficulty.md | prototype/pipeline/difficulty.ts |
| 3269 | ‚õî | Encounter | prototype | Multi-Group-Support: Dual-Group, NarrativeRole, Dual-Hostile, GroupRelations. Deliverables: Step 3.1 Multi-Group-Entscheidung (~17% Chance), Step 3.2b Zweite Gruppe (Seed aus Pool, Template, Slots), NarrativeRole (Seed=threat, Zweite=threat| mittel |neutral|ally), Dual-Hostile (beide threat, Drei-Wege-Konflikt), GroupRelations Baseline | prototypes/encounter.md, features/encounter/Population.md, features/encounter/Difficulty.md#gruppen-relationen-calculaterelations | prototype/pipeline/population.ts, prototype/pipeline/difficulty.ts | #3266 | prototypes/encounter.md, features/encounter/Population.md | prototype/pipeline/population.ts, prototype/pipeline/adjustments.ts |
| 3270 | ‚õî | Encounter | prototype | Loot-System: Tag-Matching + Budget + Hoard + Multi-Group + Quest-Budget. Deliverables: (1) Tag-Matching: Item.lootTags ‚Üî Creature.lootTags, (2) Budget-Berechnung: encounterBudget (10-50%), Soft-Cap, Schulden-Handling, (3) DefaultLoot + Tag-Loot Orchestrierung, (4) Hoard-Wahrscheinlichkeit: Boss=70%, Camp=40%, Patrol=10%, Passing=0%, (5) Multi-Gruppen-Loot: Pro Gruppe separat, budgetShare, (6) Quest-Budget-Reduktion: Wenn Quest-Reward definiert | mittel | Nein | #3264 | prototypes/encounter.md, features/Loot-Feature.md | prototype/pipeline/flavour.ts |
| 3271 | ‚¨ú | Encounter | prototype | Feature-Modifier-Schema: FeatureModifier, CreatureProperty f√ºr Difficulty-Berechnung | mittel | Nein | #3261 | features/encounter/Initiation.md | prototype/types/encounter.ts: Feature.modifiers erweitern auf FeatureModifier[], CreatureProperty Type hinzuf√ºgen |
| 3272 | ‚¨ú | Encounter | prototype | Hazard-Schema: HazardDefinition, HazardTrigger, HazardEffect, SaveRequirement, AttackRequirement | niedrig | Nein | #3271 | features/encounter/Initiation.md | prototype/types/encounter.ts: Feature.hazard hinzuf√ºgen, HazardDefinition, HazardTrigger, HazardEffect, SaveRequirement, AttackRequirement Types |
| 3273 | ‚¨ú | Encounter | prototyp | Step 2.1b: Environmental-Eligibility - Hazards, Discoveries, Resources, Phenomena. Deliverables: Kategorien (hazard/discovery/resource/phenomenon), Trigger (Terrain/Wetter/POI/Zeit), EnvironmentalContext Schema, Kombination mit Creatures | mittel | Nein | #3263 | features/encounter/Population.md#step-21b-environmental-eligibility | prototype/pipeline/environmental.ts |
| 3274 | ‚¨ú | Encounter | prototyp | Pfad-basierte Creature-Pools - Stra√üen/Fl√ºsse erweitern eligible Creatures. Deliverables: Path.encounterModifier.creaturePool auslesen, Kreaturen zum Tile-Pool hinzuf√ºgen | mittel | Nein | #3263 | features/encounter/Population.md#pfad-basierte-creature-pools-post-mvp, domain/Path.md | prototype/pipeline/population.ts |
| 3275 | ‚¨ú | Encounter | prototyp | Activity-Entity-Typ + Presets f√ºr Encounter-Flavour. Deliverables: (1) Activity-Interface: id, name, awareness, detectability, contextTags, description, (2) base-activities.json: 15+ Activities (sleeping, resting, patrolling, ambushing, hunting, raiding, etc.), (3) Kontext-Filter: matchesContext(activity, EncounterContext) f√ºr timeOfDay, terrain, weather, narrativeRole, (4) Pool-Hierarchie: GENERIC_ACTIVITIES + Creature.activities + Faction.activities zusammenf√ºhren | mittel | Nein | #3261 | features/encounter/Flavour.md | prototype/types/encounter.ts: Activity-Interface erweitern, presets/activities/base-activities.json: 15+ Activities mit awareness/detectability/contextTags, prototype/pipeline/activity.ts: matchesContext(), buildActivityPool(), selectActivity() |
| 3276 | ‚¨ú | Encounter | prototyp | Perception-Berechnung mit Sweet-Spot/Pain-Point + allen Modifiern. Deliverables: (1) Sweet-Spot: Gewichtete Durchschnitts-Reichweite aller Actions nach Schadenspotential, (2) Pain-Point: Max erreichbare Distanz aus HP, Speed, Party-DPR, (3) Combat-Pr√§ferenz: melee/ranged/hybrid aus Ranged-Ratio, (4) Activity-Modifier: detectability ‚Üí initialDistance (0.5-1.5x), (5) Terrain-Modifier: encounterVisibility als Obergrenze, (6) Weather-Modifier: klar=1.0, nebel=0.4, blizzard=0.2, (7) Gr√∂√üen-Modifier: Gruppe (1-10x) + Kreatur-Size (1-3x), (8) Sichtbare Signaturen: Staubwolke +50%, Rauchs√§ule +100%, Banner +25%, (9) Perception-Aggregation: Multi-Group ‚Üí max(initialDistance) | mittel | Nein | #3264 | features/encounter/Flavour.md | prototype/pipeline/perception.ts: calculateSweetSpot(), calculatePainPoint(), determineCombatPreference(), calculateInitialDistance(), getWeatherVisibilityModifier(), getGroupSizeModifier(), getCreatureSizeModifier(), calculateSignatureBonus() |
| 3277 | ‚¨ú | Encounter | prototyp | NPC-Instanziierung mit Detail-Stufen + Highlight-NPCs + Wiederverwendung. Deliverables: (1) Detail-Stufen: Lead (name, 2 traits, quirk, goal), Highlight (name, 1 trait), Anonym (creature-typ + count), (2) Lead-NPC: 1 pro Gruppe, persistiert (in-memory f√ºr Prototyp), (3) Highlight-NPCs: Max 3 global, nur aus Gruppen mit >1 Kreatur, (4) NPC-Wiederverwendung: Existierende NPCs bevorzugen, bei Mehrfach-Match geografisch n√§chsten w√§hlen (lastKnownPosition), (5) GeneratedNpc-Schema: detailLevel, traits[], quirk, goal | mittel | Nein | #3264 | features/encounter/Flavour.md, domain/NPC-System.md | prototype/pipeline/npc-generator.ts: generateLeadNPC(), generateHighlightNPCs(), findExistingNPC(), prototype/types/encounter.ts: GeneratedNpc mit detailLevel/traits/quirk |
| 3278 | ‚¨ú | Encounter | prototyp | Step 5.0: Simulation-Setup - Combat Profiles, Resource Budget, 3D-Grid, Positionen, Surprise. Deliverables: createPartyProfiles(), calculateResourceBudget(), initializeGrid(), calculateInitialPositions(), checkSurprise() | mittel | Nein | #3264 | features/encounter/Difficulty.md#setup | prototype/pipeline/difficulty.ts |
| 3279 | ‚¨ú | Encounter | prototyp | Step 5.0.6: Disposition-Berechnung - Creature/Faction-Disposition, Combat Probability. Deliverables: calculateDisposition(), calculateCombatProbability() | mittel | Nein | #3264 | features/encounter/Difficulty.md#step-50-disposition-berechnung | prototype/pipeline/difficulty.ts |
| 3280 | ‚¨ú | Encounter | prototyp | Distance-Modifier mit Pain-Point-Decay f√ºr XP-Gewichtung. Deliverables: getDistanceXPModifier() mit asymptotischem Decay | mittel | Nein | #3264 | features/encounter/Difficulty.md, features/encounter/Flavour.md#perception-berechnung | prototype/pipeline/difficulty.ts |
| 3281 | ‚¨ú | Encounter | prototyp | XP-Rewards: D&D 5e Thresholds (L1-20), Gruppen-Multiplikatoren. Deliverables: XP_THRESHOLDS, getGroupMultiplier(), calculateXPReward(), calculateAdjustedXP() | niedrig | Nein | #3265 | features/encounter/Difficulty.md#xp-rewards | prototype/pipeline/difficulty.ts |
| 3282 | ‚¨ú | Encounter | prototype | Step 6 Erweiterung: Creature-Slot-Anpassungen. Deliverables: (1) CreatureSlotOption Interface (add/remove/swap), (2) collectCreatureSlotOptions() Anzahl/Swap/Cross-Group, (3) getAlternativeCreatures() Companion-Pool+designRole, (4) generateCrossGroupOptions() Multi-Group-Verschiebung | mittel | Nein | #3266, #3269 | features/encounter/Adjustments.md#creature-slot-anpassungen | prototype/pipeline/adjustments.ts |
| 3283 | ‚¨ú | Encounter | prototype | Step 6 Erweiterung: Ally-Staerke-Berechnung. Deliverables: (1) AllyStrengthResult Interface, (2) calculateAllyStrengthModifier() CR-zu-Level Ratio, (3) calculateAverageGroupCR(), (4) getEffectivePartyStrength() angepasste Thresholds | mittel | Nein | #3266, #3269 | features/encounter/Adjustments.md#ally-staerke-formel | prototype/pipeline/adjustments.ts |
| 3284 | ‚¨ú | Encounter | prototype | Daily-XP-Budget-Tracking. Deliverables: (1) DailyXPTracker Interface, (2) calculateDailyBudget() 6-8 Medium/Tag, (3) Budget-Reset bei Long Rest | mittel | Nein | #3266 | features/encounter/Adjustments.md#daily-xp-budget-tracking | prototype/pipeline/adjustments.ts |
| 3285 | üîí | Encounter | prototype | Output-Formatter (JSON + formatierter Text) Umgesetzt: - json-formatter.ts: formatJson(), formatContextJson(), formatDraftJson(), formatFlavouredJson(), formatDifficultyJson(), formatBalancedJson(), formatStateJson() - text-formatter.ts: formatContextText(), formatDraftText(), formatFlavouredText(), formatDifficultyText(), formatBalancedText(), formatStateText() mit lesbarerer Ausgabe - index.ts: Re-Exports, createFormatter(mode) Factory, Formatter Interface - cli.ts: replConfig State, set --json/--text Befehl, state Befehl nutzt Formatter Keine Abweichungen von Spec. | mittel | Nein | - | - | - |
| 3286 | ‚¨ú | Encounter | - | Publishing-Schemas: EncounterInstance, EncounterCreature, EncounterOutcome, CreatureKill | mittel | Nein | #3261 | - | - |

---

## üêõ Bugs

| b# | Status | Beschreibung | Prio | Deps |
|---:|:------:|--------------|:----:|------|
| b1 | ‚¨ú | Encounter-Button in SessionRunner Actions-Sektion entfernen (verschoben nach DetailView #2470) | mittel | #955 |
| b2 | ‚¨ú | Teleport-Button in SessionRunner Actions-Sektion entfernen (obsolet) | niedrig | #955 |
| b3 | ‚úÖ | getAll() sync/async-Bug: gibt leeres Array zur√ºck bevor Daten geladen | hoch | - |
| b4 | ‚úÖ | Cartographer hat kein Ribbon-Icon - Tool nur √ºber Command-Palette erreichbar | hoch | - |
| b5 | ‚¨ú | Task #2564 Imp-Spalte zeigt .svelte statt .ts - Roadmap-Korrektur n√∂tig | niedrig | - |
| b8 | ‚úÖ | SessionRunner Actions-Panel zeigt 'encounter' und 'teleport' Buttons, die dort nicht hingeh√∂ren | hoch | - |
| b9 | ‚¨ú | Combat starten Button im Encounter-Tab tut nichts: Button publisht ENCOUNTER_START_REQUESTED Event, aber Combat-Feature reagiert nicht (encounter-tab.ts:385-399 ‚Üí view.ts:234-245 ‚Üí encounter-service.ts:763-770). M√∂gliche Ursache: Combat-Feature nicht auf COMBAT_START_REQUESTED subscribed oder Encounter-State-Validierung schl√§gt fehl. | hoch | #428 |
| b10 | ‚¨ú | Task #2001 fehlt in Roadmap (wird in #231 Dependencies referenziert) | hoch | - |
| b11 | ‚¨ú | add-service schreibt korrupte Doc-Tabellen: Layer zeigt '-', MVP zeigt '--deps', Imp zeigt '-' bei neu erstellten Tasks | hoch | #3210, #3211, #3212, #3213, #3214 |
| b12 | ‚úÖ | Task-Parser bricht bei Multi-Line-Beschreibungen in Markdown-Tabellen. Wenn task.mjs edit --beschreibung mit Newlines aufgerufen wird, erzeugt das Script Tabellenzeilen √ºber mehrere Zeilen (z.B. Zeile 116-129), was das Markdown-Format bricht. Danach kann task.mjs show/edit die Task nicht mehr finden (TASK_NOT_FOUND). Reproduktion: task.mjs edit <ID> --beschreibung 'Zeile1\n\nZeile2' ‚Üí Parser-Fehler bei nachfolgenden Operationen. Fix: Entweder Newlines in Beschreibung escapen/ersetzen, oder Multi-Line-Support im Parser implementieren. | hoch | Multi-Line-Beschreibungen in edit werden jetzt zu Leerzeichen konvertiert. Fixes in: edit-service.mjs (Input-Sanitizing), builder.mjs (defensives Sanitizing), claim-service.mjs und task.mjs (Null-Checks f√ºr domain bei Bugs). |
| b13 | üîí | Party Manager als eigene View statt DetailView-Tab implementiert | hoch | - |
| b14 | ‚úÖ | DetailView ViewModel bekommt keine creatures - UI zeigt falsche XP (10 statt 50 pro Wolf) | hoch | - |

---

## Verwandte Dokumentation

| Thema | Dokument |
|-------|----------|
| Core-Types | Core.md |
| Events | Events-Catalog.md |
| Layer-Struktur | Project-Structure.md |
| Error-Handling | Error-Handling.md |
| Conventions | Conventions.md |
| Testing | Testing.md |
