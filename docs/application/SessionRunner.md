# SessionRunner

Die zentrale Spielansicht waehrend einer D&D-Session.

**Pfad:** `src/application/session-runner/`

---

## Uebersicht

Der SessionRunner ist die Hauptansicht fuer den aktiven Spielbetrieb. Er kombiniert alle Session-relevanten Features in einer kohaerenten UI:

| Bereich | Funktion |
|---------|----------|
| **Map-Panel** | Karten-Anzeige mit Party-Token und Overlay |
| **Travel-Controls** | Routen-Planung und Reise-Steuerung |
| **Context-Panel** | Aktuelle Location, Wetter, Party-Status |
| **Time-Panel** | Kalender, Uhrzeit, Time-Controls |
| **Encounter-Panel** | Encounter-Generierung und Combat |
| **Audio-Panel** | Musik und Ambience |

---

## Layout-Wireframe

### Standard-Layout (Desktop)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [â‰¡] SessionRunner          â”‚ â® â–¶ â­ â”‚ ğŸ“… 15. Mirtul, Jahr 1492 â”‚ âš™ï¸     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                                             â”‚  â”‚  ğŸ“ CONTEXT            â”‚â”‚
â”‚  â”‚                                             â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚                                             â”‚  â”‚  Location: Silverwood  â”‚â”‚
â”‚  â”‚                                             â”‚  â”‚  Terrain: Forest       â”‚â”‚
â”‚  â”‚                 MAP PANEL                   â”‚  â”‚  Elevation: 450m       â”‚â”‚
â”‚  â”‚                                             â”‚  â”‚                        â”‚â”‚
â”‚  â”‚            [Hex-Grid mit Party]             â”‚  â”‚  â˜€ï¸ Weather             â”‚â”‚
â”‚  â”‚                                             â”‚  â”‚  Clear, 18Â°C           â”‚â”‚
â”‚  â”‚                    ğŸ¯                       â”‚  â”‚  Wind: Light NW        â”‚â”‚
â”‚  â”‚                                             â”‚  â”‚                        â”‚â”‚
â”‚  â”‚                                             â”‚  â”‚  ğŸ‘¥ Party              â”‚â”‚
â”‚  â”‚                                             â”‚  â”‚  Speed: 24 mi/day      â”‚â”‚
â”‚  â”‚                                             â”‚  â”‚  Food: 12 days         â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚  Encumbrance: Normal   â”‚â”‚
â”‚  â”‚  ğŸš¶ TRAVEL CONTROLS                         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚  [Plan Route] [Start] [Pause] [Fast-Fwd]   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 4.2 hrs           â”‚  â”‚  âš”ï¸ ENCOUNTER          â”‚â”‚
â”‚  â”‚  Distance: 12 mi â”‚ ETA: Sunset             â”‚  â”‚  [Generate] [Roll]     â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                        â”‚â”‚
â”‚                                                    â”‚  No active encounter   â”‚â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                        â”‚â”‚
â”‚  â”‚  ğŸµ AUDIO            â”‚  â”‚  ğŸ“œ QUEST LOG     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚  Music: Tavern Night â”‚  â”‚  â€¢ Goblin Cave    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  Ambience: Forest    â”‚  â”‚    2/4 objectives â”‚  â”‚  ğŸ“– JOURNAL            â”‚â”‚
â”‚  â”‚  [â¸] [â­] [ğŸ”Šâ”€â”€â”€]    â”‚  â”‚  â€¢ Missing Ring   â”‚  â”‚  Last: Arrived at...   â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  [+ Note] [View All]   â”‚â”‚
â”‚                                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Collapsed Sidebar

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [â‰¡]  â”‚ â® â–¶ â­ â”‚ ğŸ“… 15. Mirtul â”‚ âš™ï¸                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                            â”‚  â”‚  [ğŸ“]  â”‚ â”‚
â”‚  â”‚                                                            â”‚  â”‚  [â˜€ï¸]  â”‚ â”‚
â”‚  â”‚                                                            â”‚  â”‚  [ğŸ‘¥]  â”‚ â”‚
â”‚  â”‚                       MAP PANEL                            â”‚  â”‚  [âš”ï¸]  â”‚ â”‚
â”‚  â”‚                   (Maximierte Ansicht)                     â”‚  â”‚  [ğŸ“œ]  â”‚ â”‚
â”‚  â”‚                                                            â”‚  â”‚  [ğŸµ]  â”‚ â”‚
â”‚  â”‚                                                            â”‚  â”‚  [ğŸ“–]  â”‚ â”‚
â”‚  â”‚                                                            â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Panel-Beschreibungen

### Map-Panel

Das zentrale Element - zeigt die aktive Karte mit Party-Position.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Map: Silverwood Region                        [ğŸ”+] [ğŸ”-]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚     â¬¡ â¬¡ â¬¡ â¬¡ â¬¡ â¬¡ â¬¡ â¬¡ â¬¡                                    â”‚
â”‚    â¬¡ ğŸŒ² ğŸŒ² â›°ï¸ â›°ï¸ ğŸŒ² ğŸŒ² â¬¡                                   â”‚
â”‚     â¬¡ ğŸŒ² ğŸ  ğŸŒ² ğŸŒ² ğŸŒ² â¬¡ â¬¡                                    â”‚
â”‚    â¬¡ ğŸŒ² ğŸŒ² ğŸ¯ ğŸŒ² ğŸŒ² â¬¡ â¬¡       ğŸ¯ = Party Position          â”‚
â”‚     â¬¡ ğŸŒŠ ğŸŒŠ ğŸŒ² ğŸŒ² â¬¡ â¬¡ â¬¡       ğŸ  = Location (POI)          â”‚
â”‚    â¬¡ â¬¡ ğŸŒŠ ğŸŒŠ ğŸŒ² â¬¡ â¬¡ â¬¡        â›°ï¸ = Mountain                 â”‚
â”‚     â¬¡ â¬¡ â¬¡ â¬¡ â¬¡ â¬¡ â¬¡ â¬¡                                       â”‚
â”‚                                                             â”‚
â”‚  [Overlays: â˜Wetter â˜‘ï¸Territory â˜Encounter-Zones]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Interaktionen:**
- Klick auf Tile â†’ Context-Panel aktualisiert
- Rechtsklick â†’ Kontext-Menu (Set Waypoint, Teleport, Info)
- Drag â†’ Pan
- Scroll â†’ Zoom

### Travel-Controls

Steuerung fuer Overland-Travel.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸš¶ TRAVEL                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  Route: Silverwood â†’ Dragon's Rest (3 waypoints)            â”‚
â”‚                                                             â”‚
â”‚  â•­â”€â”€â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®            â”‚
â”‚  â”‚        â†‘                                    â”‚            â”‚
â”‚  â”‚     Current                              Endâ”‚            â”‚
â”‚  â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯            â”‚
â”‚  Progress: 12.4 / 48 miles (26%)                            â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚  [ğŸ“ Plan]  [â–¶ Start]  [â¸ Pause]  [â© x2]  â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                             â”‚
â”‚  Next Check: 2.3 hours â”‚ Arrival: Tomorrow, Midday          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**States:**
- `idle` - Keine aktive Route
- `planning` - Route wird geplant (Waypoints setzen)
- `traveling` - Reise aktiv (Animation)
- `paused` - Reise pausiert
- `encounter` - Encounter unterbrochen Reise

### Context-Panel

Zeigt Kontext zur aktuellen Party-Position.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“ CONTEXT                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                            â”‚
â”‚  Location                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚  Silverwood (Forest)       â”‚
â”‚  Hex: (12, 8)              â”‚
â”‚  Elevation: 450m           â”‚
â”‚                            â”‚
â”‚  â˜€ï¸ Weather                â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚  Clear Skies               â”‚
â”‚  Temp: 18Â°C (comfortable)  â”‚
â”‚  Wind: 8 mph NW            â”‚
â”‚  Humidity: 45%             â”‚
â”‚                            â”‚
â”‚  Effects:                  â”‚
â”‚  â€¢ Normal visibility       â”‚
â”‚  â€¢ No travel penalty       â”‚
â”‚                            â”‚
â”‚  ğŸ‘¥ Party Status           â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚  Speed: 24 mi/day          â”‚
â”‚  Mode: On Foot             â”‚
â”‚  Encumbrance: Normal       â”‚
â”‚  Rations: 12 days          â”‚
â”‚  Water: 8 days             â”‚
â”‚                            â”‚
â”‚  [Manage Party â†’]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Time-Panel (Header)

Kompakte Zeit-Anzeige im Header mit Quick-Controls.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â®  â–¶  â­  â”‚  ğŸ“… 15. Mirtul, Jahr 1492 DR  â”‚  ğŸ• 14:30 (Day)     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Buttons:                                                        â”‚
â”‚  â® = -1 hour    â–¶ = Resume/Pause travel    â­ = +1 hour         â”‚
â”‚                                                                  â”‚
â”‚  Klick auf Datum â†’ Jump-to-Date Dialog                          â”‚
â”‚  Klick auf Uhrzeit â†’ Time-Segment-Auswahl (Dawn/Morning/...)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Encounter-Panel

Encounter-Generierung und aktiver Combat.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš”ï¸ ENCOUNTER              â”‚         â”‚  âš”ï¸ ACTIVE COMBAT          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                            â”‚         â”‚                            â”‚
â”‚  No active encounter       â”‚   â†’     â”‚  Round 3                   â”‚
â”‚                            â”‚         â”‚                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚         â”‚  Initiative:               â”‚
â”‚  â”‚  [ğŸ² Generate]       â”‚  â”‚         â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚  â”‚  [ğŸ“‹ From Quest]     â”‚  â”‚         â”‚  â–¶ 18: Goblin Boss        â”‚
â”‚  â”‚  [âœï¸ Custom]         â”‚  â”‚         â”‚    15: Ragnar (Player)     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚         â”‚    12: Goblin 1            â”‚
â”‚                            â”‚         â”‚    10: Elara (Player)      â”‚
â”‚  Last: Goblin Patrol       â”‚         â”‚     8: Goblin 2 ğŸ’€         â”‚
â”‚  (resolved - 200 XP)       â”‚         â”‚                            â”‚
â”‚                            â”‚         â”‚  [Damage] [Heal] [Cond.]   â”‚
â”‚                            â”‚         â”‚  [Next Turn] [End Combat]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Audio-Panel

Musik und Ambience-Steuerung.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸµ AUDIO                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                      â”‚
â”‚  Music                               â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚  â™ª Tavern Night (Medieval)           â”‚
â”‚  [â¸] [â­ Skip] [ğŸ”Šâ”€â”€â”€â”€â—â”€â”€] 70%       â”‚
â”‚                                      â”‚
â”‚  Ambience                            â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚  ğŸŒ² Forest Day                       â”‚
â”‚  [â¸] [ğŸ”Šâ”€â”€â—â”€â”€â”€â”€] 40%                â”‚
â”‚                                      â”‚
â”‚  Mode: [Auto â—] [Manual â—‹]           â”‚
â”‚  Auto-selects based on context       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Quest-Log (Mini)

Kompakte Quest-Uebersicht.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“œ ACTIVE QUESTS                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                   â”‚
â”‚  â— Goblin Cave            [2/4]  â”‚
â”‚    â”” Next: Find entrance          â”‚
â”‚                                   â”‚
â”‚  â— The Missing Ring       [1/3]  â”‚
â”‚    â”” Next: Talk to jeweler        â”‚
â”‚                                   â”‚
â”‚  â—‹ Dragon's Hoard (hidden)       â”‚
â”‚                                   â”‚
â”‚  [View All Quests â†’]              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Journal (Mini)

Letzte Eintraege und Quick-Note.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“– JOURNAL                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                            â”‚
â”‚  Recent:                   â”‚
â”‚  â€¢ 14:20 - Arrived at      â”‚
â”‚    Silverwood              â”‚
â”‚  â€¢ 12:00 - Weather changed â”‚
â”‚    to Clear                â”‚
â”‚  â€¢ 10:30 - Encounter:      â”‚
â”‚    Wolf Pack (resolved)    â”‚
â”‚                            â”‚
â”‚  [+ Quick Note]            â”‚
â”‚  [View Full Journal â†’]     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Shop-Panel

Interaktion mit Haendlern (Kaufen/Verkaufen).

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸª Blacksmith's Forge                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  Search: [____________________] [Filter: All â–¼]    â”‚
â”‚                                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  ğŸ—¡ï¸ Longsword                   15 gp    [Buy]     â”‚
â”‚  ğŸ›¡ï¸ Shield                      10 gp    [Buy]     â”‚
â”‚  âš”ï¸ Greatsword                  50 gp    [Buy]     â”‚
â”‚  ğŸ¥‹ Chain Mail                  75 gp    [Buy]     â”‚
â”‚  ğŸ¥‹ Plate Armor (out of stock)  ---      [---]     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                     â”‚
â”‚  [Load More...]                    Showing 5/23    â”‚
â”‚                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ’° Party Gold: 250 gp                              â”‚
â”‚  [Sell Items...]                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Interaktionen:**
- `[Buy]` â†’ Item wird dem Party-Inventar hinzugefuegt, Gold abgezogen
- `[Sell Items...]` â†’ Oeffnet Party-Inventar mit Verkaufs-Optionen
- Filter: Nach Item-Typ (Weapons, Armor, Potions, etc.)

**Verkaufs-Modus:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸª Sell to Blacksmith's Forge                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  Party Inventory:                                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  ğŸ—¡ï¸ Rusty Sword                  2 gp    [Sell]    â”‚
â”‚  ğŸ›¡ï¸ Cracked Shield               1 gp    [Sell]    â”‚
â”‚  ğŸ“¦ Goblin Trinkets              5 sp    [Sell]    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ’° Party Gold: 250 gp                              â”‚
â”‚  [Back to Shop]                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Shop-Oeffnung:**
- Automatisch wenn Party Location mit Shop betritt
- Manuell via Location-Context-Menu
- GM kann Shop jederzeit oeffnen

â†’ Entity-Schema: [Shop.md](../domain/Shop.md)

---

## Interaktions-Flows

### Flow: Reise starten

```
User klickt [Plan Route]
    â”‚
    â–¼
Map-Panel wechselt in Planning-Mode
    â”‚ (Waypoints per Klick setzen)
    â–¼
User klickt [Start]
    â”‚
    â–¼
ViewModel: eventBus.publish('travel:start-requested')
    â”‚
    â–¼
Travel-Feature startet Animation
    â”‚
    â”œâ”€â”€ Time-Feature: Zeit wird vorgerueckt
    â”œâ”€â”€ Weather-Feature: Wetter aktualisiert
    â””â”€â”€ Context-Panel: Location aktualisiert
    â”‚
    â–¼
Bei Encounter-Check erfolgreich:
    â”‚
    â–¼
Travel pausiert, Encounter-Panel zeigt Preview
```

### Flow: Encounter starten

```
User klickt [Generate] im Encounter-Panel
    â”‚
    â–¼
ViewModel: eventBus.publish('encounter:generate-requested')
    â”‚
    â–¼
Encounter-Feature generiert basierend auf:
    â”œâ”€â”€ Aktuelle Location (Terrain, EncounterZone)
    â”œâ”€â”€ Aktives Wetter
    â”œâ”€â”€ Fraktions-Praesenz
    â””â”€â”€ Zeit (Tag/Nacht)
    â”‚
    â–¼
Encounter-Preview wird angezeigt
    â”‚
    â–¼
User klickt [Start Combat]
    â”‚
    â–¼
Encounter-Panel wechselt zu Combat-Mode
Combat-Feature uebernimmt
```

### Flow: Zeit manuell aendern

```
User klickt auf Zeit im Header
    â”‚
    â–¼
Time-Segment-Dropdown erscheint
    â”‚
    â–¼
User waehlt "Evening"
    â”‚
    â–¼
ViewModel: eventBus.publish('time:advance-requested')
    â”‚
    â–¼
Time-Feature rueckt Zeit vor
    â”‚
    â”œâ”€â”€ Weather-Feature: Wetter-Update
    â”œâ”€â”€ Audio-Feature: Track-Wechsel (Evening-Mood)
    â””â”€â”€ Context-Panel: Day-Cycle aktualisiert
```

---

## State-Synchronisation

### ViewModel-State

```typescript
interface SessionRunnerState {
  // Map
  activeMapId: EntityId<'map'> | null;
  camera: CameraState;
  overlays: OverlaySettings;

  // Travel
  travelState: TravelState;           // idle | planning | traveling | paused
  currentRoute: Route | null;
  partyPosition: HexCoordinate;

  // Time
  currentTimestamp: Timestamp;
  daySegment: DaySegment;

  // Weather
  currentWeather: Weather;

  // Encounter
  activeEncounter: Encounter | null;
  combatState: CombatState | null;

  // Audio
  currentMusic: Track | null;
  currentAmbience: Track | null;
  audioMode: 'auto' | 'manual';

  // UI
  sidebarCollapsed: boolean;
  activePanels: PanelId[];
}
```

### Event-Subscriptions

```typescript
// SessionRunner-ViewModel subscribed auf:
const subscriptions = [
  'travel:state-changed',
  'travel:position-changed',
  'time:state-changed',
  'weather:state-changed',
  'encounter:generated',
  'encounter:resolved',
  'combat:state-changed',
  'audio:track-changed',
  'map:loaded',
  'quest:objective-completed'
];
```

---

## Keyboard-Shortcuts

| Shortcut | Aktion |
|----------|--------|
| `Space` | Travel: Start/Pause |
| `Escape` | Cancel aktuelle Aktion |
| `T` | Travel-Panel fokussieren |
| `E` | Encounter generieren |
| `J` | Quick-Note oeffnen |
| `1-6` | Time-Segment springen |
| `+`/`-` | Zoom In/Out |
| `Arrow Keys` | Pan Map |

---

## Prioritaet

| Komponente | MVP | Post-MVP | Notiz |
|------------|:---:|:--------:|-------|
| Map-Panel mit Party-Token | âœ“ | | Kern-Ansicht |
| Travel-Controls (basic) | âœ“ | | Route + Start/Pause |
| Context-Panel (Location) | âœ“ | | Aktuelle Tile-Info |
| Time-Header | âœ“ | | Datum/Uhrzeit |
| Weather-Anzeige | âœ“ | | Im Context-Panel |
| Encounter-Panel (Generate) | âœ“ | | Basis-Generierung |
| Combat-Integration | âœ“ | | Initiative-Tracker |
| Audio-Panel | âœ“ | | Auto-Selection |
| Shop-Panel | âœ“ | | Kaufen/Verkaufen |
| Quest-Log Mini | | mittel | Kompakt-Ansicht |
| Journal Mini | | mittel | Quick-Note |
| Collapsed Sidebar | | niedrig | Responsive UI |

---

*Siehe auch: [Application.md](../architecture/Application.md) | [Travel-System.md](../features/Travel-System.md) | [Combat-System.md](../features/Combat-System.md) | [Weather-System.md](../features/Weather-System.md)*
