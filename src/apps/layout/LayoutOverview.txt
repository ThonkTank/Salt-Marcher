# Layout Editor – Overview

## Struktur

```
src/apps/layout/
├─ view.ts             # Obsidian-ItemView für den visuellen Layout-Editor
└─ LayoutOverview.txt  # Diese Übersicht
```

## Features & Verantwortlichkeiten

- **Layout-Arbeitsfläche:** Stellt eine konfigurierbare Canvas (Breite/Höhe) bereit, auf der beliebig viele UI-Elemente platziert werden können.
- **Layout-Hilfen & Container:** Neue VBox-/HBox-Container gruppieren mehrere Elemente, verteilen sie automatisch gleichmäßig (inkl. Abstand, Innenabstand und Ausrichtung) und halten die Kinder bei Größen- oder Positionsänderungen synchron. Container lassen sich über den Inspector bestücken, sortieren und räumen ihre Einträge automatisch nach.
- **Element-Palette & Leerstart:** Fügt per Klick Labels, Textfelder, Mehrzeiler, Container-Boxen, Trennlinien, Dropdowns und Such-Dropdowns hinzu – jedes neue Element landet direkt auf der Canvas und kann sofort bearbeitet werden. Wird beim Erstellen ein Container ausgewählt, landet das neue Element direkt darin und übernimmt dessen Layout-Einstellungen. Der Editor startet jetzt mit einer leeren Arbeitsfläche, sodass Layouts ohne Vorbelegung entworfen werden können.
- **Element-Verwaltung:** Unterstützt Auswählen, Verschieben und Skalieren per Drag & Drop oder numerische Eingaben, inklusive visueller Auswahlmarkierung; Container bewegen ihre Kinder mit und wenden nach dem Loslassen erneut ihre Auto-Layouts an.
- **Inspector-Panel:** Ermöglicht das Anpassen von Texten, Beschreibungen, Platzhaltern, Default-Werten, Dropdown-Optionen und verknüpften Creature-Attributen; bietet zudem Container-spezifische Eingaben für Abstand, Innenabstand, Ausrichtung, Kinderverwaltung sowie eine schnelle Zuweisung/Abmeldung von Elementen aus Containern.
- **Inline-Attributeditor:** Attribute lassen sich direkt am Canvas-Element über ein Popover pflegen; Inspector und Canvas bleiben dabei synchron.
- **Export für Layoutdaten:** Generiert jederzeit ein JSON-Snippet mit Canvas-Größe plus vollständigem Element-Metadatenpaket (Typ, Texte, Optionen, Attribute, Maße), damit Layouts reproduzierbar bleiben.
- **Creature-Creator-Import:** Baut den DOM des Creature-Creator-Dialogs in einer Sandbox nach, analysiert Maße, weist passende Elementtypen zu und füllt die Canvas automatisch mit vorkonfigurierten UI-Bereichen.

## Dateibeschreibungen

### `view.ts`
- Implementiert `LayoutEditorView` als `ItemView`-Ableitung.
- Baut Header (Element-Palette, Import, Status), Canvas und Inspector auf und hält DOM-Referenzen für performante Aktualisierungen.
- Verwaltet Element-Modelle in einem Array, synchronisiert Position/Größe mit dem DOM und bedient Pointer-basierte Drag-/Resize-Interaktionen.
- Stellt im Inspector Eingabefelder für Label, Beschreibung, Platzhalter, Default-Werte, Dropdown-Optionen sowie eine Attribut-Auswahl bereit, ergänzt um Container-spezifische Controls (Abstand, Padding, Ausrichtung, Child-Management) und eine Container-Zuweisung für klassische Elemente.
- Synchronisiert den Inline-Attributeditor (Popover auf der Canvas) mit dem Inspector und aktualisiert beide Wege konsistent.
- Rekonstruiert bei Bedarf das Creature-Creator-Layout über die Abschnitts-Mount-Funktionen (`mountCreatureBasicsSection`, `mountCreatureStatsAndSkillsSection`, …), erkennt simple Eingabe-Typen und projiziert die gemessenen Bounding-Boxes auf die Canvas.
- Erstellt das Export-JSON inklusive Canvas- und Element-Metadaten (inklusive Container-Beziehungen, Layout-Konfiguration und Kinderlisten) und stellt eine Kopier-Schaltfläche bereit.
